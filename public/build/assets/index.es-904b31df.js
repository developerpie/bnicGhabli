import{g as gl,x as gn,z as Er,A as X,B as jm,D as yl,E as vl,G as _a,H as ys,I as Mm,J as Gr,K as qm,U as Um,L as zm,N as W,M as km,O as Xo,Q as Hm,_ as Bm,S as Vm,V as sh,T as Km,X as Gm,Y as Wm,Z as oh,$ as Jm,a0 as Ym,a1 as ps,a2 as Qm,a3 as ml,a4 as gr,a5 as Xm,a6 as Zm,a7 as Oi,a8 as tt,a9 as Lt,aa as Kr,ab as kt,ac as e_,ad as Ai,ae as _l,af as t_,ag as r_,ah as i_,ai as bl,aj as n_,ak as wl,al as El,am as Ci,an as Zo,ao as us,ap as Ni,aq as s_,ar as hs,as as o_,at as a_,au as c_,av as u_,aw as h_,ax as Lo,ay as ah,az as l_,aA as f_,aB as p_,aC as ch,aD as d_,aE as g_,aF as y_,aG as v_,aH as m_,aI as __,aJ as b_,aK as ls,aL as xl,aM as jo,aN as w_,aO as E_}from"./app-8c4d1a63.js";var ba={exports:{}},Ti=typeof Reflect=="object"?Reflect:null,uh=Ti&&typeof Ti.apply=="function"?Ti.apply:function(r,t,n){return Function.prototype.apply.call(r,t,n)},fs;Ti&&typeof Ti.ownKeys=="function"?fs=Ti.ownKeys:Object.getOwnPropertySymbols?fs=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:fs=function(r){return Object.getOwnPropertyNames(r)};function x_(a){console&&console.warn&&console.warn(a)}var Il=Number.isNaN||function(r){return r!==r};function Te(){Te.init.call(this)}ba.exports=Te;ba.exports.once=O_;Te.EventEmitter=Te;Te.prototype._events=void 0;Te.prototype._eventsCount=0;Te.prototype._maxListeners=void 0;var hh=10;function vs(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(Te,"defaultMaxListeners",{enumerable:!0,get:function(){return hh},set:function(a){if(typeof a!="number"||a<0||Il(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");hh=a}});Te.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Te.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||Il(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function Sl(a){return a._maxListeners===void 0?Te.defaultMaxListeners:a._maxListeners}Te.prototype.getMaxListeners=function(){return Sl(this)};Te.prototype.emit=function(r){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var s=r==="error",c=this._events;if(c!==void 0)s=s&&c.error===void 0;else if(!s)return!1;if(s){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var p=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw p.context=l,p}var m=c[r];if(m===void 0)return!1;if(typeof m=="function")uh(m,this,t);else for(var y=m.length,S=Cl(m,y),n=0;n<y;++n)uh(S[n],this,t);return!0};function Pl(a,r,t,n){var s,c,l;if(vs(t),c=a._events,c===void 0?(c=a._events=Object.create(null),a._eventsCount=0):(c.newListener!==void 0&&(a.emit("newListener",r,t.listener?t.listener:t),c=a._events),l=c[r]),l===void 0)l=c[r]=t,++a._eventsCount;else if(typeof l=="function"?l=c[r]=n?[t,l]:[l,t]:n?l.unshift(t):l.push(t),s=Sl(a),s>0&&l.length>s&&!l.warned){l.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=a,p.type=r,p.count=l.length,x_(p)}return a}Te.prototype.addListener=function(r,t){return Pl(this,r,t,!1)};Te.prototype.on=Te.prototype.addListener;Te.prototype.prependListener=function(r,t){return Pl(this,r,t,!0)};function I_(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ol(a,r,t){var n={fired:!1,wrapFn:void 0,target:a,type:r,listener:t},s=I_.bind(n);return s.listener=t,n.wrapFn=s,s}Te.prototype.once=function(r,t){return vs(t),this.on(r,Ol(this,r,t)),this};Te.prototype.prependOnceListener=function(r,t){return vs(t),this.prependListener(r,Ol(this,r,t)),this};Te.prototype.removeListener=function(r,t){var n,s,c,l,p;if(vs(t),s=this._events,s===void 0)return this;if(n=s[r],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete s[r],s.removeListener&&this.emit("removeListener",r,n.listener||t));else if(typeof n!="function"){for(c=-1,l=n.length-1;l>=0;l--)if(n[l]===t||n[l].listener===t){p=n[l].listener,c=l;break}if(c<0)return this;c===0?n.shift():S_(n,c),n.length===1&&(s[r]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",r,p||t)}return this};Te.prototype.off=Te.prototype.removeListener;Te.prototype.removeAllListeners=function(r){var t,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[r]),this;if(arguments.length===0){var c=Object.keys(n),l;for(s=0;s<c.length;++s)l=c[s],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[r],typeof t=="function")this.removeListener(r,t);else if(t!==void 0)for(s=t.length-1;s>=0;s--)this.removeListener(r,t[s]);return this};function Al(a,r,t){var n=a._events;if(n===void 0)return[];var s=n[r];return s===void 0?[]:typeof s=="function"?t?[s.listener||s]:[s]:t?P_(s):Cl(s,s.length)}Te.prototype.listeners=function(r){return Al(this,r,!0)};Te.prototype.rawListeners=function(r){return Al(this,r,!1)};Te.listenerCount=function(a,r){return typeof a.listenerCount=="function"?a.listenerCount(r):Rl.call(a,r)};Te.prototype.listenerCount=Rl;function Rl(a){var r=this._events;if(r!==void 0){var t=r[a];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Te.prototype.eventNames=function(){return this._eventsCount>0?fs(this._events):[]};function Cl(a,r){for(var t=new Array(r),n=0;n<r;++n)t[n]=a[n];return t}function S_(a,r){for(;r+1<a.length;r++)a[r]=a[r+1];a.pop()}function P_(a){for(var r=new Array(a.length),t=0;t<r.length;++t)r[t]=a[t].listener||a[t];return r}function O_(a,r){return new Promise(function(t,n){function s(l){a.removeListener(r,c),n(l)}function c(){typeof a.removeListener=="function"&&a.removeListener("error",s),t([].slice.call(arguments))}Tl(a,r,c,{once:!0}),r!=="error"&&A_(a,s,{once:!0})})}function A_(a,r,t){typeof a.on=="function"&&Tl(a,"error",r,t)}function Tl(a,r,t,n){if(typeof a.on=="function")n.once?a.once(r,t):a.on(r,t);else if(typeof a.addEventListener=="function")a.addEventListener(r,function s(c){n.once&&a.removeEventListener(r,s),t(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}var Qt=ba.exports;const wa=gl(Qt);var ms={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ea=function(a,r){return ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},ea(a,r)};function R_(a,r){ea(a,r);function t(){this.constructor=a}a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var ta=function(){return ta=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},ta.apply(this,arguments)};function C_(a,r){var t={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&r.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(a);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(a,n[s])&&(t[n[s]]=a[n[s]]);return t}function T_(a,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(a,r,t,n);else for(var p=a.length-1;p>=0;p--)(l=a[p])&&(c=(s<3?l(c):s>3?l(r,t,c):l(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function N_(a,r){return function(t,n){r(t,n,a)}}function $_(a,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,r)}function D_(a,r,t,n){function s(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function p(S){try{y(n.next(S))}catch(U){l(U)}}function m(S){try{y(n.throw(S))}catch(U){l(U)}}function y(S){S.done?c(S.value):s(S.value).then(p,m)}y((n=n.apply(a,r||[])).next())})}function F_(a,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,l;return l={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function p(y){return function(S){return m([y,S])}}function m(y){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,s=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){t.label=y[1];break}if(y[0]===6&&t.label<c[1]){t.label=c[1],c=y;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(y);break}c[2]&&t.ops.pop(),t.trys.pop();continue}y=r.call(a,t)}catch(S){y=[6,S],s=0}finally{n=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function L_(a,r,t,n){n===void 0&&(n=t),a[n]=r[t]}function j_(a,r){for(var t in a)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=a[t])}function ra(a){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&a[r],n=0;if(t)return t.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&n>=a.length&&(a=void 0),{value:a&&a[n++],done:!a}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nl(a,r){var t=typeof Symbol=="function"&&a[Symbol.iterator];if(!t)return a;var n=t.call(a),s,c=[],l;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(p){l={error:p}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(l)throw l.error}}return c}function M_(){for(var a=[],r=0;r<arguments.length;r++)a=a.concat(Nl(arguments[r]));return a}function q_(){for(var a=0,r=0,t=arguments.length;r<t;r++)a+=arguments[r].length;for(var n=Array(a),s=0,r=0;r<t;r++)for(var c=arguments[r],l=0,p=c.length;l<p;l++,s++)n[s]=c[l];return n}function hn(a){return this instanceof hn?(this.v=a,this):new hn(a)}function U_(a,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(a,r||[]),s,c=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(A){n[A]&&(s[A]=function(j){return new Promise(function($,H){c.push([A,j,$,H])>1||p(A,j)})})}function p(A,j){try{m(n[A](j))}catch($){U(c[0][3],$)}}function m(A){A.value instanceof hn?Promise.resolve(A.value.v).then(y,S):U(c[0][2],A)}function y(A){p("next",A)}function S(A){p("throw",A)}function U(A,j){A(j),c.shift(),c.length&&p(c[0][0],c[0][1])}}function z_(a){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=a[s]?function(l){return(t=!t)?{value:hn(a[s](l)),done:s==="return"}:c?c(l):l}:c}}function k_(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=a[Symbol.asyncIterator],t;return r?r.call(a):(a=typeof ra=="function"?ra(a):a[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=a[c]&&function(l){return new Promise(function(p,m){l=a[c](l),s(p,m,l.done,l.value)})}}function s(c,l,p,m){Promise.resolve(m).then(function(y){c({value:y,done:p})},l)}}function H_(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a}function B_(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var t in a)Object.hasOwnProperty.call(a,t)&&(r[t]=a[t]);return r.default=a,r}function V_(a){return a&&a.__esModule?a:{default:a}}function K_(a,r){if(!r.has(a))throw new TypeError("attempted to get private field on non-instance");return r.get(a)}function G_(a,r,t){if(!r.has(a))throw new TypeError("attempted to set private field on non-instance");return r.set(a,t),t}const W_=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ta},__asyncDelegator:z_,__asyncGenerator:U_,__asyncValues:k_,__await:hn,__awaiter:D_,__classPrivateFieldGet:K_,__classPrivateFieldSet:G_,__createBinding:L_,__decorate:T_,__exportStar:j_,__extends:R_,__generator:F_,__importDefault:V_,__importStar:B_,__makeTemplateObject:H_,__metadata:$_,__param:N_,__read:Nl,__rest:C_,__spread:M_,__spreadArrays:q_,__values:ra},Symbol.toStringTag,{value:"Module"})),$l=gn(W_);var yn={};Object.defineProperty(yn,"__esModule",{value:!0});function J_(a){if(typeof a!="string")throw new Error(`Cannot safe json parse value of type ${typeof a}`);try{return JSON.parse(a)}catch{return a}}yn.safeJsonParse=J_;function Y_(a){return typeof a=="string"?a:JSON.stringify(a,(r,t)=>typeof t>"u"?null:t)}yn.safeJsonStringify=Y_;var Yi={exports:{}},lh;function Q_(){return lh||(lh=1,function(){let a;function r(){}a=r,a.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},a.prototype.setItem=function(t,n){this[t]=String(n)},a.prototype.removeItem=function(t){delete this[t]},a.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},a.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},a.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Er<"u"&&Er.localStorage?Yi.exports=Er.localStorage:typeof window<"u"&&window.localStorage?Yi.exports=window.localStorage:Yi.exports=new r}()),Yi.exports}var Mo={},Qi={},fh;function X_(){if(fh)return Qi;fh=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.IKeyValueStorage=void 0;class a{}return Qi.IKeyValueStorage=a,Qi}var Xi={},ph;function Z_(){if(ph)return Xi;ph=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.parseEntry=void 0;const a=yn;function r(t){var n;return[t[0],a.safeJsonParse((n=t[1])!==null&&n!==void 0?n:"")]}return Xi.parseEntry=r,Xi}var dh;function e1(){return dh||(dh=1,function(a){Object.defineProperty(a,"__esModule",{value:!0});const r=$l;r.__exportStar(X_(),a),r.__exportStar(Z_(),a)}(Mo)),Mo}Object.defineProperty(ms,"__esModule",{value:!0});ms.KeyValueStorage=void 0;const Ri=$l,gh=yn,t1=Ri.__importDefault(Q_()),r1=e1();class Dl{constructor(){this.localStorage=t1.default}getKeys(){return Ri.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Ri.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(r1.parseEntry)})}getItem(r){return Ri.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(r);if(t!==null)return gh.safeJsonParse(t)})}setItem(r,t){return Ri.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(r,gh.safeJsonStringify(t))})}removeItem(r){return Ri.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(r)})}}ms.KeyValueStorage=Dl;var i1=ms.default=Dl,$i={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ia=function(a,r){return ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},ia(a,r)};function n1(a,r){ia(a,r);function t(){this.constructor=a}a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var na=function(){return na=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},na.apply(this,arguments)};function s1(a,r){var t={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&r.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(a);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(a,n[s])&&(t[n[s]]=a[n[s]]);return t}function o1(a,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(a,r,t,n);else for(var p=a.length-1;p>=0;p--)(l=a[p])&&(c=(s<3?l(c):s>3?l(r,t,c):l(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function a1(a,r){return function(t,n){r(t,n,a)}}function c1(a,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,r)}function u1(a,r,t,n){function s(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function p(S){try{y(n.next(S))}catch(U){l(U)}}function m(S){try{y(n.throw(S))}catch(U){l(U)}}function y(S){S.done?c(S.value):s(S.value).then(p,m)}y((n=n.apply(a,r||[])).next())})}function h1(a,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,l;return l={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function p(y){return function(S){return m([y,S])}}function m(y){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,s=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){t.label=y[1];break}if(y[0]===6&&t.label<c[1]){t.label=c[1],c=y;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(y);break}c[2]&&t.ops.pop(),t.trys.pop();continue}y=r.call(a,t)}catch(S){y=[6,S],s=0}finally{n=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function l1(a,r,t,n){n===void 0&&(n=t),a[n]=r[t]}function f1(a,r){for(var t in a)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=a[t])}function sa(a){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&a[r],n=0;if(t)return t.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&n>=a.length&&(a=void 0),{value:a&&a[n++],done:!a}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fl(a,r){var t=typeof Symbol=="function"&&a[Symbol.iterator];if(!t)return a;var n=t.call(a),s,c=[],l;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(p){l={error:p}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(l)throw l.error}}return c}function p1(){for(var a=[],r=0;r<arguments.length;r++)a=a.concat(Fl(arguments[r]));return a}function d1(){for(var a=0,r=0,t=arguments.length;r<t;r++)a+=arguments[r].length;for(var n=Array(a),s=0,r=0;r<t;r++)for(var c=arguments[r],l=0,p=c.length;l<p;l++,s++)n[s]=c[l];return n}function ln(a){return this instanceof ln?(this.v=a,this):new ln(a)}function g1(a,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(a,r||[]),s,c=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(A){n[A]&&(s[A]=function(j){return new Promise(function($,H){c.push([A,j,$,H])>1||p(A,j)})})}function p(A,j){try{m(n[A](j))}catch($){U(c[0][3],$)}}function m(A){A.value instanceof ln?Promise.resolve(A.value.v).then(y,S):U(c[0][2],A)}function y(A){p("next",A)}function S(A){p("throw",A)}function U(A,j){A(j),c.shift(),c.length&&p(c[0][0],c[0][1])}}function y1(a){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=a[s]?function(l){return(t=!t)?{value:ln(a[s](l)),done:s==="return"}:c?c(l):l}:c}}function v1(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=a[Symbol.asyncIterator],t;return r?r.call(a):(a=typeof sa=="function"?sa(a):a[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=a[c]&&function(l){return new Promise(function(p,m){l=a[c](l),s(p,m,l.done,l.value)})}}function s(c,l,p,m){Promise.resolve(m).then(function(y){c({value:y,done:p})},l)}}function m1(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a}function _1(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var t in a)Object.hasOwnProperty.call(a,t)&&(r[t]=a[t]);return r.default=a,r}function b1(a){return a&&a.__esModule?a:{default:a}}function w1(a,r){if(!r.has(a))throw new TypeError("attempted to get private field on non-instance");return r.get(a)}function E1(a,r,t){if(!r.has(a))throw new TypeError("attempted to set private field on non-instance");return r.set(a,t),t}const x1=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return na},__asyncDelegator:y1,__asyncGenerator:g1,__asyncValues:v1,__await:ln,__awaiter:u1,__classPrivateFieldGet:w1,__classPrivateFieldSet:E1,__createBinding:l1,__decorate:o1,__exportStar:f1,__extends:n1,__generator:h1,__importDefault:b1,__importStar:_1,__makeTemplateObject:m1,__metadata:c1,__param:a1,__read:Fl,__rest:s1,__spread:p1,__spreadArrays:d1,__values:sa},Symbol.toStringTag,{value:"Module"})),_s=gn(x1);var Zi={},qo={},en={};let ui=class{};const I1=Object.freeze(Object.defineProperty({__proto__:null,IEvents:ui},Symbol.toStringTag,{value:"Module"})),S1=gn(I1);var yh;function P1(){if(yh)return en;yh=1,Object.defineProperty(en,"__esModule",{value:!0}),en.IHeartBeat=void 0;const a=S1;class r extends a.IEvents{constructor(n){super()}}return en.IHeartBeat=r,en}var vh;function Ll(){return vh||(vh=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),_s.__exportStar(P1(),a)}(qo)),qo}var Uo={},ai={},mh;function O1(){if(mh)return ai;mh=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.HEARTBEAT_EVENTS=ai.HEARTBEAT_INTERVAL=void 0;const a=X;return ai.HEARTBEAT_INTERVAL=a.FIVE_SECONDS,ai.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},ai}var _h;function jl(){return _h||(_h=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),_s.__exportStar(O1(),a)}(Uo)),Uo}var bh;function A1(){if(bh)return Zi;bh=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.HeartBeat=void 0;const a=_s,r=Qt,t=X,n=Ll(),s=jl();class c extends n.IHeartBeat{constructor(p){super(p),this.events=new r.EventEmitter,this.interval=s.HEARTBEAT_INTERVAL,this.interval=(p==null?void 0:p.interval)||s.HEARTBEAT_INTERVAL}static init(p){return a.__awaiter(this,void 0,void 0,function*(){const m=new c(p);return yield m.init(),m})}init(){return a.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(p,m){this.events.on(p,m)}once(p,m){this.events.once(p,m)}off(p,m){this.events.off(p,m)}removeListener(p,m){this.events.removeListener(p,m)}initialize(){return a.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(s.HEARTBEAT_EVENTS.pulse)}}return Zi.HeartBeat=c,Zi}(function(a){Object.defineProperty(a,"__esModule",{value:!0});const r=_s;r.__exportStar(A1(),a),r.__exportStar(Ll(),a),r.__exportStar(jl(),a)})($i);var Ee={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oa=function(a,r){return oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},oa(a,r)};function R1(a,r){oa(a,r);function t(){this.constructor=a}a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var aa=function(){return aa=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},aa.apply(this,arguments)};function C1(a,r){var t={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&r.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(a);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(a,n[s])&&(t[n[s]]=a[n[s]]);return t}function T1(a,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(a,r,t,n);else for(var p=a.length-1;p>=0;p--)(l=a[p])&&(c=(s<3?l(c):s>3?l(r,t,c):l(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function N1(a,r){return function(t,n){r(t,n,a)}}function $1(a,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,r)}function D1(a,r,t,n){function s(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function p(S){try{y(n.next(S))}catch(U){l(U)}}function m(S){try{y(n.throw(S))}catch(U){l(U)}}function y(S){S.done?c(S.value):s(S.value).then(p,m)}y((n=n.apply(a,r||[])).next())})}function F1(a,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,l;return l={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function p(y){return function(S){return m([y,S])}}function m(y){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,s=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){t.label=y[1];break}if(y[0]===6&&t.label<c[1]){t.label=c[1],c=y;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(y);break}c[2]&&t.ops.pop(),t.trys.pop();continue}y=r.call(a,t)}catch(S){y=[6,S],s=0}finally{n=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function L1(a,r,t,n){n===void 0&&(n=t),a[n]=r[t]}function j1(a,r){for(var t in a)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=a[t])}function ca(a){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&a[r],n=0;if(t)return t.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&n>=a.length&&(a=void 0),{value:a&&a[n++],done:!a}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ml(a,r){var t=typeof Symbol=="function"&&a[Symbol.iterator];if(!t)return a;var n=t.call(a),s,c=[],l;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(p){l={error:p}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(l)throw l.error}}return c}function M1(){for(var a=[],r=0;r<arguments.length;r++)a=a.concat(Ml(arguments[r]));return a}function q1(){for(var a=0,r=0,t=arguments.length;r<t;r++)a+=arguments[r].length;for(var n=Array(a),s=0,r=0;r<t;r++)for(var c=arguments[r],l=0,p=c.length;l<p;l++,s++)n[s]=c[l];return n}function fn(a){return this instanceof fn?(this.v=a,this):new fn(a)}function U1(a,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(a,r||[]),s,c=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(A){n[A]&&(s[A]=function(j){return new Promise(function($,H){c.push([A,j,$,H])>1||p(A,j)})})}function p(A,j){try{m(n[A](j))}catch($){U(c[0][3],$)}}function m(A){A.value instanceof fn?Promise.resolve(A.value.v).then(y,S):U(c[0][2],A)}function y(A){p("next",A)}function S(A){p("throw",A)}function U(A,j){A(j),c.shift(),c.length&&p(c[0][0],c[0][1])}}function z1(a){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=a[s]?function(l){return(t=!t)?{value:fn(a[s](l)),done:s==="return"}:c?c(l):l}:c}}function k1(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=a[Symbol.asyncIterator],t;return r?r.call(a):(a=typeof ca=="function"?ca(a):a[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=a[c]&&function(l){return new Promise(function(p,m){l=a[c](l),s(p,m,l.done,l.value)})}}function s(c,l,p,m){Promise.resolve(m).then(function(y){c({value:y,done:p})},l)}}function H1(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a}function B1(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var t in a)Object.hasOwnProperty.call(a,t)&&(r[t]=a[t]);return r.default=a,r}function V1(a){return a&&a.__esModule?a:{default:a}}function K1(a,r){if(!r.has(a))throw new TypeError("attempted to get private field on non-instance");return r.get(a)}function G1(a,r,t){if(!r.has(a))throw new TypeError("attempted to set private field on non-instance");return r.set(a,t),t}const W1=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return aa},__asyncDelegator:z1,__asyncGenerator:U1,__asyncValues:k1,__await:fn,__awaiter:D1,__classPrivateFieldGet:K1,__classPrivateFieldSet:G1,__createBinding:L1,__decorate:T1,__exportStar:j1,__extends:R1,__generator:F1,__importDefault:V1,__importStar:B1,__makeTemplateObject:H1,__metadata:$1,__param:N1,__read:Ml,__rest:C1,__spread:M1,__spreadArrays:q1,__values:ca},Symbol.toStringTag,{value:"Module"})),J1=gn(W1);var zo,wh;function Y1(){if(wh)return zo;wh=1;function a(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}zo=r;function r(t,n,s){var c=s&&s.stringify||a,l=1;if(typeof t=="object"&&t!==null){var p=n.length+l;if(p===1)return t;var m=new Array(p);m[0]=c(t);for(var y=1;y<p;y++)m[y]=c(n[y]);return m.join(" ")}if(typeof t!="string")return t;var S=n.length;if(S===0)return t;for(var U="",A=1-l,j=-1,$=t&&t.length||0,H=0;H<$;){if(t.charCodeAt(H)===37&&H+1<$){switch(j=j>-1?j:0,t.charCodeAt(H+1)){case 100:case 102:if(A>=S||n[A]==null)break;j<H&&(U+=t.slice(j,H)),U+=Number(n[A]),j=H+2,H++;break;case 105:if(A>=S||n[A]==null)break;j<H&&(U+=t.slice(j,H)),U+=Math.floor(Number(n[A])),j=H+2,H++;break;case 79:case 111:case 106:if(A>=S||n[A]===void 0)break;j<H&&(U+=t.slice(j,H));var ie=typeof n[A];if(ie==="string"){U+="'"+n[A]+"'",j=H+2,H++;break}if(ie==="function"){U+=n[A].name||"<anonymous>",j=H+2,H++;break}U+=c(n[A]),j=H+2,H++;break;case 115:if(A>=S)break;j<H&&(U+=t.slice(j,H)),U+=String(n[A]),j=H+2,H++;break;case 37:j<H&&(U+=t.slice(j,H)),U+="%",j=H+2,H++,A--;break}++A}++H}return j===-1?t:(j<$&&(U+=t.slice(j)),U)}return zo}var ko,Eh;function Q1(){if(Eh)return ko;Eh=1;const a=Y1();ko=s;const r=ce().console||{},t={mapHttpRequest:$,mapHttpResponse:$,wrapRequestSerializer:H,wrapResponseSerializer:H,wrapErrorSerializer:H,req:$,res:$,err:A};function n(T,q){return Array.isArray(T)?T.filter(function(fe){return fe!=="!stdSerializers.err"}):T===!0?Object.keys(q):!1}function s(T){T=T||{},T.browser=T.browser||{};const q=T.browser.transmit;if(q&&typeof q.send!="function")throw Error("pino: transmit option must have a send function");const V=T.browser.write||r;T.browser.write&&(T.browser.asObject=!0);const fe=T.serializers||{},Z=n(T.browser.serialize,fe);let se=T.browser.serialize;Array.isArray(T.browser.serialize)&&T.browser.serialize.indexOf("!stdSerializers.err")>-1&&(se=!1);const Oe=["error","fatal","warn","info","debug","trace"];typeof V=="function"&&(V.error=V.fatal=V.warn=V.info=V.debug=V.trace=V),T.enabled===!1&&(T.level="silent");const De=T.level||"info",v=Object.create(V);v.log||(v.log=ie),Object.defineProperty(v,"levelVal",{get:J}),Object.defineProperty(v,"level",{get:ne,set:k});const E={transmit:q,serialize:Z,asObject:T.browser.asObject,levels:Oe,timestamp:j(T)};v.levels=s.levels,v.level=De,v.setMaxListeners=v.getMaxListeners=v.emit=v.addListener=v.on=v.prependListener=v.once=v.prependOnceListener=v.removeListener=v.removeAllListeners=v.listeners=v.listenerCount=v.eventNames=v.write=v.flush=ie,v.serializers=fe,v._serialize=Z,v._stdErrSerialize=se,v.child=M,q&&(v._logEvent=U());function J(){return this.level==="silent"?1/0:this.levels.values[this.level]}function ne(){return this._level}function k(z){if(z!=="silent"&&!this.levels.values[z])throw Error("unknown level "+z);this._level=z,c(E,v,"error","log"),c(E,v,"fatal","error"),c(E,v,"warn","error"),c(E,v,"info","log"),c(E,v,"debug","log"),c(E,v,"trace","log")}function M(z,B){if(!z)throw new Error("missing bindings for child Pino");B=B||{},Z&&z.serializers&&(B.serializers=z.serializers);const qe=B.serializers;if(Z&&qe){var je=Object.assign({},fe,qe),Fr=T.browser.serialize===!0?Object.keys(je):Z;delete z.serializers,m([z],Fr,je,this._stdErrSerialize)}function Ht(xt){this._childLevel=(xt._childLevel|0)+1,this.error=y(xt,z,"error"),this.fatal=y(xt,z,"fatal"),this.warn=y(xt,z,"warn"),this.info=y(xt,z,"info"),this.debug=y(xt,z,"debug"),this.trace=y(xt,z,"trace"),je&&(this.serializers=je,this._serialize=Fr),q&&(this._logEvent=U([].concat(xt._logEvent.bindings,z)))}return Ht.prototype=this,new Ht(this)}return v}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=t,s.stdTimeFunctions=Object.assign({},{nullTime:ye,epochTime:_e,unixTime:le,isoTime:oe});function c(T,q,V,fe){const Z=Object.getPrototypeOf(q);q[V]=q.levelVal>q.levels.values[V]?ie:Z[V]?Z[V]:r[V]||r[fe]||ie,l(T,q,V)}function l(T,q,V){!T.transmit&&q[V]===ie||(q[V]=function(fe){return function(){const se=T.timestamp(),Oe=new Array(arguments.length),De=Object.getPrototypeOf&&Object.getPrototypeOf(this)===r?r:this;for(var v=0;v<Oe.length;v++)Oe[v]=arguments[v];if(T.serialize&&!T.asObject&&m(Oe,this._serialize,this.serializers,this._stdErrSerialize),T.asObject?fe.call(De,p(this,V,Oe,se)):fe.apply(De,Oe),T.transmit){const E=T.transmit.level||q.level,J=s.levels.values[E],ne=s.levels.values[V];if(ne<J)return;S(this,{ts:se,methodLevel:V,methodValue:ne,transmitLevel:E,transmitValue:s.levels.values[T.transmit.level||q.level],send:T.transmit.send,val:q.levelVal},Oe)}}}(q[V]))}function p(T,q,V,fe){T._serialize&&m(V,T._serialize,T.serializers,T._stdErrSerialize);const Z=V.slice();let se=Z[0];const Oe={};fe&&(Oe.time=fe),Oe.level=s.levels.values[q];let De=(T._childLevel|0)+1;if(De<1&&(De=1),se!==null&&typeof se=="object"){for(;De--&&typeof Z[0]=="object";)Object.assign(Oe,Z.shift());se=Z.length?a(Z.shift(),Z):void 0}else typeof se=="string"&&(se=a(Z.shift(),Z));return se!==void 0&&(Oe.msg=se),Oe}function m(T,q,V,fe){for(const Z in T)if(fe&&T[Z]instanceof Error)T[Z]=s.stdSerializers.err(T[Z]);else if(typeof T[Z]=="object"&&!Array.isArray(T[Z]))for(const se in T[Z])q&&q.indexOf(se)>-1&&se in V&&(T[Z][se]=V[se](T[Z][se]))}function y(T,q,V){return function(){const fe=new Array(1+arguments.length);fe[0]=q;for(var Z=1;Z<fe.length;Z++)fe[Z]=arguments[Z-1];return T[V].apply(this,fe)}}function S(T,q,V){const fe=q.send,Z=q.ts,se=q.methodLevel,Oe=q.methodValue,De=q.val,v=T._logEvent.bindings;m(V,T._serialize||Object.keys(T.serializers),T.serializers,T._stdErrSerialize===void 0?!0:T._stdErrSerialize),T._logEvent.ts=Z,T._logEvent.messages=V.filter(function(E){return v.indexOf(E)===-1}),T._logEvent.level.label=se,T._logEvent.level.value=Oe,fe(se,T._logEvent,De),T._logEvent=U(v)}function U(T){return{ts:0,messages:[],bindings:T||[],level:{label:"",value:0}}}function A(T){const q={type:T.constructor.name,msg:T.message,stack:T.stack};for(const V in T)q[V]===void 0&&(q[V]=T[V]);return q}function j(T){return typeof T.timestamp=="function"?T.timestamp:T.timestamp===!1?ye:_e}function $(){return{}}function H(T){return T}function ie(){}function ye(){return!1}function _e(){return Date.now()}function le(){return Math.round(Date.now()/1e3)}function oe(){return new Date(Date.now()).toISOString()}function ce(){function T(q){return typeof q<"u"&&q}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return T(self)||T(window)||T(this)||{}}}return ko}var ci={},xh;function ql(){return xh||(xh=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.PINO_CUSTOM_CONTEXT_KEY=ci.PINO_LOGGER_DEFAULTS=void 0,ci.PINO_LOGGER_DEFAULTS={level:"info"},ci.PINO_CUSTOM_CONTEXT_KEY="custom_context"),ci}var Ft={},Ih;function X1(){if(Ih)return Ft;Ih=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.generateChildLogger=Ft.formatChildLoggerContext=Ft.getLoggerContext=Ft.setBrowserLoggerContext=Ft.getBrowserLoggerContext=Ft.getDefaultLoggerOptions=void 0;const a=ql();function r(p){return Object.assign(Object.assign({},p),{level:(p==null?void 0:p.level)||a.PINO_LOGGER_DEFAULTS.level})}Ft.getDefaultLoggerOptions=r;function t(p,m=a.PINO_CUSTOM_CONTEXT_KEY){return p[m]||""}Ft.getBrowserLoggerContext=t;function n(p,m,y=a.PINO_CUSTOM_CONTEXT_KEY){return p[y]=m,p}Ft.setBrowserLoggerContext=n;function s(p,m=a.PINO_CUSTOM_CONTEXT_KEY){let y="";return typeof p.bindings>"u"?y=t(p,m):y=p.bindings().context||"",y}Ft.getLoggerContext=s;function c(p,m,y=a.PINO_CUSTOM_CONTEXT_KEY){const S=s(p,y);return S.trim()?`${S}/${m}`:m}Ft.formatChildLoggerContext=c;function l(p,m,y=a.PINO_CUSTOM_CONTEXT_KEY){const S=c(p,m,y),U=p.child({context:S});return n(U,S,y)}return Ft.generateChildLogger=l,Ft}(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.pino=void 0;const r=J1,t=r.__importDefault(Q1());Object.defineProperty(a,"pino",{enumerable:!0,get:function(){return t.default}}),r.__exportStar(ql(),a),r.__exportStar(X1(),a)})(Ee);class Z1 extends ui{constructor(r){super(),this.opts=r,this.protocol="wc",this.version=2}}class eb extends ui{constructor(r,t){super(),this.core=r,this.logger=t,this.records=new Map}}class tb{constructor(r,t){this.logger=r,this.core=t}}let rb=class extends ui{constructor(r,t){super(),this.relayer=r,this.logger=t}},ib=class extends ui{constructor(r){super()}},nb=class{constructor(r,t,n,s){this.core=r,this.logger=t,this.name=n}};class sb extends ui{constructor(r,t){super(),this.relayer=r,this.logger=t}}let ob=class extends ui{constructor(r,t){super(),this.core=r,this.logger=t}},ab=class{constructor(r,t){this.projectId=r,this.logger=t}};class cb{constructor(r){this.opts=r,this.protocol="wc",this.version=2}}let ub=class{constructor(r){this.client=r}};const hb=a=>JSON.stringify(a,(r,t)=>typeof t=="bigint"?t.toString()+"n":t),lb=a=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=a.replace(r,'$1"$2n"$3');return JSON.parse(t,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Ea(a){if(typeof a!="string")throw new Error(`Cannot safe json parse value of type ${typeof a}`);try{return lb(a)}catch{return a}}function pn(a){return typeof a=="string"?a:hb(a)||""}var xa={},Ul={};(function(a){Object.defineProperty(a,"__esModule",{value:!0});var r=jm,t=yl;a.DIGEST_LENGTH=64,a.BLOCK_SIZE=128;var n=function(){function p(){this.digestLength=a.DIGEST_LENGTH,this.blockSize=a.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return p.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},p.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},p.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},p.prototype.update=function(m,y){if(y===void 0&&(y=m.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var S=0;if(this._bytesHashed+=y,this._bufferLength>0){for(;this._bufferLength<a.BLOCK_SIZE&&y>0;)this._buffer[this._bufferLength++]=m[S++],y--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(y>=this.blockSize&&(S=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,m,S,y),y%=this.blockSize);y>0;)this._buffer[this._bufferLength++]=m[S++],y--;return this},p.prototype.finish=function(m){if(!this._finished){var y=this._bytesHashed,S=this._bufferLength,U=y/536870912|0,A=y<<3,j=y%128<112?128:256;this._buffer[S]=128;for(var $=S+1;$<j-8;$++)this._buffer[$]=0;r.writeUint32BE(U,this._buffer,j-8),r.writeUint32BE(A,this._buffer,j-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,j),this._finished=!0}for(var $=0;$<this.digestLength/8;$++)r.writeUint32BE(this._stateHi[$],m,$*8),r.writeUint32BE(this._stateLo[$],m,$*8+4);return this},p.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},p.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},p.prototype.restoreState=function(m){return this._stateHi.set(m.stateHi),this._stateLo.set(m.stateLo),this._bufferLength=m.bufferLength,m.buffer&&this._buffer.set(m.buffer),this._bytesHashed=m.bytesHashed,this._finished=!1,this},p.prototype.cleanSavedState=function(m){t.wipe(m.stateHi),t.wipe(m.stateLo),m.buffer&&t.wipe(m.buffer),m.bufferLength=0,m.bytesHashed=0},p}();a.SHA512=n;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(p,m,y,S,U,A,j){for(var $=y[0],H=y[1],ie=y[2],ye=y[3],_e=y[4],le=y[5],oe=y[6],ce=y[7],T=S[0],q=S[1],V=S[2],fe=S[3],Z=S[4],se=S[5],Oe=S[6],De=S[7],v,E,J,ne,k,M,z,B;j>=128;){for(var qe=0;qe<16;qe++){var je=8*qe+A;p[qe]=r.readUint32BE(U,je),m[qe]=r.readUint32BE(U,je+4)}for(var qe=0;qe<80;qe++){var Fr=$,Ht=H,xt=ie,R=ye,C=_e,P=le,h=oe,w=ce,Q=T,ue=q,ve=V,Se=fe,Ae=Z,xe=se,at=Oe,rt=De;if(v=ce,E=De,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=(_e>>>14|Z<<32-14)^(_e>>>18|Z<<32-18)^(Z>>>41-32|_e<<32-(41-32)),E=(Z>>>14|_e<<32-14)^(Z>>>18|_e<<32-18)^(_e>>>41-32|Z<<32-(41-32)),k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,v=_e&le^~_e&oe,E=Z&se^~Z&Oe,k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,v=s[qe*2],E=s[qe*2+1],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,v=p[qe%16],E=m[qe%16],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,J=z&65535|B<<16,ne=k&65535|M<<16,v=J,E=ne,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=($>>>28|T<<32-28)^(T>>>34-32|$<<32-(34-32))^(T>>>39-32|$<<32-(39-32)),E=(T>>>28|$<<32-28)^($>>>34-32|T<<32-(34-32))^($>>>39-32|T<<32-(39-32)),k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,v=$&H^$&ie^H&ie,E=T&q^T&V^q&V,k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,w=z&65535|B<<16,rt=k&65535|M<<16,v=R,E=Se,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=J,E=ne,k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,R=z&65535|B<<16,Se=k&65535|M<<16,H=Fr,ie=Ht,ye=xt,_e=R,le=C,oe=P,ce=h,$=w,q=Q,V=ue,fe=ve,Z=Se,se=Ae,Oe=xe,De=at,T=rt,qe%16===15)for(var je=0;je<16;je++)v=p[je],E=m[je],k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=p[(je+9)%16],E=m[(je+9)%16],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,J=p[(je+1)%16],ne=m[(je+1)%16],v=(J>>>1|ne<<32-1)^(J>>>8|ne<<32-8)^J>>>7,E=(ne>>>1|J<<32-1)^(ne>>>8|J<<32-8)^(ne>>>7|J<<32-7),k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,J=p[(je+14)%16],ne=m[(je+14)%16],v=(J>>>19|ne<<32-19)^(ne>>>61-32|J<<32-(61-32))^J>>>6,E=(ne>>>19|J<<32-19)^(J>>>61-32|ne<<32-(61-32))^(ne>>>6|J<<32-6),k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,p[je]=z&65535|B<<16,m[je]=k&65535|M<<16}v=$,E=T,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=y[0],E=S[0],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,y[0]=$=z&65535|B<<16,S[0]=T=k&65535|M<<16,v=H,E=q,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=y[1],E=S[1],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,y[1]=H=z&65535|B<<16,S[1]=q=k&65535|M<<16,v=ie,E=V,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=y[2],E=S[2],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,y[2]=ie=z&65535|B<<16,S[2]=V=k&65535|M<<16,v=ye,E=fe,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=y[3],E=S[3],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,y[3]=ye=z&65535|B<<16,S[3]=fe=k&65535|M<<16,v=_e,E=Z,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=y[4],E=S[4],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,y[4]=_e=z&65535|B<<16,S[4]=Z=k&65535|M<<16,v=le,E=se,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=y[5],E=S[5],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,y[5]=le=z&65535|B<<16,S[5]=se=k&65535|M<<16,v=oe,E=Oe,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=y[6],E=S[6],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,y[6]=oe=z&65535|B<<16,S[6]=Oe=k&65535|M<<16,v=ce,E=De,k=E&65535,M=E>>>16,z=v&65535,B=v>>>16,v=y[7],E=S[7],k+=E&65535,M+=E>>>16,z+=v&65535,B+=v>>>16,M+=k>>>16,z+=M>>>16,B+=z>>>16,y[7]=ce=z&65535|B<<16,S[7]=De=k&65535|M<<16,A+=128,j-=128}return A}function l(p){var m=new n;m.update(p);var y=m.digest();return m.clean(),y}a.hash=l})(Ul);(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.convertSecretKeyToX25519=a.convertPublicKeyToX25519=a.verify=a.sign=a.extractPublicKeyFromSecretKey=a.generateKeyPair=a.generateKeyPairFromSeed=a.SEED_LENGTH=a.SECRET_KEY_LENGTH=a.PUBLIC_KEY_LENGTH=a.SIGNATURE_LENGTH=void 0;const r=vl,t=Ul,n=yl;a.SIGNATURE_LENGTH=64,a.PUBLIC_KEY_LENGTH=32,a.SECRET_KEY_LENGTH=64,a.SEED_LENGTH=32;function s(R){const C=new Float64Array(16);if(R)for(let P=0;P<R.length;P++)C[P]=R[P];return C}const c=new Uint8Array(32);c[0]=9;const l=s(),p=s([1]),m=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),y=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),S=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),U=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),A=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function j(R,C){for(let P=0;P<16;P++)R[P]=C[P]|0}function $(R){let C=1;for(let P=0;P<16;P++){let h=R[P]+C+65535;C=Math.floor(h/65536),R[P]=h-C*65536}R[0]+=C-1+37*(C-1)}function H(R,C,P){const h=~(P-1);for(let w=0;w<16;w++){const Q=h&(R[w]^C[w]);R[w]^=Q,C[w]^=Q}}function ie(R,C){const P=s(),h=s();for(let w=0;w<16;w++)h[w]=C[w];$(h),$(h),$(h);for(let w=0;w<2;w++){P[0]=h[0]-65517;for(let ue=1;ue<15;ue++)P[ue]=h[ue]-65535-(P[ue-1]>>16&1),P[ue-1]&=65535;P[15]=h[15]-32767-(P[14]>>16&1);const Q=P[15]>>16&1;P[14]&=65535,H(h,P,1-Q)}for(let w=0;w<16;w++)R[2*w]=h[w]&255,R[2*w+1]=h[w]>>8}function ye(R,C){let P=0;for(let h=0;h<32;h++)P|=R[h]^C[h];return(1&P-1>>>8)-1}function _e(R,C){const P=new Uint8Array(32),h=new Uint8Array(32);return ie(P,R),ie(h,C),ye(P,h)}function le(R){const C=new Uint8Array(32);return ie(C,R),C[0]&1}function oe(R,C){for(let P=0;P<16;P++)R[P]=C[2*P]+(C[2*P+1]<<8);R[15]&=32767}function ce(R,C,P){for(let h=0;h<16;h++)R[h]=C[h]+P[h]}function T(R,C,P){for(let h=0;h<16;h++)R[h]=C[h]-P[h]}function q(R,C,P){let h,w,Q=0,ue=0,ve=0,Se=0,Ae=0,xe=0,at=0,rt=0,We=0,Ce=0,ze=0,ke=0,Je=0,Fe=0,He=0,Ne=0,Be=0,it=0,ct=0,It=0,At=0,Tt=0,jt=0,Bt=0,Xt=0,hr=0,Lr=0,Qr=0,li=0,fi=0,Di=0,ut=P[0],ht=P[1],lt=P[2],ft=P[3],nt=P[4],pt=P[5],dt=P[6],gt=P[7],Ze=P[8],yt=P[9],et=P[10],vt=P[11],mt=P[12],_t=P[13],bt=P[14],wt=P[15];h=C[0],Q+=h*ut,ue+=h*ht,ve+=h*lt,Se+=h*ft,Ae+=h*nt,xe+=h*pt,at+=h*dt,rt+=h*gt,We+=h*Ze,Ce+=h*yt,ze+=h*et,ke+=h*vt,Je+=h*mt,Fe+=h*_t,He+=h*bt,Ne+=h*wt,h=C[1],ue+=h*ut,ve+=h*ht,Se+=h*lt,Ae+=h*ft,xe+=h*nt,at+=h*pt,rt+=h*dt,We+=h*gt,Ce+=h*Ze,ze+=h*yt,ke+=h*et,Je+=h*vt,Fe+=h*mt,He+=h*_t,Ne+=h*bt,Be+=h*wt,h=C[2],ve+=h*ut,Se+=h*ht,Ae+=h*lt,xe+=h*ft,at+=h*nt,rt+=h*pt,We+=h*dt,Ce+=h*gt,ze+=h*Ze,ke+=h*yt,Je+=h*et,Fe+=h*vt,He+=h*mt,Ne+=h*_t,Be+=h*bt,it+=h*wt,h=C[3],Se+=h*ut,Ae+=h*ht,xe+=h*lt,at+=h*ft,rt+=h*nt,We+=h*pt,Ce+=h*dt,ze+=h*gt,ke+=h*Ze,Je+=h*yt,Fe+=h*et,He+=h*vt,Ne+=h*mt,Be+=h*_t,it+=h*bt,ct+=h*wt,h=C[4],Ae+=h*ut,xe+=h*ht,at+=h*lt,rt+=h*ft,We+=h*nt,Ce+=h*pt,ze+=h*dt,ke+=h*gt,Je+=h*Ze,Fe+=h*yt,He+=h*et,Ne+=h*vt,Be+=h*mt,it+=h*_t,ct+=h*bt,It+=h*wt,h=C[5],xe+=h*ut,at+=h*ht,rt+=h*lt,We+=h*ft,Ce+=h*nt,ze+=h*pt,ke+=h*dt,Je+=h*gt,Fe+=h*Ze,He+=h*yt,Ne+=h*et,Be+=h*vt,it+=h*mt,ct+=h*_t,It+=h*bt,At+=h*wt,h=C[6],at+=h*ut,rt+=h*ht,We+=h*lt,Ce+=h*ft,ze+=h*nt,ke+=h*pt,Je+=h*dt,Fe+=h*gt,He+=h*Ze,Ne+=h*yt,Be+=h*et,it+=h*vt,ct+=h*mt,It+=h*_t,At+=h*bt,Tt+=h*wt,h=C[7],rt+=h*ut,We+=h*ht,Ce+=h*lt,ze+=h*ft,ke+=h*nt,Je+=h*pt,Fe+=h*dt,He+=h*gt,Ne+=h*Ze,Be+=h*yt,it+=h*et,ct+=h*vt,It+=h*mt,At+=h*_t,Tt+=h*bt,jt+=h*wt,h=C[8],We+=h*ut,Ce+=h*ht,ze+=h*lt,ke+=h*ft,Je+=h*nt,Fe+=h*pt,He+=h*dt,Ne+=h*gt,Be+=h*Ze,it+=h*yt,ct+=h*et,It+=h*vt,At+=h*mt,Tt+=h*_t,jt+=h*bt,Bt+=h*wt,h=C[9],Ce+=h*ut,ze+=h*ht,ke+=h*lt,Je+=h*ft,Fe+=h*nt,He+=h*pt,Ne+=h*dt,Be+=h*gt,it+=h*Ze,ct+=h*yt,It+=h*et,At+=h*vt,Tt+=h*mt,jt+=h*_t,Bt+=h*bt,Xt+=h*wt,h=C[10],ze+=h*ut,ke+=h*ht,Je+=h*lt,Fe+=h*ft,He+=h*nt,Ne+=h*pt,Be+=h*dt,it+=h*gt,ct+=h*Ze,It+=h*yt,At+=h*et,Tt+=h*vt,jt+=h*mt,Bt+=h*_t,Xt+=h*bt,hr+=h*wt,h=C[11],ke+=h*ut,Je+=h*ht,Fe+=h*lt,He+=h*ft,Ne+=h*nt,Be+=h*pt,it+=h*dt,ct+=h*gt,It+=h*Ze,At+=h*yt,Tt+=h*et,jt+=h*vt,Bt+=h*mt,Xt+=h*_t,hr+=h*bt,Lr+=h*wt,h=C[12],Je+=h*ut,Fe+=h*ht,He+=h*lt,Ne+=h*ft,Be+=h*nt,it+=h*pt,ct+=h*dt,It+=h*gt,At+=h*Ze,Tt+=h*yt,jt+=h*et,Bt+=h*vt,Xt+=h*mt,hr+=h*_t,Lr+=h*bt,Qr+=h*wt,h=C[13],Fe+=h*ut,He+=h*ht,Ne+=h*lt,Be+=h*ft,it+=h*nt,ct+=h*pt,It+=h*dt,At+=h*gt,Tt+=h*Ze,jt+=h*yt,Bt+=h*et,Xt+=h*vt,hr+=h*mt,Lr+=h*_t,Qr+=h*bt,li+=h*wt,h=C[14],He+=h*ut,Ne+=h*ht,Be+=h*lt,it+=h*ft,ct+=h*nt,It+=h*pt,At+=h*dt,Tt+=h*gt,jt+=h*Ze,Bt+=h*yt,Xt+=h*et,hr+=h*vt,Lr+=h*mt,Qr+=h*_t,li+=h*bt,fi+=h*wt,h=C[15],Ne+=h*ut,Be+=h*ht,it+=h*lt,ct+=h*ft,It+=h*nt,At+=h*pt,Tt+=h*dt,jt+=h*gt,Bt+=h*Ze,Xt+=h*yt,hr+=h*et,Lr+=h*vt,Qr+=h*mt,li+=h*_t,fi+=h*bt,Di+=h*wt,Q+=38*Be,ue+=38*it,ve+=38*ct,Se+=38*It,Ae+=38*At,xe+=38*Tt,at+=38*jt,rt+=38*Bt,We+=38*Xt,Ce+=38*hr,ze+=38*Lr,ke+=38*Qr,Je+=38*li,Fe+=38*fi,He+=38*Di,w=1,h=Q+w+65535,w=Math.floor(h/65536),Q=h-w*65536,h=ue+w+65535,w=Math.floor(h/65536),ue=h-w*65536,h=ve+w+65535,w=Math.floor(h/65536),ve=h-w*65536,h=Se+w+65535,w=Math.floor(h/65536),Se=h-w*65536,h=Ae+w+65535,w=Math.floor(h/65536),Ae=h-w*65536,h=xe+w+65535,w=Math.floor(h/65536),xe=h-w*65536,h=at+w+65535,w=Math.floor(h/65536),at=h-w*65536,h=rt+w+65535,w=Math.floor(h/65536),rt=h-w*65536,h=We+w+65535,w=Math.floor(h/65536),We=h-w*65536,h=Ce+w+65535,w=Math.floor(h/65536),Ce=h-w*65536,h=ze+w+65535,w=Math.floor(h/65536),ze=h-w*65536,h=ke+w+65535,w=Math.floor(h/65536),ke=h-w*65536,h=Je+w+65535,w=Math.floor(h/65536),Je=h-w*65536,h=Fe+w+65535,w=Math.floor(h/65536),Fe=h-w*65536,h=He+w+65535,w=Math.floor(h/65536),He=h-w*65536,h=Ne+w+65535,w=Math.floor(h/65536),Ne=h-w*65536,Q+=w-1+37*(w-1),w=1,h=Q+w+65535,w=Math.floor(h/65536),Q=h-w*65536,h=ue+w+65535,w=Math.floor(h/65536),ue=h-w*65536,h=ve+w+65535,w=Math.floor(h/65536),ve=h-w*65536,h=Se+w+65535,w=Math.floor(h/65536),Se=h-w*65536,h=Ae+w+65535,w=Math.floor(h/65536),Ae=h-w*65536,h=xe+w+65535,w=Math.floor(h/65536),xe=h-w*65536,h=at+w+65535,w=Math.floor(h/65536),at=h-w*65536,h=rt+w+65535,w=Math.floor(h/65536),rt=h-w*65536,h=We+w+65535,w=Math.floor(h/65536),We=h-w*65536,h=Ce+w+65535,w=Math.floor(h/65536),Ce=h-w*65536,h=ze+w+65535,w=Math.floor(h/65536),ze=h-w*65536,h=ke+w+65535,w=Math.floor(h/65536),ke=h-w*65536,h=Je+w+65535,w=Math.floor(h/65536),Je=h-w*65536,h=Fe+w+65535,w=Math.floor(h/65536),Fe=h-w*65536,h=He+w+65535,w=Math.floor(h/65536),He=h-w*65536,h=Ne+w+65535,w=Math.floor(h/65536),Ne=h-w*65536,Q+=w-1+37*(w-1),R[0]=Q,R[1]=ue,R[2]=ve,R[3]=Se,R[4]=Ae,R[5]=xe,R[6]=at,R[7]=rt,R[8]=We,R[9]=Ce,R[10]=ze,R[11]=ke,R[12]=Je,R[13]=Fe,R[14]=He,R[15]=Ne}function V(R,C){q(R,C,C)}function fe(R,C){const P=s();let h;for(h=0;h<16;h++)P[h]=C[h];for(h=253;h>=0;h--)V(P,P),h!==2&&h!==4&&q(P,P,C);for(h=0;h<16;h++)R[h]=P[h]}function Z(R,C){const P=s();let h;for(h=0;h<16;h++)P[h]=C[h];for(h=250;h>=0;h--)V(P,P),h!==1&&q(P,P,C);for(h=0;h<16;h++)R[h]=P[h]}function se(R,C){const P=s(),h=s(),w=s(),Q=s(),ue=s(),ve=s(),Se=s(),Ae=s(),xe=s();T(P,R[1],R[0]),T(xe,C[1],C[0]),q(P,P,xe),ce(h,R[0],R[1]),ce(xe,C[0],C[1]),q(h,h,xe),q(w,R[3],C[3]),q(w,w,y),q(Q,R[2],C[2]),ce(Q,Q,Q),T(ue,h,P),T(ve,Q,w),ce(Se,Q,w),ce(Ae,h,P),q(R[0],ue,ve),q(R[1],Ae,Se),q(R[2],Se,ve),q(R[3],ue,Ae)}function Oe(R,C,P){for(let h=0;h<4;h++)H(R[h],C[h],P)}function De(R,C){const P=s(),h=s(),w=s();fe(w,C[2]),q(P,C[0],w),q(h,C[1],w),ie(R,h),R[31]^=le(P)<<7}function v(R,C,P){j(R[0],l),j(R[1],p),j(R[2],p),j(R[3],l);for(let h=255;h>=0;--h){const w=P[h/8|0]>>(h&7)&1;Oe(R,C,w),se(C,R),se(R,R),Oe(R,C,w)}}function E(R,C){const P=[s(),s(),s(),s()];j(P[0],S),j(P[1],U),j(P[2],p),q(P[3],S,U),v(R,P,C)}function J(R){if(R.length!==a.SEED_LENGTH)throw new Error(`ed25519: seed must be ${a.SEED_LENGTH} bytes`);const C=(0,t.hash)(R);C[0]&=248,C[31]&=127,C[31]|=64;const P=new Uint8Array(32),h=[s(),s(),s(),s()];E(h,C),De(P,h);const w=new Uint8Array(64);return w.set(R),w.set(P,32),{publicKey:P,secretKey:w}}a.generateKeyPairFromSeed=J;function ne(R){const C=(0,r.randomBytes)(32,R),P=J(C);return(0,n.wipe)(C),P}a.generateKeyPair=ne;function k(R){if(R.length!==a.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${a.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(R.subarray(32))}a.extractPublicKeyFromSecretKey=k;const M=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function z(R,C){let P,h,w,Q;for(h=63;h>=32;--h){for(P=0,w=h-32,Q=h-12;w<Q;++w)C[w]+=P-16*C[h]*M[w-(h-32)],P=Math.floor((C[w]+128)/256),C[w]-=P*256;C[w]+=P,C[h]=0}for(P=0,w=0;w<32;w++)C[w]+=P-(C[31]>>4)*M[w],P=C[w]>>8,C[w]&=255;for(w=0;w<32;w++)C[w]-=P*M[w];for(h=0;h<32;h++)C[h+1]+=C[h]>>8,R[h]=C[h]&255}function B(R){const C=new Float64Array(64);for(let P=0;P<64;P++)C[P]=R[P];for(let P=0;P<64;P++)R[P]=0;z(R,C)}function qe(R,C){const P=new Float64Array(64),h=[s(),s(),s(),s()],w=(0,t.hash)(R.subarray(0,32));w[0]&=248,w[31]&=127,w[31]|=64;const Q=new Uint8Array(64);Q.set(w.subarray(32),32);const ue=new t.SHA512;ue.update(Q.subarray(32)),ue.update(C);const ve=ue.digest();ue.clean(),B(ve),E(h,ve),De(Q,h),ue.reset(),ue.update(Q.subarray(0,32)),ue.update(R.subarray(32)),ue.update(C);const Se=ue.digest();B(Se);for(let Ae=0;Ae<32;Ae++)P[Ae]=ve[Ae];for(let Ae=0;Ae<32;Ae++)for(let xe=0;xe<32;xe++)P[Ae+xe]+=Se[Ae]*w[xe];return z(Q.subarray(32),P),Q}a.sign=qe;function je(R,C){const P=s(),h=s(),w=s(),Q=s(),ue=s(),ve=s(),Se=s();return j(R[2],p),oe(R[1],C),V(w,R[1]),q(Q,w,m),T(w,w,R[2]),ce(Q,R[2],Q),V(ue,Q),V(ve,ue),q(Se,ve,ue),q(P,Se,w),q(P,P,Q),Z(P,P),q(P,P,w),q(P,P,Q),q(P,P,Q),q(R[0],P,Q),V(h,R[0]),q(h,h,Q),_e(h,w)&&q(R[0],R[0],A),V(h,R[0]),q(h,h,Q),_e(h,w)?-1:(le(R[0])===C[31]>>7&&T(R[0],l,R[0]),q(R[3],R[0],R[1]),0)}function Fr(R,C,P){const h=new Uint8Array(32),w=[s(),s(),s(),s()],Q=[s(),s(),s(),s()];if(P.length!==a.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${a.SIGNATURE_LENGTH} bytes`);if(je(Q,R))return!1;const ue=new t.SHA512;ue.update(P.subarray(0,32)),ue.update(R),ue.update(C);const ve=ue.digest();return B(ve),v(w,Q,ve),E(Q,P.subarray(32)),se(w,Q),De(h,w),!ye(P,h)}a.verify=Fr;function Ht(R){let C=[s(),s(),s(),s()];if(je(C,R))throw new Error("Ed25519: invalid public key");let P=s(),h=s(),w=C[1];ce(P,p,w),T(h,p,w),fe(h,h),q(P,P,h);let Q=new Uint8Array(32);return ie(Q,P),Q}a.convertPublicKeyToX25519=Ht;function xt(R){const C=(0,t.hash)(R.subarray(0,32));C[0]&=248,C[31]&=127,C[31]|=64;const P=new Uint8Array(C.subarray(0,32));return(0,n.wipe)(C),P}a.convertSecretKeyToX25519=xt})(xa);const fb="EdDSA",pb="JWT",zl=".",kl="base64url",db="utf8",gb="utf8",yb=":",vb="did",mb="key",Sh="base58btc",_b="z",bb="K36",wb=32;function ds(a){return ys(_a(pn(a),db),kl)}function Hl(a){const r=_a(bb,Sh),t=_b+ys(Mm([r,a]),Sh);return[vb,mb,t].join(yb)}function Eb(a){return ys(a,kl)}function xb(a){return _a([ds(a.header),ds(a.payload)].join(zl),gb)}function Ib(a){return[ds(a.header),ds(a.payload),Eb(a.signature)].join(zl)}function Ph(a=vl.randomBytes(wb)){return xa.generateKeyPairFromSeed(a)}async function Sb(a,r,t,n,s=X.fromMiliseconds(Date.now())){const c={alg:fb,typ:pb},l=Hl(n.publicKey),p=s+t,m={iss:l,sub:a,aud:r,iat:s,exp:p},y=xb({header:c,payload:m}),S=xa.sign(n.secretKey,y);return Ib({header:c,payload:m,signature:S})}const Pb="PARSE_ERROR",Ob="INVALID_REQUEST",Ab="METHOD_NOT_FOUND",Rb="INVALID_PARAMS",Bl="INTERNAL_ERROR",Ia="SERVER_ERROR",Cb=[-32700,-32600,-32601,-32602,-32603],un={[Pb]:{code:-32700,message:"Parse error"},[Ob]:{code:-32600,message:"Invalid Request"},[Ab]:{code:-32601,message:"Method not found"},[Rb]:{code:-32602,message:"Invalid params"},[Bl]:{code:-32603,message:"Internal error"},[Ia]:{code:-32e3,message:"Server error"}},Vl=Ia;function Tb(a){return Cb.includes(a)}function Oh(a){return Object.keys(un).includes(a)?un[a]:un[Vl]}function Nb(a){const r=Object.values(un).find(t=>t.code===a);return r||un[Vl]}function Kl(a,r,t){return a.message.includes("getaddrinfo ENOTFOUND")||a.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${r}`):a}var Gl={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ua=function(a,r){return ua=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},ua(a,r)};function $b(a,r){ua(a,r);function t(){this.constructor=a}a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var ha=function(){return ha=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},ha.apply(this,arguments)};function Db(a,r){var t={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&r.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(a);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(a,n[s])&&(t[n[s]]=a[n[s]]);return t}function Fb(a,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(a,r,t,n);else for(var p=a.length-1;p>=0;p--)(l=a[p])&&(c=(s<3?l(c):s>3?l(r,t,c):l(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function Lb(a,r){return function(t,n){r(t,n,a)}}function jb(a,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,r)}function Mb(a,r,t,n){function s(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function p(S){try{y(n.next(S))}catch(U){l(U)}}function m(S){try{y(n.throw(S))}catch(U){l(U)}}function y(S){S.done?c(S.value):s(S.value).then(p,m)}y((n=n.apply(a,r||[])).next())})}function qb(a,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,l;return l={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function p(y){return function(S){return m([y,S])}}function m(y){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,s=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){t.label=y[1];break}if(y[0]===6&&t.label<c[1]){t.label=c[1],c=y;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(y);break}c[2]&&t.ops.pop(),t.trys.pop();continue}y=r.call(a,t)}catch(S){y=[6,S],s=0}finally{n=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function Ub(a,r,t,n){n===void 0&&(n=t),a[n]=r[t]}function zb(a,r){for(var t in a)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=a[t])}function la(a){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&a[r],n=0;if(t)return t.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&n>=a.length&&(a=void 0),{value:a&&a[n++],done:!a}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wl(a,r){var t=typeof Symbol=="function"&&a[Symbol.iterator];if(!t)return a;var n=t.call(a),s,c=[],l;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(p){l={error:p}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(l)throw l.error}}return c}function kb(){for(var a=[],r=0;r<arguments.length;r++)a=a.concat(Wl(arguments[r]));return a}function Hb(){for(var a=0,r=0,t=arguments.length;r<t;r++)a+=arguments[r].length;for(var n=Array(a),s=0,r=0;r<t;r++)for(var c=arguments[r],l=0,p=c.length;l<p;l++,s++)n[s]=c[l];return n}function dn(a){return this instanceof dn?(this.v=a,this):new dn(a)}function Bb(a,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(a,r||[]),s,c=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(A){n[A]&&(s[A]=function(j){return new Promise(function($,H){c.push([A,j,$,H])>1||p(A,j)})})}function p(A,j){try{m(n[A](j))}catch($){U(c[0][3],$)}}function m(A){A.value instanceof dn?Promise.resolve(A.value.v).then(y,S):U(c[0][2],A)}function y(A){p("next",A)}function S(A){p("throw",A)}function U(A,j){A(j),c.shift(),c.length&&p(c[0][0],c[0][1])}}function Vb(a){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=a[s]?function(l){return(t=!t)?{value:dn(a[s](l)),done:s==="return"}:c?c(l):l}:c}}function Kb(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=a[Symbol.asyncIterator],t;return r?r.call(a):(a=typeof la=="function"?la(a):a[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=a[c]&&function(l){return new Promise(function(p,m){l=a[c](l),s(p,m,l.done,l.value)})}}function s(c,l,p,m){Promise.resolve(m).then(function(y){c({value:y,done:p})},l)}}function Gb(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a}function Wb(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var t in a)Object.hasOwnProperty.call(a,t)&&(r[t]=a[t]);return r.default=a,r}function Jb(a){return a&&a.__esModule?a:{default:a}}function Yb(a,r){if(!r.has(a))throw new TypeError("attempted to get private field on non-instance");return r.get(a)}function Qb(a,r,t){if(!r.has(a))throw new TypeError("attempted to set private field on non-instance");return r.set(a,t),t}const Xb=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ha},__asyncDelegator:Vb,__asyncGenerator:Bb,__asyncValues:Kb,__await:dn,__awaiter:Mb,__classPrivateFieldGet:Yb,__classPrivateFieldSet:Qb,__createBinding:Ub,__decorate:Fb,__exportStar:zb,__extends:$b,__generator:qb,__importDefault:Jb,__importStar:Wb,__makeTemplateObject:Gb,__metadata:jb,__param:Lb,__read:Wl,__rest:Db,__spread:kb,__spreadArrays:Hb,__values:la},Symbol.toStringTag,{value:"Module"})),Zb=gn(Xb);var Nr={},Ah;function ew(){if(Ah)return Nr;Ah=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.isBrowserCryptoAvailable=Nr.getSubtleCrypto=Nr.getBrowerCrypto=void 0;function a(){return(Er===null||Er===void 0?void 0:Er.crypto)||(Er===null||Er===void 0?void 0:Er.msCrypto)||{}}Nr.getBrowerCrypto=a;function r(){const n=a();return n.subtle||n.webkitSubtle}Nr.getSubtleCrypto=r;function t(){return!!a()&&!!r()}return Nr.isBrowserCryptoAvailable=t,Nr}var $r={},Rh;function tw(){if(Rh)return $r;Rh=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.isBrowser=$r.isNode=$r.isReactNative=void 0;function a(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}$r.isReactNative=a;function r(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}$r.isNode=r;function t(){return!a()&&!r()}return $r.isBrowser=t,$r}(function(a){Object.defineProperty(a,"__esModule",{value:!0});const r=Zb;r.__exportStar(ew(),a),r.__exportStar(tw(),a)})(Gl);function Jl(a=3){const r=Date.now()*Math.pow(10,a),t=Math.floor(Math.random()*Math.pow(10,a));return r+t}function Sa(a=6){return BigInt(Jl(a))}function bs(a,r,t){return{id:t||Jl(),jsonrpc:"2.0",method:a,params:r}}function Pa(a,r){return{id:a,jsonrpc:"2.0",result:r}}function ws(a,r,t){return{id:a,jsonrpc:"2.0",error:rw(r,t)}}function rw(a,r){return typeof a>"u"?Oh(Bl):(typeof a=="string"&&(a=Object.assign(Object.assign({},Oh(Ia)),{message:a})),typeof r<"u"&&(a.data=r),Tb(a.code)&&(a=Nb(a.code)),a)}class iw{}class nw extends iw{constructor(){super()}}class sw extends nw{constructor(r){super()}}const ow="^https?:",aw="^wss?:";function cw(a){const r=a.match(new RegExp(/^\w+:/,"gi"));if(!(!r||!r.length))return r[0]}function Yl(a,r){const t=cw(a);return typeof t>"u"?!1:new RegExp(r).test(t)}function Ch(a){return Yl(a,ow)}function Th(a){return Yl(a,aw)}function uw(a){return new RegExp("wss?://localhost(:d{2,5})?").test(a)}function Ql(a){return typeof a=="object"&&"id"in a&&"jsonrpc"in a&&a.jsonrpc==="2.0"}function Oa(a){return Ql(a)&&"method"in a}function Es(a){return Ql(a)&&(Dr(a)||yr(a))}function Dr(a){return"result"in a}function yr(a){return"error"in a}class Jr extends sw{constructor(r){super(r),this.events=new Qt.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(r),this.connection.connected&&this.registerEventListeners()}async connect(r=this.connection){await this.open(r)}async disconnect(){await this.close()}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async request(r,t){return this.requestStrict(bs(r.method,r.params||[],r.id||Sa().toString()),t)}async requestStrict(r,t){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(c){s(c)}this.events.on(`${r.id}`,c=>{yr(c)?s(c.error):n(c.result)});try{await this.connection.send(r,t)}catch(c){s(c)}})}setConnection(r=this.connection){return r}onPayload(r){this.events.emit("payload",r),Es(r)?this.events.emit(`${r.id}`,r):this.events.emit("message",{type:r.method,data:r.params})}onClose(r){r&&r.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${r.code} ${r.reason?`(${r.reason})`:""}`)),this.events.emit("disconnect")}async open(r=this.connection){this.connection===r&&this.connection.connected||(this.connection.connected&&this.close(),typeof r=="string"&&(await this.connection.open(r),r=this.connection),this.connection=this.setConnection(r),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",r=>this.onPayload(r)),this.connection.on("close",r=>this.onClose(r)),this.connection.on("error",r=>this.events.emit("error",r)),this.connection.on("register_error",r=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const hw=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),lw=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Nh=a=>a.split("?")[0],$h=10,fw=hw();class pw{constructor(r){if(this.url=r,this.events=new Qt.EventEmitter,this.registering=!1,!Th(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async open(r=this.url){await this.register(r)}async close(){return new Promise((r,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),r()},this.socket.close()})}async send(r,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(pn(r))}catch(n){this.onError(r.id,n)}}register(r=this.url){if(!Th(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,s)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),s(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=r,this.registering=!0,new Promise((t,n)=>{const s=Gl.isReactNative()?void 0:{rejectUnauthorized:!uw(r)},c=new fw(r,[],s);lw()?c.onerror=l=>{const p=l;n(this.emitError(p.error))}:c.on("error",l=>{n(this.emitError(l))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(r){r.onmessage=t=>this.onPayload(t),r.onclose=t=>this.onClose(t),this.socket=r,this.registering=!1,this.events.emit("open")}onClose(r){this.socket=void 0,this.registering=!1,this.events.emit("close",r)}onPayload(r){if(typeof r.data>"u")return;const t=typeof r.data=="string"?Ea(r.data):r.data;this.events.emit("payload",t)}onError(r,t){const n=this.parseError(t),s=n.message||n.toString(),c=ws(r,s);this.events.emit("payload",c)}parseError(r,t=this.url){return Kl(r,Nh(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>$h&&this.events.setMaxListeners($h)}emitError(r){const t=this.parseError(new Error((r==null?void 0:r.message)||`WebSocket connection failed for host: ${Nh(this.url)}`));return this.events.emit("register_error",t),t}}function dw(a,r){if(a.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<a.length;s++){var c=a.charAt(s),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=s}var p=a.length,m=a.charAt(0),y=Math.log(p)/Math.log(256),S=Math.log(256)/Math.log(p);function U($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var H=0,ie=0,ye=0,_e=$.length;ye!==_e&&$[ye]===0;)ye++,H++;for(var le=(_e-ye)*S+1>>>0,oe=new Uint8Array(le);ye!==_e;){for(var ce=$[ye],T=0,q=le-1;(ce!==0||T<ie)&&q!==-1;q--,T++)ce+=256*oe[q]>>>0,oe[q]=ce%p>>>0,ce=ce/p>>>0;if(ce!==0)throw new Error("Non-zero carry");ie=T,ye++}for(var V=le-ie;V!==le&&oe[V]===0;)V++;for(var fe=m.repeat(H);V<le;++V)fe+=a.charAt(oe[V]);return fe}function A($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var H=0;if($[H]!==" "){for(var ie=0,ye=0;$[H]===m;)ie++,H++;for(var _e=($.length-H)*y+1>>>0,le=new Uint8Array(_e);$[H];){var oe=t[$.charCodeAt(H)];if(oe===255)return;for(var ce=0,T=_e-1;(oe!==0||ce<ye)&&T!==-1;T--,ce++)oe+=p*le[T]>>>0,le[T]=oe%256>>>0,oe=oe/256>>>0;if(oe!==0)throw new Error("Non-zero carry");ye=ce,H++}if($[H]!==" "){for(var q=_e-ye;q!==_e&&le[q]===0;)q++;for(var V=new Uint8Array(ie+(_e-q)),fe=ie;q!==_e;)V[fe++]=le[q++];return V}}}function j($){var H=A($);if(H)return H;throw new Error(`Non-${r} character`)}return{encode:U,decodeUnsafe:A,decode:j}}var gw=dw,yw=gw;const Xl=a=>{if(a instanceof Uint8Array&&a.constructor.name==="Uint8Array")return a;if(a instanceof ArrayBuffer)return new Uint8Array(a);if(ArrayBuffer.isView(a))return new Uint8Array(a.buffer,a.byteOffset,a.byteLength);throw new Error("Unknown type, must be binary type")},vw=a=>new TextEncoder().encode(a),mw=a=>new TextDecoder().decode(a);class _w{constructor(r,t,n){this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class bw{constructor(r,t,n){if(this.name=r,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return Zl(this,r)}}class ww{constructor(r){this.decoders=r}or(r){return Zl(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Zl=(a,r)=>new ww({...a.decoders||{[a.prefix]:a},...r.decoders||{[r.prefix]:r}});class Ew{constructor(r,t,n,s){this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new _w(r,t,n),this.decoder=new bw(r,t,s)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}const xs=({name:a,prefix:r,encode:t,decode:n})=>new Ew(a,r,t,n),vn=({prefix:a,name:r,alphabet:t})=>{const{encode:n,decode:s}=yw(t,r);return xs({prefix:a,name:r,encode:n,decode:c=>Xl(s(c))})},xw=(a,r,t,n)=>{const s={};for(let S=0;S<r.length;++S)s[r[S]]=S;let c=a.length;for(;a[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let p=0,m=0,y=0;for(let S=0;S<c;++S){const U=s[a[S]];if(U===void 0)throw new SyntaxError(`Non-${n} character`);m=m<<t|U,p+=t,p>=8&&(p-=8,l[y++]=255&m>>p)}if(p>=t||255&m<<8-p)throw new SyntaxError("Unexpected end of data");return l},Iw=(a,r,t)=>{const n=r[r.length-1]==="=",s=(1<<t)-1;let c="",l=0,p=0;for(let m=0;m<a.length;++m)for(p=p<<8|a[m],l+=8;l>t;)l-=t,c+=r[s&p>>l];if(l&&(c+=r[s&p<<t-l]),n)for(;c.length*t&7;)c+="=";return c},Ot=({name:a,prefix:r,bitsPerChar:t,alphabet:n})=>xs({prefix:r,name:a,encode(s){return Iw(s,n,t)},decode(s){return xw(s,n,t,a)}}),Sw=xs({prefix:"\0",name:"identity",encode:a=>mw(a),decode:a=>vw(a)});var Pw=Object.freeze({__proto__:null,identity:Sw});const Ow=Ot({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Aw=Object.freeze({__proto__:null,base2:Ow});const Rw=Ot({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Cw=Object.freeze({__proto__:null,base8:Rw});const Tw=vn({prefix:"9",name:"base10",alphabet:"0123456789"});var Nw=Object.freeze({__proto__:null,base10:Tw});const $w=Ot({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Dw=Ot({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Fw=Object.freeze({__proto__:null,base16:$w,base16upper:Dw});const Lw=Ot({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),jw=Ot({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Mw=Ot({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),qw=Ot({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Uw=Ot({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),zw=Ot({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kw=Ot({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Hw=Ot({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Bw=Ot({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Vw=Object.freeze({__proto__:null,base32:Lw,base32upper:jw,base32pad:Mw,base32padupper:qw,base32hex:Uw,base32hexupper:zw,base32hexpad:kw,base32hexpadupper:Hw,base32z:Bw});const Kw=vn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Gw=vn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ww=Object.freeze({__proto__:null,base36:Kw,base36upper:Gw});const Jw=vn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Yw=vn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Qw=Object.freeze({__proto__:null,base58btc:Jw,base58flickr:Yw});const Xw=Ot({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Zw=Ot({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eE=Ot({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tE=Ot({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var rE=Object.freeze({__proto__:null,base64:Xw,base64pad:Zw,base64url:eE,base64urlpad:tE});const ef=Array.from(""),iE=ef.reduce((a,r,t)=>(a[t]=r,a),[]),nE=ef.reduce((a,r,t)=>(a[r.codePointAt(0)]=t,a),[]);function sE(a){return a.reduce((r,t)=>(r+=iE[t],r),"")}function oE(a){const r=[];for(const t of a){const n=nE[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);r.push(n)}return new Uint8Array(r)}const aE=xs({prefix:"",name:"base256emoji",encode:sE,decode:oE});var cE=Object.freeze({__proto__:null,base256emoji:aE}),uE=tf,Dh=128,hE=127,lE=~hE,fE=Math.pow(2,31);function tf(a,r,t){r=r||[],t=t||0;for(var n=t;a>=fE;)r[t++]=a&255|Dh,a/=128;for(;a&lE;)r[t++]=a&255|Dh,a>>>=7;return r[t]=a|0,tf.bytes=t-n+1,r}var pE=fa,dE=128,Fh=127;function fa(a,n){var t=0,n=n||0,s=0,c=n,l,p=a.length;do{if(c>=p)throw fa.bytes=0,new RangeError("Could not decode varint");l=a[c++],t+=s<28?(l&Fh)<<s:(l&Fh)*Math.pow(2,s),s+=7}while(l>=dE);return fa.bytes=c-n,t}var gE=Math.pow(2,7),yE=Math.pow(2,14),vE=Math.pow(2,21),mE=Math.pow(2,28),_E=Math.pow(2,35),bE=Math.pow(2,42),wE=Math.pow(2,49),EE=Math.pow(2,56),xE=Math.pow(2,63),IE=function(a){return a<gE?1:a<yE?2:a<vE?3:a<mE?4:a<_E?5:a<bE?6:a<wE?7:a<EE?8:a<xE?9:10},SE={encode:uE,decode:pE,encodingLength:IE},rf=SE;const Lh=(a,r,t=0)=>(rf.encode(a,r,t),r),jh=a=>rf.encodingLength(a),pa=(a,r)=>{const t=r.byteLength,n=jh(a),s=n+jh(t),c=new Uint8Array(s+t);return Lh(a,c,0),Lh(t,c,n),c.set(r,s),new PE(a,t,r,c)};class PE{constructor(r,t,n,s){this.code=r,this.size=t,this.digest=n,this.bytes=s}}const nf=({name:a,code:r,encode:t})=>new OE(a,r,t);class OE{constructor(r,t,n){this.name=r,this.code=t,this.encode=n}digest(r){if(r instanceof Uint8Array){const t=this.encode(r);return t instanceof Uint8Array?pa(this.code,t):t.then(n=>pa(this.code,n))}else throw Error("Unknown type, must be binary type")}}const sf=a=>async r=>new Uint8Array(await crypto.subtle.digest(a,r)),AE=nf({name:"sha2-256",code:18,encode:sf("SHA-256")}),RE=nf({name:"sha2-512",code:19,encode:sf("SHA-512")});var CE=Object.freeze({__proto__:null,sha256:AE,sha512:RE});const of=0,TE="identity",af=Xl,NE=a=>pa(of,af(a)),$E={code:of,name:TE,encode:af,digest:NE};var DE=Object.freeze({__proto__:null,identity:$E});new TextEncoder,new TextDecoder;const Mh={...Pw,...Aw,...Cw,...Nw,...Fw,...Vw,...Ww,...Qw,...rE,...cE};({...CE,...DE});function cf(a){return globalThis.Buffer!=null?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):a}function FE(a=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?cf(globalThis.Buffer.allocUnsafe(a)):new Uint8Array(a)}function uf(a,r,t,n){return{name:a,prefix:r,encoder:{name:a,prefix:r,encode:t},decoder:{decode:n}}}const qh=uf("utf8","u",a=>"u"+new TextDecoder("utf8").decode(a),a=>new TextEncoder().encode(a.substring(1))),Ho=uf("ascii","a",a=>{let r="a";for(let t=0;t<a.length;t++)r+=String.fromCharCode(a[t]);return r},a=>{a=a.substring(1);const r=FE(a.length);for(let t=0;t<a.length;t++)r[t]=a.charCodeAt(t);return r}),LE={utf8:qh,"utf-8":qh,hex:Mh.base16,latin1:Ho,ascii:Ho,binary:Ho,...Mh};function jE(a,r="utf8"){const t=LE[r];if(!t)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?cf(globalThis.Buffer.from(a,"utf-8")):t.decoder.decode(`${t.prefix}${a}`)}const hf="wc",ME=2,Aa="core",Wr=`${hf}@2:${Aa}:`,qE={name:Aa,logger:"error"},UE={database:":memory:"},zE="crypto",Uh="client_ed25519_seed",kE=X.ONE_DAY,HE="keychain",BE="0.3",VE="messages",KE="0.3",GE=X.SIX_HOURS,WE="publisher",lf="irn",JE="error",ff="wss://relay.walletconnect.com",zh="wss://relay.walletconnect.org",YE="relayer",Ge={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},QE="_subscription",tn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},XE=X.ONE_SECOND/2,ZE="2.9.2",ex=1e4,tx="0.3",rx="WALLETCONNECT_CLIENT_ID",wr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ix="subscription",nx="0.3",sx=X.FIVE_SECONDS*1e3,ox="pairing",ax="0.3",rn={wc_pairingDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:X.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:X.ONE_DAY,prompt:!1,tag:0},res:{ttl:X.ONE_DAY,prompt:!1,tag:0}}},br={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},cx="history",ux="0.3",hx="expirer",cr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},lx="0.3",Bo="verify-api",kh="https://verify.walletconnect.com";class fx{constructor(r,t){this.core=r,this.logger=t,this.keychain=new Map,this.name=HE,this.version=BE,this.initialized=!1,this.storagePrefix=Wr,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()},this.get=n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:c}=W("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(c)}return s},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=r,this.logger=Ee.generateChildLogger(t,this.name)}get context(){return Ee.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(r){await this.core.storage.setItem(this.storageKey,wl(r))}async getKeyChain(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?El(r):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:r}=W("NOT_INITIALIZED",this.name);throw new Error(r)}}}class px{constructor(r,t,n){this.core=r,this.logger=t,this.name=zE,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),c=Ph(s);return Hl(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=km();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const c=await this.getClientSeed(),l=Ph(c),p=Xo();return await Sb(p,s,kE,l)},this.generateSharedKey=(s,c,l)=>{this.isInitialized();const p=this.getPrivateKey(s),m=Hm(p,c);return this.setSymKey(m,l)},this.setSymKey=async(s,c)=>{this.isInitialized();const l=c||Bm(s);return await this.keychain.set(l,s),l},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,c,l)=>{this.isInitialized();const p=Vm(l),m=pn(c);if(sh(p)){const A=p.senderPublicKey,j=p.receiverPublicKey;s=await this.generateSharedKey(A,j)}const y=this.getSymKey(s),{type:S,senderPublicKey:U}=p;return Km({type:S,symKey:y,message:m,senderPublicKey:U})},this.decode=async(s,c,l)=>{this.isInitialized();const p=Gm(c,l);if(sh(p)){const m=p.receiverPublicKey,y=p.senderPublicKey;s=await this.generateSharedKey(m,y)}try{const m=this.getSymKey(s),y=Wm({symKey:m,encoded:c});return Ea(y)}catch(m){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(m)}},this.getPayloadType=s=>{const c=oh(s);return Jm(c.type)},this.getPayloadSenderPublicKey=s=>{const c=oh(s);return c.senderPublicKey?ys(c.senderPublicKey,Ym):void 0},this.core=r,this.logger=Ee.generateChildLogger(t,this.name),this.keychain=n||new fx(this.core,this.logger)}get context(){return Ee.getLoggerContext(this.logger)}async setPrivateKey(r,t){return await this.keychain.set(r,t),r}getPrivateKey(r){return this.keychain.get(r)}async getClientSeed(){let r="";try{r=this.keychain.get(Uh)}catch{r=Xo(),await this.keychain.set(Uh,r)}return jE(r,"base16")}getSymKey(r){return this.keychain.get(r)}isInitialized(){if(!this.initialized){const{message:r}=W("NOT_INITIALIZED",this.name);throw new Error(r)}}}class dx extends tb{constructor(r,t){super(r,t),this.logger=r,this.core=t,this.messages=new Map,this.name=VE,this.version=KE,this.initialized=!1,this.storagePrefix=Wr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,s)=>{this.isInitialized();const c=Ci(s);let l=this.messages.get(n);return typeof l>"u"&&(l={}),typeof l[c]<"u"||(l[c]=s,this.messages.set(n,l),await this.persist()),c},this.get=n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s},this.has=(n,s)=>{this.isInitialized();const c=this.get(n),l=Ci(s);return typeof c[l]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Ee.generateChildLogger(r,this.name),this.core=t}get context(){return Ee.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(r){await this.core.storage.setItem(this.storageKey,wl(r))}async getRelayerMessages(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?El(r):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:r}=W("NOT_INITIALIZED",this.name);throw new Error(r)}}}class gx extends rb{constructor(r,t){super(r,t),this.relayer=r,this.logger=t,this.events=new Qt.EventEmitter,this.name=WE,this.queue=new Map,this.publishTimeout=X.toMiliseconds(X.TEN_SECONDS),this.queueTimeout=X.toMiliseconds(X.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,s,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:c}});try{const l=(c==null?void 0:c.ttl)||GE,p=Zo(c),m=(c==null?void 0:c.prompt)||!1,y=(c==null?void 0:c.tag)||0,S=(c==null?void 0:c.id)||Sa().toString(),U={topic:n,message:s,opts:{ttl:l,relay:p,prompt:m,tag:y,id:S}},A=setTimeout(()=>this.queue.set(S,U),this.queueTimeout);try{await await ps(this.rpcPublish(n,s,l,p,m,y,S),this.publishTimeout),clearTimeout(A),this.relayer.events.emit(Ge.publish,U)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:c}})}catch(l){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(l),l}},this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.relayer=r,this.logger=Ee.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Ee.getLoggerContext(this.logger)}rpcPublish(r,t,n,s,c,l,p){var m,y,S,U;const A={method:us(s.protocol).publish,params:{topic:r,message:t,ttl:n,prompt:c,tag:l},id:p};return Gr((m=A.params)==null?void 0:m.prompt)&&((y=A.params)==null||delete y.prompt),Gr((S=A.params)==null?void 0:S.tag)&&((U=A.params)==null||delete U.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:A}),this.relayer.request(A)}onPublish(r){this.queue.delete(r)}checkQueue(){this.queue.forEach(async r=>{const{topic:t,message:n,opts:s}=r;await this.publish(t,n,s)})}registerEventListeners(){this.relayer.core.heartbeat.on($i.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ge.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ge.message_ack,r=>{this.onPublish(r.id.toString())})}}class yx{constructor(){this.map=new Map,this.set=(r,t)=>{const n=this.get(r);this.exists(r,t)||this.map.set(r,[...n,t])},this.get=r=>this.map.get(r)||[],this.exists=(r,t)=>this.get(r).includes(t),this.delete=(r,t)=>{if(typeof t>"u"){this.map.delete(r);return}if(!this.map.has(r))return;const n=this.get(r);if(!this.exists(r,t))return;const s=n.filter(c=>c!==t);if(!s.length){this.map.delete(r);return}this.map.set(r,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var vx=Object.defineProperty,mx=Object.defineProperties,_x=Object.getOwnPropertyDescriptors,Hh=Object.getOwnPropertySymbols,bx=Object.prototype.hasOwnProperty,wx=Object.prototype.propertyIsEnumerable,Bh=(a,r,t)=>r in a?vx(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,nn=(a,r)=>{for(var t in r||(r={}))bx.call(r,t)&&Bh(a,t,r[t]);if(Hh)for(var t of Hh(r))wx.call(r,t)&&Bh(a,t,r[t]);return a},Vo=(a,r)=>mx(a,_x(r));class Ex extends sb{constructor(r,t){super(r,t),this.relayer=r,this.logger=t,this.subscriptions=new Map,this.topicMap=new yx,this.events=new Qt.EventEmitter,this.name=ix,this.version=nx,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Wr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const c=Zo(s),l={topic:n,relay:c};this.pending.set(n,l);const p=await this.rpcSubscribe(n,c);return this.onSubscribe(p,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}}),p}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(n,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((s,c)=>{const l=new X.Watch;l.start(this.pendingSubscriptionWatchLabel);const p=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(p),l.stop(this.pendingSubscriptionWatchLabel),s(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=sx&&(clearInterval(p),l.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=r,this.logger=Ee.generateChildLogger(t,this.name),this.clientId=""}get context(){return Ee.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(r,t){let n=!1;try{n=this.getSubscription(r).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(r,t){const n=this.topicMap.get(r);await Promise.all(n.map(async s=>await this.unsubscribeById(r,s,t)))}async unsubscribeById(r,t,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:t,opts:n}});try{const s=Zo(n);await this.rpcUnsubscribe(r,t,s);const c=Lt("USER_DISCONNECTED",`${this.name}, ${r}`);await this.onUnsubscribe(r,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:t,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(r,t){const n={method:us(t.protocol).subscribe,params:{topic:r}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await ps(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ge.connection_stalled)}return Ci(r+this.clientId)}async rpcBatchSubscribe(r){if(!r.length)return;const t=r[0].relay,n={method:us(t.protocol).batchSubscribe,params:{topics:r.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await ps(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ge.connection_stalled)}}rpcUnsubscribe(r,t,n){const s={method:us(n.protocol).unsubscribe,params:{topic:r,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(r,t){this.setSubscription(r,Vo(nn({},t),{id:r})),this.pending.delete(t.topic)}onBatchSubscribe(r){r.length&&r.forEach(t=>{this.setSubscription(t.id,nn({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(r,t,n){this.events.removeAllListeners(t),this.hasSubscription(t,r)&&this.deleteSubscription(t,n),await this.relayer.messages.del(r)}async setRelayerSubscriptions(r){await this.relayer.core.storage.setItem(this.storageKey,r)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(r,t){this.subscriptions.has(r)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:r,subscription:t}),this.addSubscription(r,t))}addSubscription(r,t){this.subscriptions.set(r,nn({},t)),this.topicMap.set(t.topic,r),this.events.emit(wr.created,t)}getSubscription(r){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:r});const t=this.subscriptions.get(r);if(!t){const{message:n}=W("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(n)}return t}deleteSubscription(r,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:r,reason:t});const n=this.getSubscription(r);this.subscriptions.delete(r),this.topicMap.delete(n.topic,r),this.events.emit(wr.deleted,Vo(nn({},n),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(wr.sync)}async reset(){if(this.cached.length){const r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<r;t++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(wr.resubscribed)}async restore(){try{const r=await this.getRelayerSubscriptions();if(typeof r>"u"||!r.length)return;if(this.subscriptions.size){const{message:t}=W("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(r){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(r)}}async batchSubscribe(r){if(!r.length)return;const t=await this.rpcBatchSubscribe(r);Ni(t)&&this.onBatchSubscribe(t.map((n,s)=>Vo(nn({},r[s]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const r=[];this.pending.forEach(t=>{r.push(t)}),await this.batchSubscribe(r)}registerEventListeners(){this.relayer.core.heartbeat.on($i.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ge.connect,async()=>{await this.onConnect()}),this.relayer.on(Ge.disconnect,()=>{this.onDisconnect()}),this.events.on(wr.created,async r=>{const t=wr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),await this.persist()}),this.events.on(wr.deleted,async r=>{const t=wr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=W("NOT_INITIALIZED",this.name);throw new Error(r)}}async restartToComplete(){this.restartInProgress&&await new Promise(r=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),r())},this.pollingInterval)})}}var xx=Object.defineProperty,Vh=Object.getOwnPropertySymbols,Ix=Object.prototype.hasOwnProperty,Sx=Object.prototype.propertyIsEnumerable,Kh=(a,r,t)=>r in a?xx(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,Px=(a,r)=>{for(var t in r||(r={}))Ix.call(r,t)&&Kh(a,t,r[t]);if(Vh)for(var t of Vh(r))Sx.call(r,t)&&Kh(a,t,r[t]);return a};class Ox extends ib{constructor(r){super(r),this.protocol="wc",this.version=2,this.events=new Qt.EventEmitter,this.name=YE,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.core=r.core,this.logger=typeof r.logger<"u"&&typeof r.logger!="string"?Ee.generateChildLogger(r.logger,this.name):Ee.pino(Ee.getDefaultLoggerOptions({level:r.logger||JE})),this.messages=new dx(this.logger,r.core),this.subscriber=new Ex(this,this.logger),this.publisher=new gx(this,this.logger),this.relayUrl=(r==null?void 0:r.relayUrl)||ff,this.projectId=r.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${zh}...`),await this.restartTransport(zh)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},ex)}get context(){return Ee.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(r,t,n){this.isInitialized(),await this.publisher.publish(r,t,n),await this.recordMessageEvent({topic:r,message:t,publishedAt:Date.now()})}async subscribe(r,t){var n;this.isInitialized();let s=((n=this.subscriber.topicMap.get(r))==null?void 0:n[0])||"";return s||(await Promise.all([new Promise(c=>{this.subscriber.once(wr.created,l=>{l.topic===r&&c()})}),new Promise(async c=>{s=await this.subscriber.subscribe(r,t),c()})]),s)}async unsubscribe(r,t){this.isInitialized(),await this.subscriber.unsubscribe(r,t)}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Ge.transport_closed))}async transportOpen(r){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=r||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(wr.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,n)=>{await ps(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(s=>n(s)).then(()=>t()).finally(()=>this.removeListener(Ge.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(Ge.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const n=t;if(!this.isConnectionStalled(n.message))throw t;this.events.emit(Ge.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(r){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=r||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(tn.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(r){return this.staleConnectionErrors.some(t=>r.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const r=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Jr(new pw(Qm({sdkVersion:ZE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:r,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(r){const{topic:t,message:n}=r;await this.messages.set(t,n)}async shouldIgnoreMessageEvent(r){const{topic:t,message:n}=r;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const s=this.messages.has(t,n);return s&&this.logger.debug(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(r){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:r}),Oa(r)){if(!r.method.endsWith(QE))return;const t=r.params,{topic:n,message:s,publishedAt:c}=t.data,l={topic:n,message:s,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Px({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(r),await this.onMessageEvent(l)}else Es(r)&&this.events.emit(Ge.message_ack,r)}async onMessageEvent(r){await this.shouldIgnoreMessageEvent(r)||(this.events.emit(Ge.message,r),await this.recordMessageEvent(r))}async acknowledgePayload(r){const t=Pa(r.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(tn.payload,r=>this.onProviderPayload(r)),this.provider.on(tn.connect,()=>{this.events.emit(Ge.connect)}),this.provider.on(tn.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(tn.error,r=>{this.logger.error(r),this.events.emit(Ge.error,r)})}registerEventListeners(){this.events.on(Ge.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Ge.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},X.toMiliseconds(XE))}isInitialized(){if(!this.initialized){const{message:r}=W("NOT_INITIALIZED",this.name);throw new Error(r)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(r=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),r())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Ax=Object.defineProperty,Gh=Object.getOwnPropertySymbols,Rx=Object.prototype.hasOwnProperty,Cx=Object.prototype.propertyIsEnumerable,Wh=(a,r,t)=>r in a?Ax(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,Jh=(a,r)=>{for(var t in r||(r={}))Rx.call(r,t)&&Wh(a,t,r[t]);if(Gh)for(var t of Gh(r))Cx.call(r,t)&&Wh(a,t,r[t]);return a};class Is extends nb{constructor(r,t,n,s=Wr,c=void 0){super(r,t,n,s),this.core=r,this.logger=t,this.name=n,this.map=new Map,this.version=tx,this.cached=[],this.initialized=!1,this.storagePrefix=Wr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!Gr(l)?this.map.set(this.getKey(l),l):qm(l)?this.map.set(l.id,l):Um(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)},this.set=async(l,p)=>{this.isInitialized(),this.map.has(l)?await this.update(l,p):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:p}),this.map.set(l,p),await this.persist())},this.get=l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l)),this.getAll=l=>(this.isInitialized(),l?this.values.filter(p=>Object.keys(l).every(m=>zm(p[m],l[m]))):this.values),this.update=async(l,p)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:p});const m=Jh(Jh({},this.getData(l)),p);this.map.set(l,m),await this.persist()},this.delete=async(l,p)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:p}),this.map.delete(l),await this.persist())},this.logger=Ee.generateChildLogger(t,this.name),this.storagePrefix=s,this.getKey=c}get context(){return Ee.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(r){await this.core.storage.setItem(this.storageKey,r)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(r){const t=this.map.get(r);if(!t){const{message:n}=W("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(n),new Error(n)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const r=await this.getDataStore();if(typeof r>"u"||!r.length)return;if(this.map.size){const{message:t}=W("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(r){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(r)}}isInitialized(){if(!this.initialized){const{message:r}=W("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Tx{constructor(r,t){this.core=r,this.logger=t,this.name=ox,this.version=ax,this.events=new wa,this.initialized=!1,this.storagePrefix=Wr,this.ignoredPayloadTypes=[ml],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Xo(),s=await this.core.crypto.setSymKey(n),c=gr(X.FIVE_MINUTES),l={protocol:lf},p={topic:s,expiry:c,relay:l,active:!1},m=Xm({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:n,relay:l});return await this.pairings.set(s,p),await this.core.relayer.subscribe(s),this.core.expirer.set(s,c),{topic:s,uri:m}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:s,symKey:c,relay:l}=Zm(n.uri);if(this.pairings.keys.includes(s))throw new Error(`Pairing already exists: ${s}`);if(this.core.crypto.hasKeys(s))throw new Error(`Keychain already exists: ${s}`);const p=gr(X.FIVE_MINUTES),m={topic:s,relay:l,expiry:p,active:!1};return await this.pairings.set(s,m),await this.core.crypto.setSymKey(c,s),await this.core.relayer.subscribe(s,{relay:l}),this.core.expirer.set(s,p),n.activatePairing&&await this.activate({topic:s}),m},this.activate=async({topic:n})=>{this.isInitialized();const s=gr(X.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:s}),this.core.expirer.set(n,s)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:s}=n;if(this.pairings.keys.includes(s)){const c=await this.sendRequest(s,"wc_pairingPing",{}),{done:l,resolve:p,reject:m}=Oi();this.events.once(tt("pairing_ping",c),({error:y})=>{y?m(y):p()}),await l()}},this.updateExpiry=async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})},this.updateMetadata=async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Lt("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(n,s,c)=>{const l=bs(s,c),p=await this.core.crypto.encode(n,l),m=rn[s].req;return this.core.history.set(n,l),this.core.relayer.publish(n,p,m),l.id},this.sendResult=async(n,s,c)=>{const l=Pa(n,c),p=await this.core.crypto.encode(s,l),m=await this.core.history.get(s,n),y=rn[m.request.method].res;await this.core.relayer.publish(s,p,y),await this.core.history.resolve(l)},this.sendError=async(n,s,c)=>{const l=ws(n,c),p=await this.core.crypto.encode(s,l),m=await this.core.history.get(s,n),y=rn[m.request.method]?rn[m.request.method].res:rn.unregistered_method.res;await this.core.relayer.publish(s,p,y),await this.core.history.resolve(l)},this.deletePairing=async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Lt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(s=>Kr(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=n=>{const{topic:s,payload:c}=n;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(s,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,c);default:return this.onUnknownRpcMethodRequest(s,c)}},this.onRelayEventResponse=async n=>{const{topic:s,payload:c}=n,l=(await this.core.history.get(s,c.id)).request.method;switch(l){case"wc_pairingPing":return this.onPairingPingResponse(s,c);default:return this.onUnknownRpcMethodResponse(l)}},this.onPairingPingRequest=async(n,s)=>{const{id:c}=s;try{this.isValidPing({topic:n}),await this.sendResult(c,n,!0),this.events.emit("pairing_ping",{id:c,topic:n})}catch(l){await this.sendError(c,n,l),this.logger.error(l)}},this.onPairingPingResponse=(n,s)=>{const{id:c}=s;setTimeout(()=>{Dr(s)?this.events.emit(tt("pairing_ping",c),{}):yr(s)&&this.events.emit(tt("pairing_ping",c),{error:s.error})},500)},this.onPairingDeleteRequest=async(n,s)=>{const{id:c}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:c,topic:n})}catch(l){await this.sendError(c,n,l),this.logger.error(l)}},this.onUnknownRpcMethodRequest=async(n,s)=>{const{id:c,method:l}=s;try{if(this.registeredMethods.includes(l))return;const p=Lt("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,n,p),this.logger.error(p)}catch(p){await this.sendError(c,n,p),this.logger.error(p)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Lt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!kt(n)){const{message:s}=W("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(s)}if(!e_(n.uri)){const{message:s}=W("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(s)}},this.isValidPing=async n=>{if(!kt(n)){const{message:c}=W("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(c)}const{topic:s}=n;await this.isValidPairingTopic(s)},this.isValidDisconnect=async n=>{if(!kt(n)){const{message:c}=W("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(c)}const{topic:s}=n;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async n=>{if(!Ai(n,!1)){const{message:s}=W("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=W("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(Kr(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=W("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}},this.core=r,this.logger=Ee.generateChildLogger(t,this.name),this.pairings=new Is(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ee.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:r}=W("NOT_INITIALIZED",this.name);throw new Error(r)}}registerRelayerEvents(){this.core.relayer.on(Ge.message,async r=>{const{topic:t,message:n}=r;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(t,n);try{Oa(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):Es(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(cr.expired,async r=>{const{topic:t}=_l(r.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class Nx extends eb{constructor(r,t){super(r,t),this.core=r,this.logger=t,this.records=new Map,this.events=new Qt.EventEmitter,this.name=cx,this.version=ux,this.cached=[],this.initialized=!1,this.storagePrefix=Wr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,s,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:c}),this.records.has(s.id))return;const l={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:c,expiry:gr(X.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(br.created,l)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=yr(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.events.emit(br.updated,s))},this.get=async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s)),this.delete=(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(c=>{if(c.topic===n){if(typeof s<"u"&&c.id!==s)return;this.records.delete(c.id),this.events.emit(br.deleted,c)}})},this.exists=async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1),this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.logger=Ee.generateChildLogger(t,this.name)}get context(){return Ee.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const r=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:bs(t.request.method,t.request.params,t.id),chainId:t.chainId};return r.push(n)}),r}async setJsonRpcRecords(r){await this.core.storage.setItem(this.storageKey,r)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(r){this.isInitialized();const t=this.records.get(r);if(!t){const{message:n}=W("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(n)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(br.sync)}async restore(){try{const r=await this.getJsonRpcRecords();if(typeof r>"u"||!r.length)return;if(this.records.size){const{message:t}=W("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}}registerEventListeners(){this.events.on(br.created,r=>{const t=br.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:r}),this.persist()}),this.events.on(br.updated,r=>{const t=br.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:r}),this.persist()}),this.events.on(br.deleted,r=>{const t=br.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:r}),this.persist()}),this.core.heartbeat.on($i.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(r=>{X.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.delete(r.topic,r.id))})}catch(r){this.logger.warn(r)}}isInitialized(){if(!this.initialized){const{message:r}=W("NOT_INITIALIZED",this.name);throw new Error(r)}}}class $x extends ob{constructor(r,t){super(r,t),this.core=r,this.logger=t,this.expirations=new Map,this.events=new Qt.EventEmitter,this.name=hx,this.version=lx,this.cached=[],this.initialized=!1,this.storagePrefix=Wr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(n,s)=>{this.isInitialized();const c=this.formatTarget(n),l={target:c,expiry:s};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(cr.created,{target:c,expiration:l})},this.get=n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)},this.del=n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),c=this.getExpiration(s);this.expirations.delete(s),this.events.emit(cr.deleted,{target:s,expiration:c})}},this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.logger=Ee.generateChildLogger(t,this.name)}get context(){return Ee.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(r){if(typeof r=="string")return t_(r);if(typeof r=="number")return r_(r);const{message:t}=W("UNKNOWN_TYPE",`Target type: ${typeof r}`);throw new Error(t)}async setExpirations(r){await this.core.storage.setItem(this.storageKey,r)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(cr.sync)}async restore(){try{const r=await this.getExpirations();if(typeof r>"u"||!r.length)return;if(this.expirations.size){const{message:t}=W("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(r){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(r)}}getExpiration(r){const t=this.expirations.get(r);if(!t){const{message:n}=W("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(n),new Error(n)}return t}checkExpiry(r,t){const{expiry:n}=t;X.toMiliseconds(n)-Date.now()<=0&&this.expire(r,t)}expire(r,t){this.expirations.delete(r),this.events.emit(cr.expired,{target:r,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((r,t)=>this.checkExpiry(t,r))}registerEventListeners(){this.core.heartbeat.on($i.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(cr.created,r=>{const t=cr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),this.persist()}),this.events.on(cr.expired,r=>{const t=cr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),this.persist()}),this.events.on(cr.deleted,r=>{const t=cr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=W("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Dx extends ab{constructor(r,t){super(r,t),this.projectId=r,this.logger=t,this.name=Bo,this.initialized=!1,this.init=async n=>{i_()||!bl()||(this.verifyUrl=(n==null?void 0:n.verifyUrl)||kh,await this.createIframe())},this.register=async n=>{var s;if(this.initialized||await this.init(),!!this.iframe)try{(s=this.iframe.contentWindow)==null||s.postMessage(n.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${n.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async n=>{var s;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${n.attestationId}`);const c=this.startAbortTimer(X.FIVE_SECONDS),l=await fetch(`${this.verifyUrl}/attestation/${n.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?(s=await l.json())==null?void 0:s.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((n,s)=>{if(document.getElementById(Bo))return n();const c=document.createElement("iframe");c.setAttribute("id",Bo),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,n()}),c.addEventListener("error",l=>{s(l)}),document.body.append(c),this.iframe=c}),new Promise(n=>{setTimeout(()=>n("iframe load timeout"),X.toMiliseconds(X.ONE_SECOND/2))})])}catch(n){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(n)}},this.logger=Ee.generateChildLogger(t,this.name),this.verifyUrl=kh,this.abortController=new AbortController,this.isDevEnv=n_()&&{}.IS_VITEST}get context(){return Ee.getLoggerContext(this.logger)}startAbortTimer(r){return setTimeout(()=>this.abortController.abort(),X.toMiliseconds(r))}}var Fx=Object.defineProperty,Yh=Object.getOwnPropertySymbols,Lx=Object.prototype.hasOwnProperty,jx=Object.prototype.propertyIsEnumerable,Qh=(a,r,t)=>r in a?Fx(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,Xh=(a,r)=>{for(var t in r||(r={}))Lx.call(r,t)&&Qh(a,t,r[t]);if(Yh)for(var t of Yh(r))jx.call(r,t)&&Qh(a,t,r[t]);return a};class Ra extends Z1{constructor(r){super(r),this.protocol=hf,this.version=ME,this.name=Aa,this.events=new Qt.EventEmitter,this.initialized=!1,this.on=(n,s)=>this.events.on(n,s),this.once=(n,s)=>this.events.once(n,s),this.off=(n,s)=>this.events.off(n,s),this.removeListener=(n,s)=>this.events.removeListener(n,s),this.projectId=r==null?void 0:r.projectId,this.relayUrl=(r==null?void 0:r.relayUrl)||ff;const t=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:Ee.pino(Ee.getDefaultLoggerOptions({level:(r==null?void 0:r.logger)||qE.logger}));this.logger=Ee.generateChildLogger(t,this.name),this.heartbeat=new $i.HeartBeat,this.crypto=new px(this,this.logger,r==null?void 0:r.keychain),this.history=new Nx(this,this.logger),this.expirer=new $x(this,this.logger),this.storage=r!=null&&r.storage?r.storage:new i1(Xh(Xh({},UE),r==null?void 0:r.storageOptions)),this.relayer=new Ox({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Tx(this,this.logger),this.verify=new Dx(this.projectId||"",this.logger)}static async init(r){const t=new Ra(r);await t.initialize();const n=await t.crypto.getClientId();return await t.storage.setItem(rx,n),t}get context(){return Ee.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(r){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,r),this.logger.error(r.message),r}}}const Mx=Ra,pf="wc",df=2,gf="client",Ca=`${pf}@${df}:${gf}:`,Ko={name:gf,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Zh="WALLETCONNECT_DEEPLINK_CHOICE",qx="proposal",yf="Proposal expired",Ux="session",os=X.SEVEN_DAYS,zx="engine",sn={wc_sessionPropose:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1104},res:{ttl:X.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1106},res:{ttl:X.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1112},res:{ttl:X.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1115}}},Go={min:X.FIVE_MINUTES,max:X.SEVEN_DAYS},on={idle:"idle",active:"active"},kx="request",Hx=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Bx=Object.defineProperty,Vx=Object.defineProperties,Kx=Object.getOwnPropertyDescriptors,el=Object.getOwnPropertySymbols,Gx=Object.prototype.hasOwnProperty,Wx=Object.prototype.propertyIsEnumerable,tl=(a,r,t)=>r in a?Bx(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,ar=(a,r)=>{for(var t in r||(r={}))Gx.call(r,t)&&tl(a,t,r[t]);if(el)for(var t of el(r))Wx.call(r,t)&&tl(a,t,r[t]);return a},Wo=(a,r)=>Vx(a,Kx(r));class Jx extends ub{constructor(r){super(r),this.name=zx,this.events=new wa,this.initialized=!1,this.ignoredPayloadTypes=[ml],this.requestQueue={state:on.idle,requests:[]},this.requestQueueDelay=X.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(sn)}),this.initialized=!0,setTimeout(()=>{this.requestQueue.requests=this.getPendingSessionRequests(),this.processRequestQueue()},X.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{this.isInitialized();const n=Wo(ar({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:s,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:p,relays:m}=n;let y=s,S,U=!1;if(y&&(U=this.client.core.pairing.pairings.get(y).active),!y||!U){const{topic:le,uri:oe}=await this.client.core.pairing.create();y=le,S=oe}const A=await this.client.core.crypto.generateKeyPair(),j=ar({requiredNamespaces:c,optionalNamespaces:l,relays:m??[{protocol:lf}],proposer:{publicKey:A,metadata:this.client.metadata}},p&&{sessionProperties:p}),{reject:$,resolve:H,done:ie}=Oi(X.FIVE_MINUTES,yf);if(this.events.once(tt("session_connect"),async({error:le,session:oe})=>{if(le)$(le);else if(oe){oe.self.publicKey=A;const ce=Wo(ar({},oe),{requiredNamespaces:oe.requiredNamespaces,optionalNamespaces:oe.optionalNamespaces});await this.client.session.set(oe.topic,ce),await this.setExpiry(oe.topic,oe.expiry),y&&await this.client.core.pairing.updateMetadata({topic:y,metadata:oe.peer.metadata}),H(ce)}}),!y){const{message:le}=W("NO_MATCHING_KEY",`connect() pairing topic: ${y}`);throw new Error(le)}const ye=await this.sendRequest(y,"wc_sessionPropose",j),_e=gr(X.FIVE_MINUTES);return await this.setProposal(ye,ar({id:ye,expiry:_e},j)),{uri:S,approval:ie}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:n,relayProtocol:s,namespaces:c,sessionProperties:l}=t,p=this.client.proposal.get(n);let{pairingTopic:m,proposer:y,requiredNamespaces:S,optionalNamespaces:U}=p;m=m||"",hs(S)||(S=o_(c,"approve()"));const A=await this.client.core.crypto.generateKeyPair(),j=y.publicKey,$=await this.client.core.crypto.generateSharedKey(A,j);m&&n&&(await this.client.core.pairing.updateMetadata({topic:m,metadata:y.metadata}),await this.sendResult(n,m,{relay:{protocol:s??"irn"},responderPublicKey:A}),await this.client.proposal.delete(n,Lt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:m}));const H=ar({relay:{protocol:s??"irn"},namespaces:c,requiredNamespaces:S,optionalNamespaces:U,pairingTopic:m,controller:{publicKey:A,metadata:this.client.metadata},expiry:gr(os)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe($),await this.sendRequest($,"wc_sessionSettle",H);const ie=Wo(ar({},H),{topic:$,pairingTopic:m,acknowledged:!1,self:H.controller,peer:{publicKey:y.publicKey,metadata:y.metadata},controller:A});return await this.client.session.set($,ie),await this.setExpiry($,gr(os)),{topic:$,acknowledged:()=>new Promise(ye=>setTimeout(()=>ye(this.client.session.get($)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:n,reason:s}=t,{pairingTopic:c}=this.client.proposal.get(n);c&&(await this.sendError(n,c,s),await this.client.proposal.delete(n,Lt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:n,namespaces:s}=t,c=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:s}),{done:l,resolve:p,reject:m}=Oi();return this.events.once(tt("session_update",c),({error:y})=>{y?m(y):p()}),await this.client.session.update(n,{namespaces:s}),{acknowledged:l}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:n}=t,s=await this.sendRequest(n,"wc_sessionExtend",{}),{done:c,resolve:l,reject:p}=Oi();return this.events.once(tt("session_extend",s),({error:m})=>{m?p(m):l()}),await this.setExpiry(n,gr(os)),{acknowledged:c}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:n,request:s,topic:c,expiry:l}=t,p=await this.sendRequest(c,"wc_sessionRequest",{request:s,chainId:n},l),{done:m,resolve:y,reject:S}=Oi(l);this.events.once(tt("session_request",p),({error:A,result:j})=>{A?S(A):y(j)}),this.client.events.emit("session_request_sent",{topic:c,request:s,chainId:n,id:p});const U=await this.client.core.storage.getItem(Zh);return a_({id:p,topic:c,wcDeepLink:U}),await m()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:n,response:s}=t,{id:c}=s;Dr(s)?await this.sendResult(c,n,s.result):yr(s)&&await this.sendError(c,n,s.error),this.cleanupAfterResponse(t)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:n}=t;if(this.client.session.keys.includes(n)){const s=await this.sendRequest(n,"wc_sessionPing",{}),{done:c,resolve:l,reject:p}=Oi();this.events.once(tt("session_ping",s),({error:m})=>{m?p(m):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:n,event:s,chainId:c}=t;await this.sendRequest(n,"wc_sessionEvent",{event:s,chainId:c})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:n}=t;if(this.client.session.keys.includes(n)){const s=Sa().toString();let c;const l=p=>{(p==null?void 0:p.id.toString())===s&&(this.client.core.relayer.events.removeListener(Ge.message_ack,l),c())};await Promise.all([new Promise(p=>{c=p,this.client.core.relayer.on(Ge.message_ack,l)}),this.sendRequest(n,"wc_sessionDelete",Lt("USER_DISCONNECTED"),void 0,s)]),await this.deleteSession(n)}else await this.client.core.pairing.disconnect({topic:n})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(n=>c_(n,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const n=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(c=>{var l,p;return((l=c.peerMetadata)==null?void 0:l.url)&&((p=c.peerMetadata)==null?void 0:p.url)===t.peer.metadata.url&&c.topic&&c.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(t,n)=>{const{self:s}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Lt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(s.publicKey)&&await this.client.core.crypto.deleteKeyPair(s.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),n||this.client.core.expirer.del(t),this.client.core.storage.removeItem(Zh).catch(c=>this.client.logger.warn(c))},this.deleteProposal=async(t,n)=>{await Promise.all([this.client.proposal.delete(t,Lt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,n),s?Promise.resolve():this.client.core.expirer.del(t)]),this.requestQueue.requests=this.requestQueue.requests.filter(c=>c.id!==t),s&&(this.requestQueue.state=on.idle)},this.setExpiry=async(t,n)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:n}),this.client.core.expirer.set(t,n)},this.setProposal=async(t,n)=>{await this.client.proposal.set(t,n),this.client.core.expirer.set(t,n.expiry)},this.setPendingSessionRequest=async t=>{const n=sn.wc_sessionRequest.req.ttl,{id:s,topic:c,params:l}=t;await this.client.pendingRequest.set(s,{id:s,topic:c,params:l}),n&&this.client.core.expirer.set(s,gr(n))},this.sendRequest=async(t,n,s,c,l)=>{const p=bs(n,s);if(bl()&&Hx.includes(n)){const S=Ci(JSON.stringify(p));await this.client.core.verify.register({attestationId:S})}const m=await this.client.core.crypto.encode(t,p),y=sn[n].req;return c&&(y.ttl=c),l&&(y.id=l),this.client.core.history.set(t,p),this.client.core.relayer.publish(t,m,y),p.id},this.sendResult=async(t,n,s)=>{const c=Pa(t,s),l=await this.client.core.crypto.encode(n,c),p=await this.client.core.history.get(n,t),m=sn[p.request.method].res;this.client.core.relayer.publish(n,l,m),await this.client.core.history.resolve(c)},this.sendError=async(t,n,s)=>{const c=ws(t,s),l=await this.client.core.crypto.encode(n,c),p=await this.client.core.history.get(n,t),m=sn[p.request.method].res;this.client.core.relayer.publish(n,l,m),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],n=[];this.client.session.getAll().forEach(s=>{Kr(s.expiry)&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Kr(s.expiry)&&n.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession(s)),...n.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=t=>{const{topic:n,payload:s}=t,c=s.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(n,s);case"wc_sessionSettle":return this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return this.onSessionExtendRequest(n,s);case"wc_sessionPing":return this.onSessionPingRequest(n,s);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return this.onSessionRequest(n,s);case"wc_sessionEvent":return this.onSessionEventRequest(n,s);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:s}=t,c=(await this.client.core.history.get(n,s.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:n}=t,{message:s}=W("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.onSessionProposeRequest=async(t,n)=>{const{params:s,id:c}=n;try{this.isValidConnect(ar({},n.params));const l=gr(X.FIVE_MINUTES),p=ar({id:c,pairingTopic:t,expiry:l},s);await this.setProposal(c,p);const m=Ci(JSON.stringify(n)),y=await this.getVerifyContext(m,p.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:p,verifyContext:y})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,n)=>{const{id:s}=n;if(Dr(n)){const{result:c}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const p=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:p});const m=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:m});const y=await this.client.core.crypto.generateSharedKey(p,m);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:y});const S=await this.client.core.relayer.subscribe(y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:S}),await this.client.core.pairing.activate({topic:t})}else yr(n)&&(await this.client.proposal.delete(s,Lt("USER_DISCONNECTED")),this.events.emit(tt("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(t,n)=>{const{id:s,params:c}=n;try{this.isValidSessionSettleRequest(c);const{relay:l,controller:p,expiry:m,namespaces:y,requiredNamespaces:S,optionalNamespaces:U,sessionProperties:A,pairingTopic:j}=n.params,$=ar({topic:t,relay:l,expiry:m,namespaces:y,acknowledged:!0,pairingTopic:j,requiredNamespaces:S,optionalNamespaces:U,controller:p.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:p.publicKey,metadata:p.metadata}},A&&{sessionProperties:A});await this.sendResult(n.id,t,!0),this.events.emit(tt("session_connect"),{session:$}),this.cleanupDuplicatePairings($)}catch(l){await this.sendError(s,t,l),this.client.logger.error(l)}},this.onSessionSettleResponse=async(t,n)=>{const{id:s}=n;Dr(n)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(tt("session_approve",s),{})):yr(n)&&(await this.client.session.delete(t,Lt("USER_DISCONNECTED")),this.events.emit(tt("session_approve",s),{error:n.error}))},this.onSessionUpdateRequest=async(t,n)=>{const{params:s,id:c}=n;try{this.isValidUpdate(ar({topic:t},s)),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult(c,t,!0),this.client.events.emit("session_update",{id:c,topic:t,params:s})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionUpdateResponse=(t,n)=>{const{id:s}=n;Dr(n)?this.events.emit(tt("session_update",s),{}):yr(n)&&this.events.emit(tt("session_update",s),{error:n.error})},this.onSessionExtendRequest=async(t,n)=>{const{id:s}=n;try{this.isValidExtend({topic:t}),await this.setExpiry(t,gr(os)),await this.sendResult(s,t,!0),this.client.events.emit("session_extend",{id:s,topic:t})}catch(c){await this.sendError(s,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,n)=>{const{id:s}=n;Dr(n)?this.events.emit(tt("session_extend",s),{}):yr(n)&&this.events.emit(tt("session_extend",s),{error:n.error})},this.onSessionPingRequest=async(t,n)=>{const{id:s}=n;try{this.isValidPing({topic:t}),await this.sendResult(s,t,!0),this.client.events.emit("session_ping",{id:s,topic:t})}catch(c){await this.sendError(s,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,n)=>{const{id:s}=n;setTimeout(()=>{Dr(n)?this.events.emit(tt("session_ping",s),{}):yr(n)&&this.events.emit(tt("session_ping",s),{error:n.error})},500)},this.onSessionDeleteRequest=async(t,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:t,reason:n.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(Ge.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult(s,t,!0)]),this.client.events.emit("session_delete",{id:s,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,n)=>{const{id:s,params:c}=n;try{this.isValidRequest(ar({topic:t},c)),await this.setPendingSessionRequest({id:s,topic:t,params:c}),this.addRequestToQueue({id:s,topic:t,params:c}),await this.processRequestQueue()}catch(l){await this.sendError(s,t,l),this.client.logger.error(l)}},this.onSessionRequestResponse=(t,n)=>{const{id:s}=n;Dr(n)?this.events.emit(tt("session_request",s),{result:n.result}):yr(n)&&this.events.emit(tt("session_request",s),{error:n.error})},this.onSessionEventRequest=async(t,n)=>{const{id:s,params:c}=n;try{this.isValidEmit(ar({topic:t},c)),this.client.events.emit("session_event",{id:s,topic:t,params:c})}catch(l){await this.sendError(s,t,l),this.client.logger.error(l)}},this.addRequestToQueue=t=>{this.requestQueue.requests.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.requestQueue.state=on.idle,this.processRequestQueue()},X.toMiliseconds(this.requestQueueDelay))},this.processRequestQueue=async()=>{if(this.requestQueue.state===on.active){this.client.logger.info("session request queue is already active.");return}const t=this.requestQueue.requests[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:s,params:c}=t,l=Ci(JSON.stringify({id:n,params:c})),p=this.client.session.get(s),m=await this.getVerifyContext(l,p.peer.metadata);this.requestQueue.state=on.active,this.client.events.emit("session_request",{id:n,topic:s,params:c,verifyContext:m})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async t=>{if(!kt(t)){const{message:m}=W("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(m)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:c,sessionProperties:l,relays:p}=t;if(Gr(n)||await this.isValidPairingTopic(n),!u_(p,!0)){const{message:m}=W("MISSING_OR_INVALID",`connect() relays: ${p}`);throw new Error(m)}!Gr(s)&&hs(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Gr(c)&&hs(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),Gr(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,n)=>{const s=h_(t,"connect()",n);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!kt(t))throw new Error(W("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:n,namespaces:s,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(n);const p=this.client.proposal.get(n),m=Lo(s,"approve()");if(m)throw new Error(m.message);const y=ah(p.requiredNamespaces,s,"approve()");if(y)throw new Error(y.message);if(!Ai(c,!0)){const{message:S}=W("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(S)}Gr(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!kt(t)){const{message:c}=W("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:n,reason:s}=t;if(await this.isValidProposalId(n),!l_(s)){const{message:c}=W("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!kt(t)){const{message:y}=W("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(y)}const{relay:n,controller:s,namespaces:c,expiry:l}=t;if(!f_(n)){const{message:y}=W("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(y)}const p=p_(s,"onSessionSettleRequest()");if(p)throw new Error(p.message);const m=Lo(c,"onSessionSettleRequest()");if(m)throw new Error(m.message);if(Kr(l)){const{message:y}=W("EXPIRED","onSessionSettleRequest()");throw new Error(y)}},this.isValidUpdate=async t=>{if(!kt(t)){const{message:m}=W("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(m)}const{topic:n,namespaces:s}=t;await this.isValidSessionTopic(n);const c=this.client.session.get(n),l=Lo(s,"update()");if(l)throw new Error(l.message);const p=ah(c.requiredNamespaces,s,"update()");if(p)throw new Error(p.message)},this.isValidExtend=async t=>{if(!kt(t)){const{message:s}=W("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionTopic(n)},this.isValidRequest=async t=>{if(!kt(t)){const{message:m}=W("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(m)}const{topic:n,request:s,chainId:c,expiry:l}=t;await this.isValidSessionTopic(n);const{namespaces:p}=this.client.session.get(n);if(!ch(p,c)){const{message:m}=W("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(m)}if(!d_(s)){const{message:m}=W("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(m)}if(!g_(p,c,s.method)){const{message:m}=W("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(m)}if(l&&!y_(l,Go)){const{message:m}=W("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${Go.min} and ${Go.max}`);throw new Error(m)}},this.isValidRespond=async t=>{if(!kt(t)){const{message:c}=W("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:n,response:s}=t;if(await this.isValidSessionTopic(n),!v_(s)){const{message:c}=W("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!kt(t)){const{message:s}=W("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async t=>{if(!kt(t)){const{message:p}=W("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(p)}const{topic:n,event:s,chainId:c}=t;await this.isValidSessionTopic(n);const{namespaces:l}=this.client.session.get(n);if(!ch(l,c)){const{message:p}=W("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(p)}if(!m_(s)){const{message:p}=W("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(p)}if(!__(l,c,s.name)){const{message:p}=W("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(p)}},this.isValidDisconnect=async t=>{if(!kt(t)){const{message:s}=W("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(t,n)=>{const s={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:n.verifyUrl});c&&(s.verified.origin=c,s.verified.validation=c===n.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(s)}`),s},this.validateSessionProps=(t,n)=>{Object.values(t).forEach(s=>{if(!Ai(s,!1)){const{message:c}=W("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:r}=W("NOT_INITIALIZED",this.name);throw new Error(r)}}registerRelayerEvents(){this.client.core.relayer.on(Ge.message,async r=>{const{topic:t,message:n}=r;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const s=await this.client.core.crypto.decode(t,n);try{Oa(s)?(this.client.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):Es(s)?(await this.client.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.client.core.history.delete(t,s.id)):this.onRelayEventUnknownPayload({topic:t,payload:s})}catch(c){this.client.logger.error(c)}})}registerExpirerEvents(){this.client.core.expirer.on(cr.expired,async r=>{const{topic:t,id:n}=_l(r.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,W("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(r){if(!Ai(r,!1)){const{message:t}=W("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(r)){const{message:t}=W("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(t)}if(Kr(this.client.core.pairing.pairings.get(r).expiry)){const{message:t}=W("EXPIRED",`pairing topic: ${r}`);throw new Error(t)}}async isValidSessionTopic(r){if(!Ai(r,!1)){const{message:t}=W("MISSING_OR_INVALID",`session topic should be a string: ${r}`);throw new Error(t)}if(!this.client.session.keys.includes(r)){const{message:t}=W("NO_MATCHING_KEY",`session topic doesn't exist: ${r}`);throw new Error(t)}if(Kr(this.client.session.get(r).expiry)){await this.deleteSession(r);const{message:t}=W("EXPIRED",`session topic: ${r}`);throw new Error(t)}}async isValidSessionOrPairingTopic(r){if(this.client.session.keys.includes(r))await this.isValidSessionTopic(r);else if(this.client.core.pairing.pairings.keys.includes(r))this.isValidPairingTopic(r);else if(Ai(r,!1)){const{message:t}=W("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${r}`);throw new Error(t)}else{const{message:t}=W("MISSING_OR_INVALID",`session or pairing topic should be a string: ${r}`);throw new Error(t)}}async isValidProposalId(r){if(!b_(r)){const{message:t}=W("MISSING_OR_INVALID",`proposal id should be a number: ${r}`);throw new Error(t)}if(!this.client.proposal.keys.includes(r)){const{message:t}=W("NO_MATCHING_KEY",`proposal id doesn't exist: ${r}`);throw new Error(t)}if(Kr(this.client.proposal.get(r).expiry)){await this.deleteProposal(r);const{message:t}=W("EXPIRED",`proposal id: ${r}`);throw new Error(t)}}}class Yx extends Is{constructor(r,t){super(r,t,qx,Ca),this.core=r,this.logger=t}}class Qx extends Is{constructor(r,t){super(r,t,Ux,Ca),this.core=r,this.logger=t}}class Xx extends Is{constructor(r,t){super(r,t,kx,Ca,n=>n.id),this.core=r,this.logger=t}}let Zx=class vf extends cb{constructor(r){super(r),this.protocol=pf,this.version=df,this.name=Ko.name,this.events=new Qt.EventEmitter,this.on=(n,s)=>this.events.on(n,s),this.once=(n,s)=>this.events.once(n,s),this.off=(n,s)=>this.events.off(n,s),this.removeListener=(n,s)=>this.events.removeListener(n,s),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}},this.update=async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}},this.request=async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}},this.find=n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(r==null?void 0:r.name)||Ko.name,this.metadata=(r==null?void 0:r.metadata)||s_();const t=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:Ee.pino(Ee.getDefaultLoggerOptions({level:(r==null?void 0:r.logger)||Ko.logger}));this.core=(r==null?void 0:r.core)||new Mx(r),this.logger=Ee.generateChildLogger(t,this.name),this.session=new Qx(this.core,this.logger),this.proposal=new Yx(this.core,this.logger),this.pendingRequest=new Xx(this.core,this.logger),this.engine=new Jx(this)}static async init(r){const t=new vf(r);return await t.initialize(),t}get context(){return Ee.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(r){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(r.message),r}}};var da={exports:{}};(function(a,r){var t=typeof self<"u"?self:Er,n=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(l){var p={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function m(v){return v&&DataView.prototype.isPrototypeOf(v)}if(p.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],S=ArrayBuffer.isView||function(v){return v&&y.indexOf(Object.prototype.toString.call(v))>-1};function U(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(v))throw new TypeError("Invalid character in header field name");return v.toLowerCase()}function A(v){return typeof v!="string"&&(v=String(v)),v}function j(v){var E={next:function(){var J=v.shift();return{done:J===void 0,value:J}}};return p.iterable&&(E[Symbol.iterator]=function(){return E}),E}function $(v){this.map={},v instanceof $?v.forEach(function(E,J){this.append(J,E)},this):Array.isArray(v)?v.forEach(function(E){this.append(E[0],E[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(E){this.append(E,v[E])},this)}$.prototype.append=function(v,E){v=U(v),E=A(E);var J=this.map[v];this.map[v]=J?J+", "+E:E},$.prototype.delete=function(v){delete this.map[U(v)]},$.prototype.get=function(v){return v=U(v),this.has(v)?this.map[v]:null},$.prototype.has=function(v){return this.map.hasOwnProperty(U(v))},$.prototype.set=function(v,E){this.map[U(v)]=A(E)},$.prototype.forEach=function(v,E){for(var J in this.map)this.map.hasOwnProperty(J)&&v.call(E,this.map[J],J,this)},$.prototype.keys=function(){var v=[];return this.forEach(function(E,J){v.push(J)}),j(v)},$.prototype.values=function(){var v=[];return this.forEach(function(E){v.push(E)}),j(v)},$.prototype.entries=function(){var v=[];return this.forEach(function(E,J){v.push([J,E])}),j(v)},p.iterable&&($.prototype[Symbol.iterator]=$.prototype.entries);function H(v){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}function ie(v){return new Promise(function(E,J){v.onload=function(){E(v.result)},v.onerror=function(){J(v.error)}})}function ye(v){var E=new FileReader,J=ie(E);return E.readAsArrayBuffer(v),J}function _e(v){var E=new FileReader,J=ie(E);return E.readAsText(v),J}function le(v){for(var E=new Uint8Array(v),J=new Array(E.length),ne=0;ne<E.length;ne++)J[ne]=String.fromCharCode(E[ne]);return J.join("")}function oe(v){if(v.slice)return v.slice(0);var E=new Uint8Array(v.byteLength);return E.set(new Uint8Array(v)),E.buffer}function ce(){return this.bodyUsed=!1,this._initBody=function(v){this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:p.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:p.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:p.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():p.arrayBuffer&&p.blob&&m(v)?(this._bodyArrayBuffer=oe(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):p.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||S(v))?this._bodyArrayBuffer=oe(v):this._bodyText=v=Object.prototype.toString.call(v):this._bodyText="",this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob&&(this.blob=function(){var v=H(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?H(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ye)}),this.text=function(){var v=H(this);if(v)return v;if(this._bodyBlob)return _e(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(le(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(fe)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function q(v){var E=v.toUpperCase();return T.indexOf(E)>-1?E:v}function V(v,E){E=E||{};var J=E.body;if(v instanceof V){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,E.headers||(this.headers=new $(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!J&&v._bodyInit!=null&&(J=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new $(E.headers)),this.method=q(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&J)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(J)}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})};function fe(v){var E=new FormData;return v.trim().split("&").forEach(function(J){if(J){var ne=J.split("="),k=ne.shift().replace(/\+/g," "),M=ne.join("=").replace(/\+/g," ");E.append(decodeURIComponent(k),decodeURIComponent(M))}}),E}function Z(v){var E=new $,J=v.replace(/\r?\n[\t ]+/g," ");return J.split(/\r?\n/).forEach(function(ne){var k=ne.split(":"),M=k.shift().trim();if(M){var z=k.join(":").trim();E.append(M,z)}}),E}ce.call(V.prototype);function se(v,E){E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new $(E.headers),this.url=E.url||"",this._initBody(v)}ce.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new $(this.headers),url:this.url})},se.error=function(){var v=new se(null,{status:0,statusText:""});return v.type="error",v};var Oe=[301,302,303,307,308];se.redirect=function(v,E){if(Oe.indexOf(E)===-1)throw new RangeError("Invalid status code");return new se(null,{status:E,headers:{location:v}})},l.DOMException=c.DOMException;try{new l.DOMException}catch{l.DOMException=function(E,J){this.message=E,this.name=J;var ne=Error(E);this.stack=ne.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function De(v,E){return new Promise(function(J,ne){var k=new V(v,E);if(k.signal&&k.signal.aborted)return ne(new l.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function z(){M.abort()}M.onload=function(){var B={status:M.status,statusText:M.statusText,headers:Z(M.getAllResponseHeaders()||"")};B.url="responseURL"in M?M.responseURL:B.headers.get("X-Request-URL");var qe="response"in M?M.response:M.responseText;J(new se(qe,B))},M.onerror=function(){ne(new TypeError("Network request failed"))},M.ontimeout=function(){ne(new TypeError("Network request failed"))},M.onabort=function(){ne(new l.DOMException("Aborted","AbortError"))},M.open(k.method,k.url,!0),k.credentials==="include"?M.withCredentials=!0:k.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&p.blob&&(M.responseType="blob"),k.headers.forEach(function(B,qe){M.setRequestHeader(qe,B)}),k.signal&&(k.signal.addEventListener("abort",z),M.onreadystatechange=function(){M.readyState===4&&k.signal.removeEventListener("abort",z)}),M.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return De.polyfill=!0,c.fetch||(c.fetch=De,c.Headers=$,c.Request=V,c.Response=se),l.Headers=$,l.Request=V,l.Response=se,l.fetch=De,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;r=s.fetch,r.default=s.fetch,r.fetch=s.fetch,r.Headers=s.Headers,r.Request=s.Request,r.Response=s.Response,a.exports=r})(da,da.exports);var eI=da.exports;const rl=gl(eI),tI={Accept:"application/json","Content-Type":"application/json"},rI="POST",il={headers:tI,method:rI},nl=10;class hi{constructor(r,t=!1){if(this.url=r,this.disableProviderPing=t,this.events=new Qt.EventEmitter,this.isAvailable=!1,this.registering=!1,!Ch(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);this.url=r,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async open(r=this.url){await this.register(r)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(r,t){this.isAvailable||await this.register();try{const n=pn(r),c=await(await rl(this.url,Object.assign(Object.assign({},il),{body:n}))).json();this.onPayload({data:c})}catch(n){this.onError(r.id,n)}}async register(r=this.url){if(!Ch(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,s)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),s(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=r,this.registering=!0;try{if(!this.disableProviderPing){const t=pn({id:1,jsonrpc:"2.0",method:"test",params:[]});await rl(r,Object.assign(Object.assign({},il),{body:t}))}this.onOpen()}catch(t){const n=this.parseError(t);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(r){if(typeof r.data>"u")return;const t=typeof r.data=="string"?Ea(r.data):r.data;this.events.emit("payload",t)}onError(r,t){const n=this.parseError(t),s=n.message||n.toString(),c=ws(r,s);this.events.emit("payload",c)}parseError(r,t=this.url){return Kl(r,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>nl&&this.events.setMaxListeners(nl)}}const sl="error",iI="wss://relay.walletconnect.com",nI="wc",sI="universal_provider",ol=`${nI}@2:${sI}:`,oI="https://rpc.walletconnect.com/v1",Yr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var an=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ga={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(a,r){(function(){var t,n="4.17.21",s=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",p="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",y=500,S="__lodash_placeholder__",U=1,A=2,j=4,$=1,H=2,ie=1,ye=2,_e=4,le=8,oe=16,ce=32,T=64,q=128,V=256,fe=512,Z=30,se="...",Oe=800,De=16,v=1,E=2,J=3,ne=1/0,k=9007199254740991,M=17976931348623157e292,z=0/0,B=4294967295,qe=B-1,je=B>>>1,Fr=[["ary",q],["bind",ie],["bindKey",ye],["curry",le],["curryRight",oe],["flip",fe],["partial",ce],["partialRight",T],["rearg",V]],Ht="[object Arguments]",xt="[object Array]",R="[object AsyncFunction]",C="[object Boolean]",P="[object Date]",h="[object DOMException]",w="[object Error]",Q="[object Function]",ue="[object GeneratorFunction]",ve="[object Map]",Se="[object Number]",Ae="[object Null]",xe="[object Object]",at="[object Promise]",rt="[object Proxy]",We="[object RegExp]",Ce="[object Set]",ze="[object String]",ke="[object Symbol]",Je="[object Undefined]",Fe="[object WeakMap]",He="[object WeakSet]",Ne="[object ArrayBuffer]",Be="[object DataView]",it="[object Float32Array]",ct="[object Float64Array]",It="[object Int8Array]",At="[object Int16Array]",Tt="[object Int32Array]",jt="[object Uint8Array]",Bt="[object Uint8ClampedArray]",Xt="[object Uint16Array]",hr="[object Uint32Array]",Lr=/\b__p \+= '';/g,Qr=/\b(__p \+=) '' \+/g,li=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fi=/&(?:amp|lt|gt|quot|#39);/g,Di=/[&<>"']/g,ut=RegExp(fi.source),ht=RegExp(Di.source),lt=/<%-([\s\S]+?)%>/g,ft=/<%([\s\S]+?)%>/g,nt=/<%=([\s\S]+?)%>/g,pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dt=/^\w*$/,gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/[\\^$.*+?()[\]{}|]/g,yt=RegExp(Ze.source),et=/^\s+/,vt=/\s/,mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_t=/\{\n\/\* \[wrapped with (.+)\] \*/,bt=/,? & /,wt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bf=/[()=,{}\[\]\/\s]/,wf=/\\(\\)?/g,Ef=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$a=/\w*$/,xf=/^[-+]0x[0-9a-f]+$/i,If=/^0b[01]+$/i,Sf=/^\[object .+?Constructor\]$/,Pf=/^0o[0-7]+$/i,Of=/^(?:0|[1-9]\d*)$/,Af=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mn=/($^)/,Rf=/['\n\r\u2028\u2029\\]/g,_n="\\ud800-\\udfff",Cf="\\u0300-\\u036f",Tf="\\ufe20-\\ufe2f",Nf="\\u20d0-\\u20ff",Da=Cf+Tf+Nf,Fa="\\u2700-\\u27bf",La="a-z\\xdf-\\xf6\\xf8-\\xff",$f="\\xac\\xb1\\xd7\\xf7",Df="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ff="\\u2000-\\u206f",Lf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ja="A-Z\\xc0-\\xd6\\xd8-\\xde",Ma="\\ufe0e\\ufe0f",qa=$f+Df+Ff+Lf,Ss="[']",jf="["+_n+"]",Ua="["+qa+"]",bn="["+Da+"]",za="\\d+",Mf="["+Fa+"]",ka="["+La+"]",Ha="[^"+_n+qa+za+Fa+La+ja+"]",Ps="\\ud83c[\\udffb-\\udfff]",qf="(?:"+bn+"|"+Ps+")",Ba="[^"+_n+"]",Os="(?:\\ud83c[\\udde6-\\uddff]){2}",As="[\\ud800-\\udbff][\\udc00-\\udfff]",pi="["+ja+"]",Va="\\u200d",Ka="(?:"+ka+"|"+Ha+")",Uf="(?:"+pi+"|"+Ha+")",Ga="(?:"+Ss+"(?:d|ll|m|re|s|t|ve))?",Wa="(?:"+Ss+"(?:D|LL|M|RE|S|T|VE))?",Ja=qf+"?",Ya="["+Ma+"]?",zf="(?:"+Va+"(?:"+[Ba,Os,As].join("|")+")"+Ya+Ja+")*",kf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qa=Ya+Ja+zf,Bf="(?:"+[Mf,Os,As].join("|")+")"+Qa,Vf="(?:"+[Ba+bn+"?",bn,Os,As,jf].join("|")+")",Kf=RegExp(Ss,"g"),Gf=RegExp(bn,"g"),Rs=RegExp(Ps+"(?="+Ps+")|"+Vf+Qa,"g"),Wf=RegExp([pi+"?"+ka+"+"+Ga+"(?="+[Ua,pi,"$"].join("|")+")",Uf+"+"+Wa+"(?="+[Ua,pi+Ka,"$"].join("|")+")",pi+"?"+Ka+"+"+Ga,pi+"+"+Wa,Hf,kf,za,Bf].join("|"),"g"),Jf=RegExp("["+Va+_n+Da+Ma+"]"),Yf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xf=-1,Me={};Me[it]=Me[ct]=Me[It]=Me[At]=Me[Tt]=Me[jt]=Me[Bt]=Me[Xt]=Me[hr]=!0,Me[Ht]=Me[xt]=Me[Ne]=Me[C]=Me[Be]=Me[P]=Me[w]=Me[Q]=Me[ve]=Me[Se]=Me[xe]=Me[We]=Me[Ce]=Me[ze]=Me[Fe]=!1;var Le={};Le[Ht]=Le[xt]=Le[Ne]=Le[Be]=Le[C]=Le[P]=Le[it]=Le[ct]=Le[It]=Le[At]=Le[Tt]=Le[ve]=Le[Se]=Le[xe]=Le[We]=Le[Ce]=Le[ze]=Le[ke]=Le[jt]=Le[Bt]=Le[Xt]=Le[hr]=!0,Le[w]=Le[Q]=Le[Fe]=!1;var Zf={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ep={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tp={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ip=parseFloat,np=parseInt,Xa=typeof an=="object"&&an&&an.Object===Object&&an,sp=typeof self=="object"&&self&&self.Object===Object&&self,St=Xa||sp||Function("return this")(),Cs=r&&!r.nodeType&&r,Xr=Cs&&!0&&a&&!a.nodeType&&a,Za=Xr&&Xr.exports===Cs,Ts=Za&&Xa.process,Zt=function(){try{var x=Xr&&Xr.require&&Xr.require("util").types;return x||Ts&&Ts.binding&&Ts.binding("util")}catch{}}(),ec=Zt&&Zt.isArrayBuffer,tc=Zt&&Zt.isDate,rc=Zt&&Zt.isMap,ic=Zt&&Zt.isRegExp,nc=Zt&&Zt.isSet,sc=Zt&&Zt.isTypedArray;function Vt(x,N,O){switch(O.length){case 0:return x.call(N);case 1:return x.call(N,O[0]);case 2:return x.call(N,O[0],O[1]);case 3:return x.call(N,O[0],O[1],O[2])}return x.apply(N,O)}function op(x,N,O,G){for(var ae=-1,Ie=x==null?0:x.length;++ae<Ie;){var st=x[ae];N(G,st,O(st),x)}return G}function er(x,N){for(var O=-1,G=x==null?0:x.length;++O<G&&N(x[O],O,x)!==!1;);return x}function ap(x,N){for(var O=x==null?0:x.length;O--&&N(x[O],O,x)!==!1;);return x}function oc(x,N){for(var O=-1,G=x==null?0:x.length;++O<G;)if(!N(x[O],O,x))return!1;return!0}function jr(x,N){for(var O=-1,G=x==null?0:x.length,ae=0,Ie=[];++O<G;){var st=x[O];N(st,O,x)&&(Ie[ae++]=st)}return Ie}function wn(x,N){var O=x==null?0:x.length;return!!O&&di(x,N,0)>-1}function Ns(x,N,O){for(var G=-1,ae=x==null?0:x.length;++G<ae;)if(O(N,x[G]))return!0;return!1}function Ue(x,N){for(var O=-1,G=x==null?0:x.length,ae=Array(G);++O<G;)ae[O]=N(x[O],O,x);return ae}function Mr(x,N){for(var O=-1,G=N.length,ae=x.length;++O<G;)x[ae+O]=N[O];return x}function $s(x,N,O,G){var ae=-1,Ie=x==null?0:x.length;for(G&&Ie&&(O=x[++ae]);++ae<Ie;)O=N(O,x[ae],ae,x);return O}function cp(x,N,O,G){var ae=x==null?0:x.length;for(G&&ae&&(O=x[--ae]);ae--;)O=N(O,x[ae],ae,x);return O}function Ds(x,N){for(var O=-1,G=x==null?0:x.length;++O<G;)if(N(x[O],O,x))return!0;return!1}var up=Fs("length");function hp(x){return x.split("")}function lp(x){return x.match(wt)||[]}function ac(x,N,O){var G;return O(x,function(ae,Ie,st){if(N(ae,Ie,st))return G=Ie,!1}),G}function En(x,N,O,G){for(var ae=x.length,Ie=O+(G?1:-1);G?Ie--:++Ie<ae;)if(N(x[Ie],Ie,x))return Ie;return-1}function di(x,N,O){return N===N?xp(x,N,O):En(x,cc,O)}function fp(x,N,O,G){for(var ae=O-1,Ie=x.length;++ae<Ie;)if(G(x[ae],N))return ae;return-1}function cc(x){return x!==x}function uc(x,N){var O=x==null?0:x.length;return O?js(x,N)/O:z}function Fs(x){return function(N){return N==null?t:N[x]}}function Ls(x){return function(N){return x==null?t:x[N]}}function hc(x,N,O,G,ae){return ae(x,function(Ie,st,$e){O=G?(G=!1,Ie):N(O,Ie,st,$e)}),O}function pp(x,N){var O=x.length;for(x.sort(N);O--;)x[O]=x[O].value;return x}function js(x,N){for(var O,G=-1,ae=x.length;++G<ae;){var Ie=N(x[G]);Ie!==t&&(O=O===t?Ie:O+Ie)}return O}function Ms(x,N){for(var O=-1,G=Array(x);++O<x;)G[O]=N(O);return G}function dp(x,N){return Ue(N,function(O){return[O,x[O]]})}function lc(x){return x&&x.slice(0,gc(x)+1).replace(et,"")}function Kt(x){return function(N){return x(N)}}function qs(x,N){return Ue(N,function(O){return x[O]})}function Fi(x,N){return x.has(N)}function fc(x,N){for(var O=-1,G=x.length;++O<G&&di(N,x[O],0)>-1;);return O}function pc(x,N){for(var O=x.length;O--&&di(N,x[O],0)>-1;);return O}function gp(x,N){for(var O=x.length,G=0;O--;)x[O]===N&&++G;return G}var yp=Ls(Zf),vp=Ls(ep);function mp(x){return"\\"+rp[x]}function _p(x,N){return x==null?t:x[N]}function gi(x){return Jf.test(x)}function bp(x){return Yf.test(x)}function wp(x){for(var N,O=[];!(N=x.next()).done;)O.push(N.value);return O}function Us(x){var N=-1,O=Array(x.size);return x.forEach(function(G,ae){O[++N]=[ae,G]}),O}function dc(x,N){return function(O){return x(N(O))}}function qr(x,N){for(var O=-1,G=x.length,ae=0,Ie=[];++O<G;){var st=x[O];(st===N||st===S)&&(x[O]=S,Ie[ae++]=O)}return Ie}function xn(x){var N=-1,O=Array(x.size);return x.forEach(function(G){O[++N]=G}),O}function Ep(x){var N=-1,O=Array(x.size);return x.forEach(function(G){O[++N]=[G,G]}),O}function xp(x,N,O){for(var G=O-1,ae=x.length;++G<ae;)if(x[G]===N)return G;return-1}function Ip(x,N,O){for(var G=O+1;G--;)if(x[G]===N)return G;return G}function yi(x){return gi(x)?Pp(x):up(x)}function lr(x){return gi(x)?Op(x):hp(x)}function gc(x){for(var N=x.length;N--&&vt.test(x.charAt(N)););return N}var Sp=Ls(tp);function Pp(x){for(var N=Rs.lastIndex=0;Rs.test(x);)++N;return N}function Op(x){return x.match(Rs)||[]}function Ap(x){return x.match(Wf)||[]}var Rp=function x(N){N=N==null?St:vi.defaults(St.Object(),N,vi.pick(St,Qf));var O=N.Array,G=N.Date,ae=N.Error,Ie=N.Function,st=N.Math,$e=N.Object,zs=N.RegExp,Cp=N.String,tr=N.TypeError,In=O.prototype,Tp=Ie.prototype,mi=$e.prototype,Sn=N["__core-js_shared__"],Pn=Tp.toString,Re=mi.hasOwnProperty,Np=0,yc=function(){var e=/[^.]+$/.exec(Sn&&Sn.keys&&Sn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),On=mi.toString,$p=Pn.call($e),Dp=St._,Fp=zs("^"+Pn.call(Re).replace(Ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),An=Za?N.Buffer:t,Ur=N.Symbol,Rn=N.Uint8Array,vc=An?An.allocUnsafe:t,Cn=dc($e.getPrototypeOf,$e),mc=$e.create,_c=mi.propertyIsEnumerable,Tn=In.splice,bc=Ur?Ur.isConcatSpreadable:t,Li=Ur?Ur.iterator:t,Zr=Ur?Ur.toStringTag:t,Nn=function(){try{var e=ni($e,"defineProperty");return e({},"",{}),e}catch{}}(),Lp=N.clearTimeout!==St.clearTimeout&&N.clearTimeout,jp=G&&G.now!==St.Date.now&&G.now,Mp=N.setTimeout!==St.setTimeout&&N.setTimeout,$n=st.ceil,Dn=st.floor,ks=$e.getOwnPropertySymbols,qp=An?An.isBuffer:t,wc=N.isFinite,Up=In.join,zp=dc($e.keys,$e),ot=st.max,Rt=st.min,kp=G.now,Hp=N.parseInt,Ec=st.random,Bp=In.reverse,Hs=ni(N,"DataView"),ji=ni(N,"Map"),Bs=ni(N,"Promise"),_i=ni(N,"Set"),Mi=ni(N,"WeakMap"),qi=ni($e,"create"),Fn=Mi&&new Mi,bi={},Vp=si(Hs),Kp=si(ji),Gp=si(Bs),Wp=si(_i),Jp=si(Mi),Ln=Ur?Ur.prototype:t,Ui=Ln?Ln.valueOf:t,xc=Ln?Ln.toString:t;function d(e){if(Ke(e)&&!he(e)&&!(e instanceof be)){if(e instanceof rr)return e;if(Re.call(e,"__wrapped__"))return Iu(e)}return new rr(e)}var wi=function(){function e(){}return function(i){if(!Ve(i))return{};if(mc)return mc(i);e.prototype=i;var o=new e;return e.prototype=t,o}}();function jn(){}function rr(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}d.templateSettings={escape:lt,evaluate:ft,interpolate:nt,variable:"",imports:{_:d}},d.prototype=jn.prototype,d.prototype.constructor=d,rr.prototype=wi(jn.prototype),rr.prototype.constructor=rr;function be(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Yp(){var e=new be(this.__wrapped__);return e.__actions__=Mt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mt(this.__views__),e}function Qp(){if(this.__filtered__){var e=new be(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Xp(){var e=this.__wrapped__.value(),i=this.__dir__,o=he(e),u=i<0,f=o?e.length:0,g=hg(0,f,this.__views__),_=g.start,b=g.end,I=b-_,D=u?b:_-1,F=this.__iteratees__,L=F.length,K=0,Y=Rt(I,this.__takeCount__);if(!o||!u&&f==I&&Y==I)return Gc(e,this.__actions__);var te=[];e:for(;I--&&K<Y;){D+=i;for(var de=-1,re=e[D];++de<L;){var me=F[de],we=me.iteratee,Jt=me.type,Dt=we(re);if(Jt==E)re=Dt;else if(!Dt){if(Jt==v)continue e;break e}}te[K++]=re}return te}be.prototype=wi(jn.prototype),be.prototype.constructor=be;function ei(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var u=e[i];this.set(u[0],u[1])}}function Zp(){this.__data__=qi?qi(null):{},this.size=0}function ed(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function td(e){var i=this.__data__;if(qi){var o=i[e];return o===m?t:o}return Re.call(i,e)?i[e]:t}function rd(e){var i=this.__data__;return qi?i[e]!==t:Re.call(i,e)}function id(e,i){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=qi&&i===t?m:i,this}ei.prototype.clear=Zp,ei.prototype.delete=ed,ei.prototype.get=td,ei.prototype.has=rd,ei.prototype.set=id;function xr(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var u=e[i];this.set(u[0],u[1])}}function nd(){this.__data__=[],this.size=0}function sd(e){var i=this.__data__,o=Mn(i,e);if(o<0)return!1;var u=i.length-1;return o==u?i.pop():Tn.call(i,o,1),--this.size,!0}function od(e){var i=this.__data__,o=Mn(i,e);return o<0?t:i[o][1]}function ad(e){return Mn(this.__data__,e)>-1}function cd(e,i){var o=this.__data__,u=Mn(o,e);return u<0?(++this.size,o.push([e,i])):o[u][1]=i,this}xr.prototype.clear=nd,xr.prototype.delete=sd,xr.prototype.get=od,xr.prototype.has=ad,xr.prototype.set=cd;function Ir(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var u=e[i];this.set(u[0],u[1])}}function ud(){this.size=0,this.__data__={hash:new ei,map:new(ji||xr),string:new ei}}function hd(e){var i=Yn(this,e).delete(e);return this.size-=i?1:0,i}function ld(e){return Yn(this,e).get(e)}function fd(e){return Yn(this,e).has(e)}function pd(e,i){var o=Yn(this,e),u=o.size;return o.set(e,i),this.size+=o.size==u?0:1,this}Ir.prototype.clear=ud,Ir.prototype.delete=hd,Ir.prototype.get=ld,Ir.prototype.has=fd,Ir.prototype.set=pd;function ti(e){var i=-1,o=e==null?0:e.length;for(this.__data__=new Ir;++i<o;)this.add(e[i])}function dd(e){return this.__data__.set(e,m),this}function gd(e){return this.__data__.has(e)}ti.prototype.add=ti.prototype.push=dd,ti.prototype.has=gd;function fr(e){var i=this.__data__=new xr(e);this.size=i.size}function yd(){this.__data__=new xr,this.size=0}function vd(e){var i=this.__data__,o=i.delete(e);return this.size=i.size,o}function md(e){return this.__data__.get(e)}function _d(e){return this.__data__.has(e)}function bd(e,i){var o=this.__data__;if(o instanceof xr){var u=o.__data__;if(!ji||u.length<s-1)return u.push([e,i]),this.size=++o.size,this;o=this.__data__=new Ir(u)}return o.set(e,i),this.size=o.size,this}fr.prototype.clear=yd,fr.prototype.delete=vd,fr.prototype.get=md,fr.prototype.has=_d,fr.prototype.set=bd;function Ic(e,i){var o=he(e),u=!o&&oi(e),f=!o&&!u&&Vr(e),g=!o&&!u&&!f&&Si(e),_=o||u||f||g,b=_?Ms(e.length,Cp):[],I=b.length;for(var D in e)(i||Re.call(e,D))&&!(_&&(D=="length"||f&&(D=="offset"||D=="parent")||g&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||Ar(D,I)))&&b.push(D);return b}function Sc(e){var i=e.length;return i?e[to(0,i-1)]:t}function wd(e,i){return Qn(Mt(e),ri(i,0,e.length))}function Ed(e){return Qn(Mt(e))}function Vs(e,i,o){(o!==t&&!pr(e[i],o)||o===t&&!(i in e))&&Sr(e,i,o)}function zi(e,i,o){var u=e[i];(!(Re.call(e,i)&&pr(u,o))||o===t&&!(i in e))&&Sr(e,i,o)}function Mn(e,i){for(var o=e.length;o--;)if(pr(e[o][0],i))return o;return-1}function xd(e,i,o,u){return zr(e,function(f,g,_){i(u,f,o(f),_)}),u}function Pc(e,i){return e&&mr(i,Et(i),e)}function Id(e,i){return e&&mr(i,Ut(i),e)}function Sr(e,i,o){i=="__proto__"&&Nn?Nn(e,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[i]=o}function Ks(e,i){for(var o=-1,u=i.length,f=O(u),g=e==null;++o<u;)f[o]=g?t:Oo(e,i[o]);return f}function ri(e,i,o){return e===e&&(o!==t&&(e=e<=o?e:o),i!==t&&(e=e>=i?e:i)),e}function ir(e,i,o,u,f,g){var _,b=i&U,I=i&A,D=i&j;if(o&&(_=f?o(e,u,f,g):o(e)),_!==t)return _;if(!Ve(e))return e;var F=he(e);if(F){if(_=fg(e),!b)return Mt(e,_)}else{var L=Ct(e),K=L==Q||L==ue;if(Vr(e))return Yc(e,b);if(L==xe||L==Ht||K&&!f){if(_=I||K?{}:gu(e),!b)return I?tg(e,Id(_,e)):eg(e,Pc(_,e))}else{if(!Le[L])return f?e:{};_=pg(e,L,b)}}g||(g=new fr);var Y=g.get(e);if(Y)return Y;g.set(e,_),Bu(e)?e.forEach(function(re){_.add(ir(re,i,o,re,e,g))}):ku(e)&&e.forEach(function(re,me){_.set(me,ir(re,i,o,me,e,g))});var te=D?I?fo:lo:I?Ut:Et,de=F?t:te(e);return er(de||e,function(re,me){de&&(me=re,re=e[me]),zi(_,me,ir(re,i,o,me,e,g))}),_}function Sd(e){var i=Et(e);return function(o){return Oc(o,e,i)}}function Oc(e,i,o){var u=o.length;if(e==null)return!u;for(e=$e(e);u--;){var f=o[u],g=i[f],_=e[f];if(_===t&&!(f in e)||!g(_))return!1}return!0}function Ac(e,i,o){if(typeof e!="function")throw new tr(l);return Wi(function(){e.apply(t,o)},i)}function ki(e,i,o,u){var f=-1,g=wn,_=!0,b=e.length,I=[],D=i.length;if(!b)return I;o&&(i=Ue(i,Kt(o))),u?(g=Ns,_=!1):i.length>=s&&(g=Fi,_=!1,i=new ti(i));e:for(;++f<b;){var F=e[f],L=o==null?F:o(F);if(F=u||F!==0?F:0,_&&L===L){for(var K=D;K--;)if(i[K]===L)continue e;I.push(F)}else g(i,L,u)||I.push(F)}return I}var zr=tu(vr),Rc=tu(Ws,!0);function Pd(e,i){var o=!0;return zr(e,function(u,f,g){return o=!!i(u,f,g),o}),o}function qn(e,i,o){for(var u=-1,f=e.length;++u<f;){var g=e[u],_=i(g);if(_!=null&&(b===t?_===_&&!Wt(_):o(_,b)))var b=_,I=g}return I}function Od(e,i,o,u){var f=e.length;for(o=pe(o),o<0&&(o=-o>f?0:f+o),u=u===t||u>f?f:pe(u),u<0&&(u+=f),u=o>u?0:Ku(u);o<u;)e[o++]=i;return e}function Cc(e,i){var o=[];return zr(e,function(u,f,g){i(u,f,g)&&o.push(u)}),o}function Pt(e,i,o,u,f){var g=-1,_=e.length;for(o||(o=gg),f||(f=[]);++g<_;){var b=e[g];i>0&&o(b)?i>1?Pt(b,i-1,o,u,f):Mr(f,b):u||(f[f.length]=b)}return f}var Gs=ru(),Tc=ru(!0);function vr(e,i){return e&&Gs(e,i,Et)}function Ws(e,i){return e&&Tc(e,i,Et)}function Un(e,i){return jr(i,function(o){return Rr(e[o])})}function ii(e,i){i=Hr(i,e);for(var o=0,u=i.length;e!=null&&o<u;)e=e[_r(i[o++])];return o&&o==u?e:t}function Nc(e,i,o){var u=i(e);return he(e)?u:Mr(u,o(e))}function Nt(e){return e==null?e===t?Je:Ae:Zr&&Zr in $e(e)?ug(e):Eg(e)}function Js(e,i){return e>i}function Ad(e,i){return e!=null&&Re.call(e,i)}function Rd(e,i){return e!=null&&i in $e(e)}function Cd(e,i,o){return e>=Rt(i,o)&&e<ot(i,o)}function Ys(e,i,o){for(var u=o?Ns:wn,f=e[0].length,g=e.length,_=g,b=O(g),I=1/0,D=[];_--;){var F=e[_];_&&i&&(F=Ue(F,Kt(i))),I=Rt(F.length,I),b[_]=!o&&(i||f>=120&&F.length>=120)?new ti(_&&F):t}F=e[0];var L=-1,K=b[0];e:for(;++L<f&&D.length<I;){var Y=F[L],te=i?i(Y):Y;if(Y=o||Y!==0?Y:0,!(K?Fi(K,te):u(D,te,o))){for(_=g;--_;){var de=b[_];if(!(de?Fi(de,te):u(e[_],te,o)))continue e}K&&K.push(te),D.push(Y)}}return D}function Td(e,i,o,u){return vr(e,function(f,g,_){i(u,o(f),g,_)}),u}function Hi(e,i,o){i=Hr(i,e),e=_u(e,i);var u=e==null?e:e[_r(sr(i))];return u==null?t:Vt(u,e,o)}function $c(e){return Ke(e)&&Nt(e)==Ht}function Nd(e){return Ke(e)&&Nt(e)==Ne}function $d(e){return Ke(e)&&Nt(e)==P}function Bi(e,i,o,u,f){return e===i?!0:e==null||i==null||!Ke(e)&&!Ke(i)?e!==e&&i!==i:Dd(e,i,o,u,Bi,f)}function Dd(e,i,o,u,f,g){var _=he(e),b=he(i),I=_?xt:Ct(e),D=b?xt:Ct(i);I=I==Ht?xe:I,D=D==Ht?xe:D;var F=I==xe,L=D==xe,K=I==D;if(K&&Vr(e)){if(!Vr(i))return!1;_=!0,F=!1}if(K&&!F)return g||(g=new fr),_||Si(e)?fu(e,i,o,u,f,g):ag(e,i,I,o,u,f,g);if(!(o&$)){var Y=F&&Re.call(e,"__wrapped__"),te=L&&Re.call(i,"__wrapped__");if(Y||te){var de=Y?e.value():e,re=te?i.value():i;return g||(g=new fr),f(de,re,o,u,g)}}return K?(g||(g=new fr),cg(e,i,o,u,f,g)):!1}function Fd(e){return Ke(e)&&Ct(e)==ve}function Qs(e,i,o,u){var f=o.length,g=f,_=!u;if(e==null)return!g;for(e=$e(e);f--;){var b=o[f];if(_&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++f<g;){b=o[f];var I=b[0],D=e[I],F=b[1];if(_&&b[2]){if(D===t&&!(I in e))return!1}else{var L=new fr;if(u)var K=u(D,F,I,e,i,L);if(!(K===t?Bi(F,D,$|H,u,L):K))return!1}}return!0}function Dc(e){if(!Ve(e)||vg(e))return!1;var i=Rr(e)?Fp:Sf;return i.test(si(e))}function Ld(e){return Ke(e)&&Nt(e)==We}function jd(e){return Ke(e)&&Ct(e)==Ce}function Md(e){return Ke(e)&&is(e.length)&&!!Me[Nt(e)]}function Fc(e){return typeof e=="function"?e:e==null?zt:typeof e=="object"?he(e)?Mc(e[0],e[1]):jc(e):ih(e)}function Xs(e){if(!Gi(e))return zp(e);var i=[];for(var o in $e(e))Re.call(e,o)&&o!="constructor"&&i.push(o);return i}function qd(e){if(!Ve(e))return wg(e);var i=Gi(e),o=[];for(var u in e)u=="constructor"&&(i||!Re.call(e,u))||o.push(u);return o}function Zs(e,i){return e<i}function Lc(e,i){var o=-1,u=qt(e)?O(e.length):[];return zr(e,function(f,g,_){u[++o]=i(f,g,_)}),u}function jc(e){var i=go(e);return i.length==1&&i[0][2]?vu(i[0][0],i[0][1]):function(o){return o===e||Qs(o,e,i)}}function Mc(e,i){return vo(e)&&yu(i)?vu(_r(e),i):function(o){var u=Oo(o,e);return u===t&&u===i?Ao(o,e):Bi(i,u,$|H)}}function zn(e,i,o,u,f){e!==i&&Gs(i,function(g,_){if(f||(f=new fr),Ve(g))Ud(e,i,_,o,zn,u,f);else{var b=u?u(_o(e,_),g,_+"",e,i,f):t;b===t&&(b=g),Vs(e,_,b)}},Ut)}function Ud(e,i,o,u,f,g,_){var b=_o(e,o),I=_o(i,o),D=_.get(I);if(D){Vs(e,o,D);return}var F=g?g(b,I,o+"",e,i,_):t,L=F===t;if(L){var K=he(I),Y=!K&&Vr(I),te=!K&&!Y&&Si(I);F=I,K||Y||te?he(b)?F=b:Ye(b)?F=Mt(b):Y?(L=!1,F=Yc(I,!0)):te?(L=!1,F=Qc(I,!0)):F=[]:Ji(I)||oi(I)?(F=b,oi(b)?F=Gu(b):(!Ve(b)||Rr(b))&&(F=gu(I))):L=!1}L&&(_.set(I,F),f(F,I,u,g,_),_.delete(I)),Vs(e,o,F)}function qc(e,i){var o=e.length;if(o)return i+=i<0?o:0,Ar(i,o)?e[i]:t}function Uc(e,i,o){i.length?i=Ue(i,function(g){return he(g)?function(_){return ii(_,g.length===1?g[0]:g)}:g}):i=[zt];var u=-1;i=Ue(i,Kt(ee()));var f=Lc(e,function(g,_,b){var I=Ue(i,function(D){return D(g)});return{criteria:I,index:++u,value:g}});return pp(f,function(g,_){return Zd(g,_,o)})}function zd(e,i){return zc(e,i,function(o,u){return Ao(e,u)})}function zc(e,i,o){for(var u=-1,f=i.length,g={};++u<f;){var _=i[u],b=ii(e,_);o(b,_)&&Vi(g,Hr(_,e),b)}return g}function kd(e){return function(i){return ii(i,e)}}function eo(e,i,o,u){var f=u?fp:di,g=-1,_=i.length,b=e;for(e===i&&(i=Mt(i)),o&&(b=Ue(e,Kt(o)));++g<_;)for(var I=0,D=i[g],F=o?o(D):D;(I=f(b,F,I,u))>-1;)b!==e&&Tn.call(b,I,1),Tn.call(e,I,1);return e}function kc(e,i){for(var o=e?i.length:0,u=o-1;o--;){var f=i[o];if(o==u||f!==g){var g=f;Ar(f)?Tn.call(e,f,1):no(e,f)}}return e}function to(e,i){return e+Dn(Ec()*(i-e+1))}function Hd(e,i,o,u){for(var f=-1,g=ot($n((i-e)/(o||1)),0),_=O(g);g--;)_[u?g:++f]=e,e+=o;return _}function ro(e,i){var o="";if(!e||i<1||i>k)return o;do i%2&&(o+=e),i=Dn(i/2),i&&(e+=e);while(i);return o}function ge(e,i){return bo(mu(e,i,zt),e+"")}function Bd(e){return Sc(Pi(e))}function Vd(e,i){var o=Pi(e);return Qn(o,ri(i,0,o.length))}function Vi(e,i,o,u){if(!Ve(e))return e;i=Hr(i,e);for(var f=-1,g=i.length,_=g-1,b=e;b!=null&&++f<g;){var I=_r(i[f]),D=o;if(I==="__proto__"||I==="constructor"||I==="prototype")return e;if(f!=_){var F=b[I];D=u?u(F,I,b):t,D===t&&(D=Ve(F)?F:Ar(i[f+1])?[]:{})}zi(b,I,D),b=b[I]}return e}var Hc=Fn?function(e,i){return Fn.set(e,i),e}:zt,Kd=Nn?function(e,i){return Nn(e,"toString",{configurable:!0,enumerable:!1,value:Co(i),writable:!0})}:zt;function Gd(e){return Qn(Pi(e))}function nr(e,i,o){var u=-1,f=e.length;i<0&&(i=-i>f?0:f+i),o=o>f?f:o,o<0&&(o+=f),f=i>o?0:o-i>>>0,i>>>=0;for(var g=O(f);++u<f;)g[u]=e[u+i];return g}function Wd(e,i){var o;return zr(e,function(u,f,g){return o=i(u,f,g),!o}),!!o}function kn(e,i,o){var u=0,f=e==null?u:e.length;if(typeof i=="number"&&i===i&&f<=je){for(;u<f;){var g=u+f>>>1,_=e[g];_!==null&&!Wt(_)&&(o?_<=i:_<i)?u=g+1:f=g}return f}return io(e,i,zt,o)}function io(e,i,o,u){var f=0,g=e==null?0:e.length;if(g===0)return 0;i=o(i);for(var _=i!==i,b=i===null,I=Wt(i),D=i===t;f<g;){var F=Dn((f+g)/2),L=o(e[F]),K=L!==t,Y=L===null,te=L===L,de=Wt(L);if(_)var re=u||te;else D?re=te&&(u||K):b?re=te&&K&&(u||!Y):I?re=te&&K&&!Y&&(u||!de):Y||de?re=!1:re=u?L<=i:L<i;re?f=F+1:g=F}return Rt(g,qe)}function Bc(e,i){for(var o=-1,u=e.length,f=0,g=[];++o<u;){var _=e[o],b=i?i(_):_;if(!o||!pr(b,I)){var I=b;g[f++]=_===0?0:_}}return g}function Vc(e){return typeof e=="number"?e:Wt(e)?z:+e}function Gt(e){if(typeof e=="string")return e;if(he(e))return Ue(e,Gt)+"";if(Wt(e))return xc?xc.call(e):"";var i=e+"";return i=="0"&&1/e==-ne?"-0":i}function kr(e,i,o){var u=-1,f=wn,g=e.length,_=!0,b=[],I=b;if(o)_=!1,f=Ns;else if(g>=s){var D=i?null:sg(e);if(D)return xn(D);_=!1,f=Fi,I=new ti}else I=i?[]:b;e:for(;++u<g;){var F=e[u],L=i?i(F):F;if(F=o||F!==0?F:0,_&&L===L){for(var K=I.length;K--;)if(I[K]===L)continue e;i&&I.push(L),b.push(F)}else f(I,L,o)||(I!==b&&I.push(L),b.push(F))}return b}function no(e,i){return i=Hr(i,e),e=_u(e,i),e==null||delete e[_r(sr(i))]}function Kc(e,i,o,u){return Vi(e,i,o(ii(e,i)),u)}function Hn(e,i,o,u){for(var f=e.length,g=u?f:-1;(u?g--:++g<f)&&i(e[g],g,e););return o?nr(e,u?0:g,u?g+1:f):nr(e,u?g+1:0,u?f:g)}function Gc(e,i){var o=e;return o instanceof be&&(o=o.value()),$s(i,function(u,f){return f.func.apply(f.thisArg,Mr([u],f.args))},o)}function so(e,i,o){var u=e.length;if(u<2)return u?kr(e[0]):[];for(var f=-1,g=O(u);++f<u;)for(var _=e[f],b=-1;++b<u;)b!=f&&(g[f]=ki(g[f]||_,e[b],i,o));return kr(Pt(g,1),i,o)}function Wc(e,i,o){for(var u=-1,f=e.length,g=i.length,_={};++u<f;){var b=u<g?i[u]:t;o(_,e[u],b)}return _}function oo(e){return Ye(e)?e:[]}function ao(e){return typeof e=="function"?e:zt}function Hr(e,i){return he(e)?e:vo(e,i)?[e]:xu(Pe(e))}var Jd=ge;function Br(e,i,o){var u=e.length;return o=o===t?u:o,!i&&o>=u?e:nr(e,i,o)}var Jc=Lp||function(e){return St.clearTimeout(e)};function Yc(e,i){if(i)return e.slice();var o=e.length,u=vc?vc(o):new e.constructor(o);return e.copy(u),u}function co(e){var i=new e.constructor(e.byteLength);return new Rn(i).set(new Rn(e)),i}function Yd(e,i){var o=i?co(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}function Qd(e){var i=new e.constructor(e.source,$a.exec(e));return i.lastIndex=e.lastIndex,i}function Xd(e){return Ui?$e(Ui.call(e)):{}}function Qc(e,i){var o=i?co(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function Xc(e,i){if(e!==i){var o=e!==t,u=e===null,f=e===e,g=Wt(e),_=i!==t,b=i===null,I=i===i,D=Wt(i);if(!b&&!D&&!g&&e>i||g&&_&&I&&!b&&!D||u&&_&&I||!o&&I||!f)return 1;if(!u&&!g&&!D&&e<i||D&&o&&f&&!u&&!g||b&&o&&f||!_&&f||!I)return-1}return 0}function Zd(e,i,o){for(var u=-1,f=e.criteria,g=i.criteria,_=f.length,b=o.length;++u<_;){var I=Xc(f[u],g[u]);if(I){if(u>=b)return I;var D=o[u];return I*(D=="desc"?-1:1)}}return e.index-i.index}function Zc(e,i,o,u){for(var f=-1,g=e.length,_=o.length,b=-1,I=i.length,D=ot(g-_,0),F=O(I+D),L=!u;++b<I;)F[b]=i[b];for(;++f<_;)(L||f<g)&&(F[o[f]]=e[f]);for(;D--;)F[b++]=e[f++];return F}function eu(e,i,o,u){for(var f=-1,g=e.length,_=-1,b=o.length,I=-1,D=i.length,F=ot(g-b,0),L=O(F+D),K=!u;++f<F;)L[f]=e[f];for(var Y=f;++I<D;)L[Y+I]=i[I];for(;++_<b;)(K||f<g)&&(L[Y+o[_]]=e[f++]);return L}function Mt(e,i){var o=-1,u=e.length;for(i||(i=O(u));++o<u;)i[o]=e[o];return i}function mr(e,i,o,u){var f=!o;o||(o={});for(var g=-1,_=i.length;++g<_;){var b=i[g],I=u?u(o[b],e[b],b,o,e):t;I===t&&(I=e[b]),f?Sr(o,b,I):zi(o,b,I)}return o}function eg(e,i){return mr(e,yo(e),i)}function tg(e,i){return mr(e,pu(e),i)}function Bn(e,i){return function(o,u){var f=he(o)?op:xd,g=i?i():{};return f(o,e,ee(u,2),g)}}function Ei(e){return ge(function(i,o){var u=-1,f=o.length,g=f>1?o[f-1]:t,_=f>2?o[2]:t;for(g=e.length>3&&typeof g=="function"?(f--,g):t,_&&$t(o[0],o[1],_)&&(g=f<3?t:g,f=1),i=$e(i);++u<f;){var b=o[u];b&&e(i,b,u,g)}return i})}function tu(e,i){return function(o,u){if(o==null)return o;if(!qt(o))return e(o,u);for(var f=o.length,g=i?f:-1,_=$e(o);(i?g--:++g<f)&&u(_[g],g,_)!==!1;);return o}}function ru(e){return function(i,o,u){for(var f=-1,g=$e(i),_=u(i),b=_.length;b--;){var I=_[e?b:++f];if(o(g[I],I,g)===!1)break}return i}}function rg(e,i,o){var u=i&ie,f=Ki(e);function g(){var _=this&&this!==St&&this instanceof g?f:e;return _.apply(u?o:this,arguments)}return g}function iu(e){return function(i){i=Pe(i);var o=gi(i)?lr(i):t,u=o?o[0]:i.charAt(0),f=o?Br(o,1).join(""):i.slice(1);return u[e]()+f}}function xi(e){return function(i){return $s(th(eh(i).replace(Kf,"")),e,"")}}function Ki(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=wi(e.prototype),u=e.apply(o,i);return Ve(u)?u:o}}function ig(e,i,o){var u=Ki(e);function f(){for(var g=arguments.length,_=O(g),b=g,I=Ii(f);b--;)_[b]=arguments[b];var D=g<3&&_[0]!==I&&_[g-1]!==I?[]:qr(_,I);if(g-=D.length,g<o)return cu(e,i,Vn,f.placeholder,t,_,D,t,t,o-g);var F=this&&this!==St&&this instanceof f?u:e;return Vt(F,this,_)}return f}function nu(e){return function(i,o,u){var f=$e(i);if(!qt(i)){var g=ee(o,3);i=Et(i),o=function(b){return g(f[b],b,f)}}var _=e(i,o,u);return _>-1?f[g?i[_]:_]:t}}function su(e){return Or(function(i){var o=i.length,u=o,f=rr.prototype.thru;for(e&&i.reverse();u--;){var g=i[u];if(typeof g!="function")throw new tr(l);if(f&&!_&&Jn(g)=="wrapper")var _=new rr([],!0)}for(u=_?u:o;++u<o;){g=i[u];var b=Jn(g),I=b=="wrapper"?po(g):t;I&&mo(I[0])&&I[1]==(q|le|ce|V)&&!I[4].length&&I[9]==1?_=_[Jn(I[0])].apply(_,I[3]):_=g.length==1&&mo(g)?_[b]():_.thru(g)}return function(){var D=arguments,F=D[0];if(_&&D.length==1&&he(F))return _.plant(F).value();for(var L=0,K=o?i[L].apply(this,D):F;++L<o;)K=i[L].call(this,K);return K}})}function Vn(e,i,o,u,f,g,_,b,I,D){var F=i&q,L=i&ie,K=i&ye,Y=i&(le|oe),te=i&fe,de=K?t:Ki(e);function re(){for(var me=arguments.length,we=O(me),Jt=me;Jt--;)we[Jt]=arguments[Jt];if(Y)var Dt=Ii(re),Yt=gp(we,Dt);if(u&&(we=Zc(we,u,f,Y)),g&&(we=eu(we,g,_,Y)),me-=Yt,Y&&me<D){var Qe=qr(we,Dt);return cu(e,i,Vn,re.placeholder,o,we,Qe,b,I,D-me)}var dr=L?o:this,Tr=K?dr[e]:e;return me=we.length,b?we=xg(we,b):te&&me>1&&we.reverse(),F&&I<me&&(we.length=I),this&&this!==St&&this instanceof re&&(Tr=de||Ki(Tr)),Tr.apply(dr,we)}return re}function ou(e,i){return function(o,u){return Td(o,e,i(u),{})}}function Kn(e,i){return function(o,u){var f;if(o===t&&u===t)return i;if(o!==t&&(f=o),u!==t){if(f===t)return u;typeof o=="string"||typeof u=="string"?(o=Gt(o),u=Gt(u)):(o=Vc(o),u=Vc(u)),f=e(o,u)}return f}}function uo(e){return Or(function(i){return i=Ue(i,Kt(ee())),ge(function(o){var u=this;return e(i,function(f){return Vt(f,u,o)})})})}function Gn(e,i){i=i===t?" ":Gt(i);var o=i.length;if(o<2)return o?ro(i,e):i;var u=ro(i,$n(e/yi(i)));return gi(i)?Br(lr(u),0,e).join(""):u.slice(0,e)}function ng(e,i,o,u){var f=i&ie,g=Ki(e);function _(){for(var b=-1,I=arguments.length,D=-1,F=u.length,L=O(F+I),K=this&&this!==St&&this instanceof _?g:e;++D<F;)L[D]=u[D];for(;I--;)L[D++]=arguments[++b];return Vt(K,f?o:this,L)}return _}function au(e){return function(i,o,u){return u&&typeof u!="number"&&$t(i,o,u)&&(o=u=t),i=Cr(i),o===t?(o=i,i=0):o=Cr(o),u=u===t?i<o?1:-1:Cr(u),Hd(i,o,u,e)}}function Wn(e){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=or(i),o=or(o)),e(i,o)}}function cu(e,i,o,u,f,g,_,b,I,D){var F=i&le,L=F?_:t,K=F?t:_,Y=F?g:t,te=F?t:g;i|=F?ce:T,i&=~(F?T:ce),i&_e||(i&=~(ie|ye));var de=[e,i,f,Y,L,te,K,b,I,D],re=o.apply(t,de);return mo(e)&&bu(re,de),re.placeholder=u,wu(re,e,i)}function ho(e){var i=st[e];return function(o,u){if(o=or(o),u=u==null?0:Rt(pe(u),292),u&&wc(o)){var f=(Pe(o)+"e").split("e"),g=i(f[0]+"e"+(+f[1]+u));return f=(Pe(g)+"e").split("e"),+(f[0]+"e"+(+f[1]-u))}return i(o)}}var sg=_i&&1/xn(new _i([,-0]))[1]==ne?function(e){return new _i(e)}:$o;function uu(e){return function(i){var o=Ct(i);return o==ve?Us(i):o==Ce?Ep(i):dp(i,e(i))}}function Pr(e,i,o,u,f,g,_,b){var I=i&ye;if(!I&&typeof e!="function")throw new tr(l);var D=u?u.length:0;if(D||(i&=~(ce|T),u=f=t),_=_===t?_:ot(pe(_),0),b=b===t?b:pe(b),D-=f?f.length:0,i&T){var F=u,L=f;u=f=t}var K=I?t:po(e),Y=[e,i,o,u,f,F,L,g,_,b];if(K&&bg(Y,K),e=Y[0],i=Y[1],o=Y[2],u=Y[3],f=Y[4],b=Y[9]=Y[9]===t?I?0:e.length:ot(Y[9]-D,0),!b&&i&(le|oe)&&(i&=~(le|oe)),!i||i==ie)var te=rg(e,i,o);else i==le||i==oe?te=ig(e,i,b):(i==ce||i==(ie|ce))&&!f.length?te=ng(e,i,o,u):te=Vn.apply(t,Y);var de=K?Hc:bu;return wu(de(te,Y),e,i)}function hu(e,i,o,u){return e===t||pr(e,mi[o])&&!Re.call(u,o)?i:e}function lu(e,i,o,u,f,g){return Ve(e)&&Ve(i)&&(g.set(i,e),zn(e,i,t,lu,g),g.delete(i)),e}function og(e){return Ji(e)?t:e}function fu(e,i,o,u,f,g){var _=o&$,b=e.length,I=i.length;if(b!=I&&!(_&&I>b))return!1;var D=g.get(e),F=g.get(i);if(D&&F)return D==i&&F==e;var L=-1,K=!0,Y=o&H?new ti:t;for(g.set(e,i),g.set(i,e);++L<b;){var te=e[L],de=i[L];if(u)var re=_?u(de,te,L,i,e,g):u(te,de,L,e,i,g);if(re!==t){if(re)continue;K=!1;break}if(Y){if(!Ds(i,function(me,we){if(!Fi(Y,we)&&(te===me||f(te,me,o,u,g)))return Y.push(we)})){K=!1;break}}else if(!(te===de||f(te,de,o,u,g))){K=!1;break}}return g.delete(e),g.delete(i),K}function ag(e,i,o,u,f,g,_){switch(o){case Be:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Ne:return!(e.byteLength!=i.byteLength||!g(new Rn(e),new Rn(i)));case C:case P:case Se:return pr(+e,+i);case w:return e.name==i.name&&e.message==i.message;case We:case ze:return e==i+"";case ve:var b=Us;case Ce:var I=u&$;if(b||(b=xn),e.size!=i.size&&!I)return!1;var D=_.get(e);if(D)return D==i;u|=H,_.set(e,i);var F=fu(b(e),b(i),u,f,g,_);return _.delete(e),F;case ke:if(Ui)return Ui.call(e)==Ui.call(i)}return!1}function cg(e,i,o,u,f,g){var _=o&$,b=lo(e),I=b.length,D=lo(i),F=D.length;if(I!=F&&!_)return!1;for(var L=I;L--;){var K=b[L];if(!(_?K in i:Re.call(i,K)))return!1}var Y=g.get(e),te=g.get(i);if(Y&&te)return Y==i&&te==e;var de=!0;g.set(e,i),g.set(i,e);for(var re=_;++L<I;){K=b[L];var me=e[K],we=i[K];if(u)var Jt=_?u(we,me,K,i,e,g):u(me,we,K,e,i,g);if(!(Jt===t?me===we||f(me,we,o,u,g):Jt)){de=!1;break}re||(re=K=="constructor")}if(de&&!re){var Dt=e.constructor,Yt=i.constructor;Dt!=Yt&&"constructor"in e&&"constructor"in i&&!(typeof Dt=="function"&&Dt instanceof Dt&&typeof Yt=="function"&&Yt instanceof Yt)&&(de=!1)}return g.delete(e),g.delete(i),de}function Or(e){return bo(mu(e,t,Ou),e+"")}function lo(e){return Nc(e,Et,yo)}function fo(e){return Nc(e,Ut,pu)}var po=Fn?function(e){return Fn.get(e)}:$o;function Jn(e){for(var i=e.name+"",o=bi[i],u=Re.call(bi,i)?o.length:0;u--;){var f=o[u],g=f.func;if(g==null||g==e)return f.name}return i}function Ii(e){var i=Re.call(d,"placeholder")?d:e;return i.placeholder}function ee(){var e=d.iteratee||To;return e=e===To?Fc:e,arguments.length?e(arguments[0],arguments[1]):e}function Yn(e,i){var o=e.__data__;return yg(i)?o[typeof i=="string"?"string":"hash"]:o.map}function go(e){for(var i=Et(e),o=i.length;o--;){var u=i[o],f=e[u];i[o]=[u,f,yu(f)]}return i}function ni(e,i){var o=_p(e,i);return Dc(o)?o:t}function ug(e){var i=Re.call(e,Zr),o=e[Zr];try{e[Zr]=t;var u=!0}catch{}var f=On.call(e);return u&&(i?e[Zr]=o:delete e[Zr]),f}var yo=ks?function(e){return e==null?[]:(e=$e(e),jr(ks(e),function(i){return _c.call(e,i)}))}:Do,pu=ks?function(e){for(var i=[];e;)Mr(i,yo(e)),e=Cn(e);return i}:Do,Ct=Nt;(Hs&&Ct(new Hs(new ArrayBuffer(1)))!=Be||ji&&Ct(new ji)!=ve||Bs&&Ct(Bs.resolve())!=at||_i&&Ct(new _i)!=Ce||Mi&&Ct(new Mi)!=Fe)&&(Ct=function(e){var i=Nt(e),o=i==xe?e.constructor:t,u=o?si(o):"";if(u)switch(u){case Vp:return Be;case Kp:return ve;case Gp:return at;case Wp:return Ce;case Jp:return Fe}return i});function hg(e,i,o){for(var u=-1,f=o.length;++u<f;){var g=o[u],_=g.size;switch(g.type){case"drop":e+=_;break;case"dropRight":i-=_;break;case"take":i=Rt(i,e+_);break;case"takeRight":e=ot(e,i-_);break}}return{start:e,end:i}}function lg(e){var i=e.match(_t);return i?i[1].split(bt):[]}function du(e,i,o){i=Hr(i,e);for(var u=-1,f=i.length,g=!1;++u<f;){var _=_r(i[u]);if(!(g=e!=null&&o(e,_)))break;e=e[_]}return g||++u!=f?g:(f=e==null?0:e.length,!!f&&is(f)&&Ar(_,f)&&(he(e)||oi(e)))}function fg(e){var i=e.length,o=new e.constructor(i);return i&&typeof e[0]=="string"&&Re.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function gu(e){return typeof e.constructor=="function"&&!Gi(e)?wi(Cn(e)):{}}function pg(e,i,o){var u=e.constructor;switch(i){case Ne:return co(e);case C:case P:return new u(+e);case Be:return Yd(e,o);case it:case ct:case It:case At:case Tt:case jt:case Bt:case Xt:case hr:return Qc(e,o);case ve:return new u;case Se:case ze:return new u(e);case We:return Qd(e);case Ce:return new u;case ke:return Xd(e)}}function dg(e,i){var o=i.length;if(!o)return e;var u=o-1;return i[u]=(o>1?"& ":"")+i[u],i=i.join(o>2?", ":" "),e.replace(mt,`{
/* [wrapped with `+i+`] */
`)}function gg(e){return he(e)||oi(e)||!!(bc&&e&&e[bc])}function Ar(e,i){var o=typeof e;return i=i??k,!!i&&(o=="number"||o!="symbol"&&Of.test(e))&&e>-1&&e%1==0&&e<i}function $t(e,i,o){if(!Ve(o))return!1;var u=typeof i;return(u=="number"?qt(o)&&Ar(i,o.length):u=="string"&&i in o)?pr(o[i],e):!1}function vo(e,i){if(he(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||Wt(e)?!0:dt.test(e)||!pt.test(e)||i!=null&&e in $e(i)}function yg(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function mo(e){var i=Jn(e),o=d[i];if(typeof o!="function"||!(i in be.prototype))return!1;if(e===o)return!0;var u=po(o);return!!u&&e===u[0]}function vg(e){return!!yc&&yc in e}var mg=Sn?Rr:Fo;function Gi(e){var i=e&&e.constructor,o=typeof i=="function"&&i.prototype||mi;return e===o}function yu(e){return e===e&&!Ve(e)}function vu(e,i){return function(o){return o==null?!1:o[e]===i&&(i!==t||e in $e(o))}}function _g(e){var i=ts(e,function(u){return o.size===y&&o.clear(),u}),o=i.cache;return i}function bg(e,i){var o=e[1],u=i[1],f=o|u,g=f<(ie|ye|q),_=u==q&&o==le||u==q&&o==V&&e[7].length<=i[8]||u==(q|V)&&i[7].length<=i[8]&&o==le;if(!(g||_))return e;u&ie&&(e[2]=i[2],f|=o&ie?0:_e);var b=i[3];if(b){var I=e[3];e[3]=I?Zc(I,b,i[4]):b,e[4]=I?qr(e[3],S):i[4]}return b=i[5],b&&(I=e[5],e[5]=I?eu(I,b,i[6]):b,e[6]=I?qr(e[5],S):i[6]),b=i[7],b&&(e[7]=b),u&q&&(e[8]=e[8]==null?i[8]:Rt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=f,e}function wg(e){var i=[];if(e!=null)for(var o in $e(e))i.push(o);return i}function Eg(e){return On.call(e)}function mu(e,i,o){return i=ot(i===t?e.length-1:i,0),function(){for(var u=arguments,f=-1,g=ot(u.length-i,0),_=O(g);++f<g;)_[f]=u[i+f];f=-1;for(var b=O(i+1);++f<i;)b[f]=u[f];return b[i]=o(_),Vt(e,this,b)}}function _u(e,i){return i.length<2?e:ii(e,nr(i,0,-1))}function xg(e,i){for(var o=e.length,u=Rt(i.length,o),f=Mt(e);u--;){var g=i[u];e[u]=Ar(g,o)?f[g]:t}return e}function _o(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var bu=Eu(Hc),Wi=Mp||function(e,i){return St.setTimeout(e,i)},bo=Eu(Kd);function wu(e,i,o){var u=i+"";return bo(e,dg(u,Ig(lg(u),o)))}function Eu(e){var i=0,o=0;return function(){var u=kp(),f=De-(u-o);if(o=u,f>0){if(++i>=Oe)return arguments[0]}else i=0;return e.apply(t,arguments)}}function Qn(e,i){var o=-1,u=e.length,f=u-1;for(i=i===t?u:i;++o<i;){var g=to(o,f),_=e[g];e[g]=e[o],e[o]=_}return e.length=i,e}var xu=_g(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(gt,function(o,u,f,g){i.push(f?g.replace(wf,"$1"):u||o)}),i});function _r(e){if(typeof e=="string"||Wt(e))return e;var i=e+"";return i=="0"&&1/e==-ne?"-0":i}function si(e){if(e!=null){try{return Pn.call(e)}catch{}try{return e+""}catch{}}return""}function Ig(e,i){return er(Fr,function(o){var u="_."+o[0];i&o[1]&&!wn(e,u)&&e.push(u)}),e.sort()}function Iu(e){if(e instanceof be)return e.clone();var i=new rr(e.__wrapped__,e.__chain__);return i.__actions__=Mt(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function Sg(e,i,o){(o?$t(e,i,o):i===t)?i=1:i=ot(pe(i),0);var u=e==null?0:e.length;if(!u||i<1)return[];for(var f=0,g=0,_=O($n(u/i));f<u;)_[g++]=nr(e,f,f+=i);return _}function Pg(e){for(var i=-1,o=e==null?0:e.length,u=0,f=[];++i<o;){var g=e[i];g&&(f[u++]=g)}return f}function Og(){var e=arguments.length;if(!e)return[];for(var i=O(e-1),o=arguments[0],u=e;u--;)i[u-1]=arguments[u];return Mr(he(o)?Mt(o):[o],Pt(i,1))}var Ag=ge(function(e,i){return Ye(e)?ki(e,Pt(i,1,Ye,!0)):[]}),Rg=ge(function(e,i){var o=sr(i);return Ye(o)&&(o=t),Ye(e)?ki(e,Pt(i,1,Ye,!0),ee(o,2)):[]}),Cg=ge(function(e,i){var o=sr(i);return Ye(o)&&(o=t),Ye(e)?ki(e,Pt(i,1,Ye,!0),t,o):[]});function Tg(e,i,o){var u=e==null?0:e.length;return u?(i=o||i===t?1:pe(i),nr(e,i<0?0:i,u)):[]}function Ng(e,i,o){var u=e==null?0:e.length;return u?(i=o||i===t?1:pe(i),i=u-i,nr(e,0,i<0?0:i)):[]}function $g(e,i){return e&&e.length?Hn(e,ee(i,3),!0,!0):[]}function Dg(e,i){return e&&e.length?Hn(e,ee(i,3),!0):[]}function Fg(e,i,o,u){var f=e==null?0:e.length;return f?(o&&typeof o!="number"&&$t(e,i,o)&&(o=0,u=f),Od(e,i,o,u)):[]}function Su(e,i,o){var u=e==null?0:e.length;if(!u)return-1;var f=o==null?0:pe(o);return f<0&&(f=ot(u+f,0)),En(e,ee(i,3),f)}function Pu(e,i,o){var u=e==null?0:e.length;if(!u)return-1;var f=u-1;return o!==t&&(f=pe(o),f=o<0?ot(u+f,0):Rt(f,u-1)),En(e,ee(i,3),f,!0)}function Ou(e){var i=e==null?0:e.length;return i?Pt(e,1):[]}function Lg(e){var i=e==null?0:e.length;return i?Pt(e,ne):[]}function jg(e,i){var o=e==null?0:e.length;return o?(i=i===t?1:pe(i),Pt(e,i)):[]}function Mg(e){for(var i=-1,o=e==null?0:e.length,u={};++i<o;){var f=e[i];u[f[0]]=f[1]}return u}function Au(e){return e&&e.length?e[0]:t}function qg(e,i,o){var u=e==null?0:e.length;if(!u)return-1;var f=o==null?0:pe(o);return f<0&&(f=ot(u+f,0)),di(e,i,f)}function Ug(e){var i=e==null?0:e.length;return i?nr(e,0,-1):[]}var zg=ge(function(e){var i=Ue(e,oo);return i.length&&i[0]===e[0]?Ys(i):[]}),kg=ge(function(e){var i=sr(e),o=Ue(e,oo);return i===sr(o)?i=t:o.pop(),o.length&&o[0]===e[0]?Ys(o,ee(i,2)):[]}),Hg=ge(function(e){var i=sr(e),o=Ue(e,oo);return i=typeof i=="function"?i:t,i&&o.pop(),o.length&&o[0]===e[0]?Ys(o,t,i):[]});function Bg(e,i){return e==null?"":Up.call(e,i)}function sr(e){var i=e==null?0:e.length;return i?e[i-1]:t}function Vg(e,i,o){var u=e==null?0:e.length;if(!u)return-1;var f=u;return o!==t&&(f=pe(o),f=f<0?ot(u+f,0):Rt(f,u-1)),i===i?Ip(e,i,f):En(e,cc,f,!0)}function Kg(e,i){return e&&e.length?qc(e,pe(i)):t}var Gg=ge(Ru);function Ru(e,i){return e&&e.length&&i&&i.length?eo(e,i):e}function Wg(e,i,o){return e&&e.length&&i&&i.length?eo(e,i,ee(o,2)):e}function Jg(e,i,o){return e&&e.length&&i&&i.length?eo(e,i,t,o):e}var Yg=Or(function(e,i){var o=e==null?0:e.length,u=Ks(e,i);return kc(e,Ue(i,function(f){return Ar(f,o)?+f:f}).sort(Xc)),u});function Qg(e,i){var o=[];if(!(e&&e.length))return o;var u=-1,f=[],g=e.length;for(i=ee(i,3);++u<g;){var _=e[u];i(_,u,e)&&(o.push(_),f.push(u))}return kc(e,f),o}function wo(e){return e==null?e:Bp.call(e)}function Xg(e,i,o){var u=e==null?0:e.length;return u?(o&&typeof o!="number"&&$t(e,i,o)?(i=0,o=u):(i=i==null?0:pe(i),o=o===t?u:pe(o)),nr(e,i,o)):[]}function Zg(e,i){return kn(e,i)}function ey(e,i,o){return io(e,i,ee(o,2))}function ty(e,i){var o=e==null?0:e.length;if(o){var u=kn(e,i);if(u<o&&pr(e[u],i))return u}return-1}function ry(e,i){return kn(e,i,!0)}function iy(e,i,o){return io(e,i,ee(o,2),!0)}function ny(e,i){var o=e==null?0:e.length;if(o){var u=kn(e,i,!0)-1;if(pr(e[u],i))return u}return-1}function sy(e){return e&&e.length?Bc(e):[]}function oy(e,i){return e&&e.length?Bc(e,ee(i,2)):[]}function ay(e){var i=e==null?0:e.length;return i?nr(e,1,i):[]}function cy(e,i,o){return e&&e.length?(i=o||i===t?1:pe(i),nr(e,0,i<0?0:i)):[]}function uy(e,i,o){var u=e==null?0:e.length;return u?(i=o||i===t?1:pe(i),i=u-i,nr(e,i<0?0:i,u)):[]}function hy(e,i){return e&&e.length?Hn(e,ee(i,3),!1,!0):[]}function ly(e,i){return e&&e.length?Hn(e,ee(i,3)):[]}var fy=ge(function(e){return kr(Pt(e,1,Ye,!0))}),py=ge(function(e){var i=sr(e);return Ye(i)&&(i=t),kr(Pt(e,1,Ye,!0),ee(i,2))}),dy=ge(function(e){var i=sr(e);return i=typeof i=="function"?i:t,kr(Pt(e,1,Ye,!0),t,i)});function gy(e){return e&&e.length?kr(e):[]}function yy(e,i){return e&&e.length?kr(e,ee(i,2)):[]}function vy(e,i){return i=typeof i=="function"?i:t,e&&e.length?kr(e,t,i):[]}function Eo(e){if(!(e&&e.length))return[];var i=0;return e=jr(e,function(o){if(Ye(o))return i=ot(o.length,i),!0}),Ms(i,function(o){return Ue(e,Fs(o))})}function Cu(e,i){if(!(e&&e.length))return[];var o=Eo(e);return i==null?o:Ue(o,function(u){return Vt(i,t,u)})}var my=ge(function(e,i){return Ye(e)?ki(e,i):[]}),_y=ge(function(e){return so(jr(e,Ye))}),by=ge(function(e){var i=sr(e);return Ye(i)&&(i=t),so(jr(e,Ye),ee(i,2))}),wy=ge(function(e){var i=sr(e);return i=typeof i=="function"?i:t,so(jr(e,Ye),t,i)}),Ey=ge(Eo);function xy(e,i){return Wc(e||[],i||[],zi)}function Iy(e,i){return Wc(e||[],i||[],Vi)}var Sy=ge(function(e){var i=e.length,o=i>1?e[i-1]:t;return o=typeof o=="function"?(e.pop(),o):t,Cu(e,o)});function Tu(e){var i=d(e);return i.__chain__=!0,i}function Py(e,i){return i(e),e}function Xn(e,i){return i(e)}var Oy=Or(function(e){var i=e.length,o=i?e[0]:0,u=this.__wrapped__,f=function(g){return Ks(g,e)};return i>1||this.__actions__.length||!(u instanceof be)||!Ar(o)?this.thru(f):(u=u.slice(o,+o+(i?1:0)),u.__actions__.push({func:Xn,args:[f],thisArg:t}),new rr(u,this.__chain__).thru(function(g){return i&&!g.length&&g.push(t),g}))});function Ay(){return Tu(this)}function Ry(){return new rr(this.value(),this.__chain__)}function Cy(){this.__values__===t&&(this.__values__=Vu(this.value()));var e=this.__index__>=this.__values__.length,i=e?t:this.__values__[this.__index__++];return{done:e,value:i}}function Ty(){return this}function Ny(e){for(var i,o=this;o instanceof jn;){var u=Iu(o);u.__index__=0,u.__values__=t,i?f.__wrapped__=u:i=u;var f=u;o=o.__wrapped__}return f.__wrapped__=e,i}function $y(){var e=this.__wrapped__;if(e instanceof be){var i=e;return this.__actions__.length&&(i=new be(this)),i=i.reverse(),i.__actions__.push({func:Xn,args:[wo],thisArg:t}),new rr(i,this.__chain__)}return this.thru(wo)}function Dy(){return Gc(this.__wrapped__,this.__actions__)}var Fy=Bn(function(e,i,o){Re.call(e,o)?++e[o]:Sr(e,o,1)});function Ly(e,i,o){var u=he(e)?oc:Pd;return o&&$t(e,i,o)&&(i=t),u(e,ee(i,3))}function jy(e,i){var o=he(e)?jr:Cc;return o(e,ee(i,3))}var My=nu(Su),qy=nu(Pu);function Uy(e,i){return Pt(Zn(e,i),1)}function zy(e,i){return Pt(Zn(e,i),ne)}function ky(e,i,o){return o=o===t?1:pe(o),Pt(Zn(e,i),o)}function Nu(e,i){var o=he(e)?er:zr;return o(e,ee(i,3))}function $u(e,i){var o=he(e)?ap:Rc;return o(e,ee(i,3))}var Hy=Bn(function(e,i,o){Re.call(e,o)?e[o].push(i):Sr(e,o,[i])});function By(e,i,o,u){e=qt(e)?e:Pi(e),o=o&&!u?pe(o):0;var f=e.length;return o<0&&(o=ot(f+o,0)),ns(e)?o<=f&&e.indexOf(i,o)>-1:!!f&&di(e,i,o)>-1}var Vy=ge(function(e,i,o){var u=-1,f=typeof i=="function",g=qt(e)?O(e.length):[];return zr(e,function(_){g[++u]=f?Vt(i,_,o):Hi(_,i,o)}),g}),Ky=Bn(function(e,i,o){Sr(e,o,i)});function Zn(e,i){var o=he(e)?Ue:Lc;return o(e,ee(i,3))}function Gy(e,i,o,u){return e==null?[]:(he(i)||(i=i==null?[]:[i]),o=u?t:o,he(o)||(o=o==null?[]:[o]),Uc(e,i,o))}var Wy=Bn(function(e,i,o){e[o?0:1].push(i)},function(){return[[],[]]});function Jy(e,i,o){var u=he(e)?$s:hc,f=arguments.length<3;return u(e,ee(i,4),o,f,zr)}function Yy(e,i,o){var u=he(e)?cp:hc,f=arguments.length<3;return u(e,ee(i,4),o,f,Rc)}function Qy(e,i){var o=he(e)?jr:Cc;return o(e,rs(ee(i,3)))}function Xy(e){var i=he(e)?Sc:Bd;return i(e)}function Zy(e,i,o){(o?$t(e,i,o):i===t)?i=1:i=pe(i);var u=he(e)?wd:Vd;return u(e,i)}function ev(e){var i=he(e)?Ed:Gd;return i(e)}function tv(e){if(e==null)return 0;if(qt(e))return ns(e)?yi(e):e.length;var i=Ct(e);return i==ve||i==Ce?e.size:Xs(e).length}function rv(e,i,o){var u=he(e)?Ds:Wd;return o&&$t(e,i,o)&&(i=t),u(e,ee(i,3))}var iv=ge(function(e,i){if(e==null)return[];var o=i.length;return o>1&&$t(e,i[0],i[1])?i=[]:o>2&&$t(i[0],i[1],i[2])&&(i=[i[0]]),Uc(e,Pt(i,1),[])}),es=jp||function(){return St.Date.now()};function nv(e,i){if(typeof i!="function")throw new tr(l);return e=pe(e),function(){if(--e<1)return i.apply(this,arguments)}}function Du(e,i,o){return i=o?t:i,i=e&&i==null?e.length:i,Pr(e,q,t,t,t,t,i)}function Fu(e,i){var o;if(typeof i!="function")throw new tr(l);return e=pe(e),function(){return--e>0&&(o=i.apply(this,arguments)),e<=1&&(i=t),o}}var xo=ge(function(e,i,o){var u=ie;if(o.length){var f=qr(o,Ii(xo));u|=ce}return Pr(e,u,i,o,f)}),Lu=ge(function(e,i,o){var u=ie|ye;if(o.length){var f=qr(o,Ii(Lu));u|=ce}return Pr(i,u,e,o,f)});function ju(e,i,o){i=o?t:i;var u=Pr(e,le,t,t,t,t,t,i);return u.placeholder=ju.placeholder,u}function Mu(e,i,o){i=o?t:i;var u=Pr(e,oe,t,t,t,t,t,i);return u.placeholder=Mu.placeholder,u}function qu(e,i,o){var u,f,g,_,b,I,D=0,F=!1,L=!1,K=!0;if(typeof e!="function")throw new tr(l);i=or(i)||0,Ve(o)&&(F=!!o.leading,L="maxWait"in o,g=L?ot(or(o.maxWait)||0,i):g,K="trailing"in o?!!o.trailing:K);function Y(Qe){var dr=u,Tr=f;return u=f=t,D=Qe,_=e.apply(Tr,dr),_}function te(Qe){return D=Qe,b=Wi(me,i),F?Y(Qe):_}function de(Qe){var dr=Qe-I,Tr=Qe-D,nh=i-dr;return L?Rt(nh,g-Tr):nh}function re(Qe){var dr=Qe-I,Tr=Qe-D;return I===t||dr>=i||dr<0||L&&Tr>=g}function me(){var Qe=es();if(re(Qe))return we(Qe);b=Wi(me,de(Qe))}function we(Qe){return b=t,K&&u?Y(Qe):(u=f=t,_)}function Jt(){b!==t&&Jc(b),D=0,u=I=f=b=t}function Dt(){return b===t?_:we(es())}function Yt(){var Qe=es(),dr=re(Qe);if(u=arguments,f=this,I=Qe,dr){if(b===t)return te(I);if(L)return Jc(b),b=Wi(me,i),Y(I)}return b===t&&(b=Wi(me,i)),_}return Yt.cancel=Jt,Yt.flush=Dt,Yt}var sv=ge(function(e,i){return Ac(e,1,i)}),ov=ge(function(e,i,o){return Ac(e,or(i)||0,o)});function av(e){return Pr(e,fe)}function ts(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new tr(l);var o=function(){var u=arguments,f=i?i.apply(this,u):u[0],g=o.cache;if(g.has(f))return g.get(f);var _=e.apply(this,u);return o.cache=g.set(f,_)||g,_};return o.cache=new(ts.Cache||Ir),o}ts.Cache=Ir;function rs(e){if(typeof e!="function")throw new tr(l);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function cv(e){return Fu(2,e)}var uv=Jd(function(e,i){i=i.length==1&&he(i[0])?Ue(i[0],Kt(ee())):Ue(Pt(i,1),Kt(ee()));var o=i.length;return ge(function(u){for(var f=-1,g=Rt(u.length,o);++f<g;)u[f]=i[f].call(this,u[f]);return Vt(e,this,u)})}),Io=ge(function(e,i){var o=qr(i,Ii(Io));return Pr(e,ce,t,i,o)}),Uu=ge(function(e,i){var o=qr(i,Ii(Uu));return Pr(e,T,t,i,o)}),hv=Or(function(e,i){return Pr(e,V,t,t,t,i)});function lv(e,i){if(typeof e!="function")throw new tr(l);return i=i===t?i:pe(i),ge(e,i)}function fv(e,i){if(typeof e!="function")throw new tr(l);return i=i==null?0:ot(pe(i),0),ge(function(o){var u=o[i],f=Br(o,0,i);return u&&Mr(f,u),Vt(e,this,f)})}function pv(e,i,o){var u=!0,f=!0;if(typeof e!="function")throw new tr(l);return Ve(o)&&(u="leading"in o?!!o.leading:u,f="trailing"in o?!!o.trailing:f),qu(e,i,{leading:u,maxWait:i,trailing:f})}function dv(e){return Du(e,1)}function gv(e,i){return Io(ao(i),e)}function yv(){if(!arguments.length)return[];var e=arguments[0];return he(e)?e:[e]}function vv(e){return ir(e,j)}function mv(e,i){return i=typeof i=="function"?i:t,ir(e,j,i)}function _v(e){return ir(e,U|j)}function bv(e,i){return i=typeof i=="function"?i:t,ir(e,U|j,i)}function wv(e,i){return i==null||Oc(e,i,Et(i))}function pr(e,i){return e===i||e!==e&&i!==i}var Ev=Wn(Js),xv=Wn(function(e,i){return e>=i}),oi=$c(function(){return arguments}())?$c:function(e){return Ke(e)&&Re.call(e,"callee")&&!_c.call(e,"callee")},he=O.isArray,Iv=ec?Kt(ec):Nd;function qt(e){return e!=null&&is(e.length)&&!Rr(e)}function Ye(e){return Ke(e)&&qt(e)}function Sv(e){return e===!0||e===!1||Ke(e)&&Nt(e)==C}var Vr=qp||Fo,Pv=tc?Kt(tc):$d;function Ov(e){return Ke(e)&&e.nodeType===1&&!Ji(e)}function Av(e){if(e==null)return!0;if(qt(e)&&(he(e)||typeof e=="string"||typeof e.splice=="function"||Vr(e)||Si(e)||oi(e)))return!e.length;var i=Ct(e);if(i==ve||i==Ce)return!e.size;if(Gi(e))return!Xs(e).length;for(var o in e)if(Re.call(e,o))return!1;return!0}function Rv(e,i){return Bi(e,i)}function Cv(e,i,o){o=typeof o=="function"?o:t;var u=o?o(e,i):t;return u===t?Bi(e,i,t,o):!!u}function So(e){if(!Ke(e))return!1;var i=Nt(e);return i==w||i==h||typeof e.message=="string"&&typeof e.name=="string"&&!Ji(e)}function Tv(e){return typeof e=="number"&&wc(e)}function Rr(e){if(!Ve(e))return!1;var i=Nt(e);return i==Q||i==ue||i==R||i==rt}function zu(e){return typeof e=="number"&&e==pe(e)}function is(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=k}function Ve(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function Ke(e){return e!=null&&typeof e=="object"}var ku=rc?Kt(rc):Fd;function Nv(e,i){return e===i||Qs(e,i,go(i))}function $v(e,i,o){return o=typeof o=="function"?o:t,Qs(e,i,go(i),o)}function Dv(e){return Hu(e)&&e!=+e}function Fv(e){if(mg(e))throw new ae(c);return Dc(e)}function Lv(e){return e===null}function jv(e){return e==null}function Hu(e){return typeof e=="number"||Ke(e)&&Nt(e)==Se}function Ji(e){if(!Ke(e)||Nt(e)!=xe)return!1;var i=Cn(e);if(i===null)return!0;var o=Re.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&Pn.call(o)==$p}var Po=ic?Kt(ic):Ld;function Mv(e){return zu(e)&&e>=-k&&e<=k}var Bu=nc?Kt(nc):jd;function ns(e){return typeof e=="string"||!he(e)&&Ke(e)&&Nt(e)==ze}function Wt(e){return typeof e=="symbol"||Ke(e)&&Nt(e)==ke}var Si=sc?Kt(sc):Md;function qv(e){return e===t}function Uv(e){return Ke(e)&&Ct(e)==Fe}function zv(e){return Ke(e)&&Nt(e)==He}var kv=Wn(Zs),Hv=Wn(function(e,i){return e<=i});function Vu(e){if(!e)return[];if(qt(e))return ns(e)?lr(e):Mt(e);if(Li&&e[Li])return wp(e[Li]());var i=Ct(e),o=i==ve?Us:i==Ce?xn:Pi;return o(e)}function Cr(e){if(!e)return e===0?e:0;if(e=or(e),e===ne||e===-ne){var i=e<0?-1:1;return i*M}return e===e?e:0}function pe(e){var i=Cr(e),o=i%1;return i===i?o?i-o:i:0}function Ku(e){return e?ri(pe(e),0,B):0}function or(e){if(typeof e=="number")return e;if(Wt(e))return z;if(Ve(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Ve(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=lc(e);var o=If.test(e);return o||Pf.test(e)?np(e.slice(2),o?2:8):xf.test(e)?z:+e}function Gu(e){return mr(e,Ut(e))}function Bv(e){return e?ri(pe(e),-k,k):e===0?e:0}function Pe(e){return e==null?"":Gt(e)}var Vv=Ei(function(e,i){if(Gi(i)||qt(i)){mr(i,Et(i),e);return}for(var o in i)Re.call(i,o)&&zi(e,o,i[o])}),Wu=Ei(function(e,i){mr(i,Ut(i),e)}),ss=Ei(function(e,i,o,u){mr(i,Ut(i),e,u)}),Kv=Ei(function(e,i,o,u){mr(i,Et(i),e,u)}),Gv=Or(Ks);function Wv(e,i){var o=wi(e);return i==null?o:Pc(o,i)}var Jv=ge(function(e,i){e=$e(e);var o=-1,u=i.length,f=u>2?i[2]:t;for(f&&$t(i[0],i[1],f)&&(u=1);++o<u;)for(var g=i[o],_=Ut(g),b=-1,I=_.length;++b<I;){var D=_[b],F=e[D];(F===t||pr(F,mi[D])&&!Re.call(e,D))&&(e[D]=g[D])}return e}),Yv=ge(function(e){return e.push(t,lu),Vt(Ju,t,e)});function Qv(e,i){return ac(e,ee(i,3),vr)}function Xv(e,i){return ac(e,ee(i,3),Ws)}function Zv(e,i){return e==null?e:Gs(e,ee(i,3),Ut)}function e0(e,i){return e==null?e:Tc(e,ee(i,3),Ut)}function t0(e,i){return e&&vr(e,ee(i,3))}function r0(e,i){return e&&Ws(e,ee(i,3))}function i0(e){return e==null?[]:Un(e,Et(e))}function n0(e){return e==null?[]:Un(e,Ut(e))}function Oo(e,i,o){var u=e==null?t:ii(e,i);return u===t?o:u}function s0(e,i){return e!=null&&du(e,i,Ad)}function Ao(e,i){return e!=null&&du(e,i,Rd)}var o0=ou(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=On.call(i)),e[i]=o},Co(zt)),a0=ou(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=On.call(i)),Re.call(e,i)?e[i].push(o):e[i]=[o]},ee),c0=ge(Hi);function Et(e){return qt(e)?Ic(e):Xs(e)}function Ut(e){return qt(e)?Ic(e,!0):qd(e)}function u0(e,i){var o={};return i=ee(i,3),vr(e,function(u,f,g){Sr(o,i(u,f,g),u)}),o}function h0(e,i){var o={};return i=ee(i,3),vr(e,function(u,f,g){Sr(o,f,i(u,f,g))}),o}var l0=Ei(function(e,i,o){zn(e,i,o)}),Ju=Ei(function(e,i,o,u){zn(e,i,o,u)}),f0=Or(function(e,i){var o={};if(e==null)return o;var u=!1;i=Ue(i,function(g){return g=Hr(g,e),u||(u=g.length>1),g}),mr(e,fo(e),o),u&&(o=ir(o,U|A|j,og));for(var f=i.length;f--;)no(o,i[f]);return o});function p0(e,i){return Yu(e,rs(ee(i)))}var d0=Or(function(e,i){return e==null?{}:zd(e,i)});function Yu(e,i){if(e==null)return{};var o=Ue(fo(e),function(u){return[u]});return i=ee(i),zc(e,o,function(u,f){return i(u,f[0])})}function g0(e,i,o){i=Hr(i,e);var u=-1,f=i.length;for(f||(f=1,e=t);++u<f;){var g=e==null?t:e[_r(i[u])];g===t&&(u=f,g=o),e=Rr(g)?g.call(e):g}return e}function y0(e,i,o){return e==null?e:Vi(e,i,o)}function v0(e,i,o,u){return u=typeof u=="function"?u:t,e==null?e:Vi(e,i,o,u)}var Qu=uu(Et),Xu=uu(Ut);function m0(e,i,o){var u=he(e),f=u||Vr(e)||Si(e);if(i=ee(i,4),o==null){var g=e&&e.constructor;f?o=u?new g:[]:Ve(e)?o=Rr(g)?wi(Cn(e)):{}:o={}}return(f?er:vr)(e,function(_,b,I){return i(o,_,b,I)}),o}function _0(e,i){return e==null?!0:no(e,i)}function b0(e,i,o){return e==null?e:Kc(e,i,ao(o))}function w0(e,i,o,u){return u=typeof u=="function"?u:t,e==null?e:Kc(e,i,ao(o),u)}function Pi(e){return e==null?[]:qs(e,Et(e))}function E0(e){return e==null?[]:qs(e,Ut(e))}function x0(e,i,o){return o===t&&(o=i,i=t),o!==t&&(o=or(o),o=o===o?o:0),i!==t&&(i=or(i),i=i===i?i:0),ri(or(e),i,o)}function I0(e,i,o){return i=Cr(i),o===t?(o=i,i=0):o=Cr(o),e=or(e),Cd(e,i,o)}function S0(e,i,o){if(o&&typeof o!="boolean"&&$t(e,i,o)&&(i=o=t),o===t&&(typeof i=="boolean"?(o=i,i=t):typeof e=="boolean"&&(o=e,e=t)),e===t&&i===t?(e=0,i=1):(e=Cr(e),i===t?(i=e,e=0):i=Cr(i)),e>i){var u=e;e=i,i=u}if(o||e%1||i%1){var f=Ec();return Rt(e+f*(i-e+ip("1e-"+((f+"").length-1))),i)}return to(e,i)}var P0=xi(function(e,i,o){return i=i.toLowerCase(),e+(o?Zu(i):i)});function Zu(e){return Ro(Pe(e).toLowerCase())}function eh(e){return e=Pe(e),e&&e.replace(Af,yp).replace(Gf,"")}function O0(e,i,o){e=Pe(e),i=Gt(i);var u=e.length;o=o===t?u:ri(pe(o),0,u);var f=o;return o-=i.length,o>=0&&e.slice(o,f)==i}function A0(e){return e=Pe(e),e&&ht.test(e)?e.replace(Di,vp):e}function R0(e){return e=Pe(e),e&&yt.test(e)?e.replace(Ze,"\\$&"):e}var C0=xi(function(e,i,o){return e+(o?"-":"")+i.toLowerCase()}),T0=xi(function(e,i,o){return e+(o?" ":"")+i.toLowerCase()}),N0=iu("toLowerCase");function $0(e,i,o){e=Pe(e),i=pe(i);var u=i?yi(e):0;if(!i||u>=i)return e;var f=(i-u)/2;return Gn(Dn(f),o)+e+Gn($n(f),o)}function D0(e,i,o){e=Pe(e),i=pe(i);var u=i?yi(e):0;return i&&u<i?e+Gn(i-u,o):e}function F0(e,i,o){e=Pe(e),i=pe(i);var u=i?yi(e):0;return i&&u<i?Gn(i-u,o)+e:e}function L0(e,i,o){return o||i==null?i=0:i&&(i=+i),Hp(Pe(e).replace(et,""),i||0)}function j0(e,i,o){return(o?$t(e,i,o):i===t)?i=1:i=pe(i),ro(Pe(e),i)}function M0(){var e=arguments,i=Pe(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var q0=xi(function(e,i,o){return e+(o?"_":"")+i.toLowerCase()});function U0(e,i,o){return o&&typeof o!="number"&&$t(e,i,o)&&(i=o=t),o=o===t?B:o>>>0,o?(e=Pe(e),e&&(typeof i=="string"||i!=null&&!Po(i))&&(i=Gt(i),!i&&gi(e))?Br(lr(e),0,o):e.split(i,o)):[]}var z0=xi(function(e,i,o){return e+(o?" ":"")+Ro(i)});function k0(e,i,o){return e=Pe(e),o=o==null?0:ri(pe(o),0,e.length),i=Gt(i),e.slice(o,o+i.length)==i}function H0(e,i,o){var u=d.templateSettings;o&&$t(e,i,o)&&(i=t),e=Pe(e),i=ss({},i,u,hu);var f=ss({},i.imports,u.imports,hu),g=Et(f),_=qs(f,g),b,I,D=0,F=i.interpolate||mn,L="__p += '",K=zs((i.escape||mn).source+"|"+F.source+"|"+(F===nt?Ef:mn).source+"|"+(i.evaluate||mn).source+"|$","g"),Y="//# sourceURL="+(Re.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xf+"]")+`
`;e.replace(K,function(re,me,we,Jt,Dt,Yt){return we||(we=Jt),L+=e.slice(D,Yt).replace(Rf,mp),me&&(b=!0,L+=`' +
__e(`+me+`) +
'`),Dt&&(I=!0,L+=`';
`+Dt+`;
__p += '`),we&&(L+=`' +
((__t = (`+we+`)) == null ? '' : __t) +
'`),D=Yt+re.length,re}),L+=`';
`;var te=Re.call(i,"variable")&&i.variable;if(!te)L=`with (obj) {
`+L+`
}
`;else if(bf.test(te))throw new ae(p);L=(I?L.replace(Lr,""):L).replace(Qr,"$1").replace(li,"$1;"),L="function("+(te||"obj")+`) {
`+(te?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(b?", __e = _.escape":"")+(I?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+L+`return __p
}`;var de=rh(function(){return Ie(g,Y+"return "+L).apply(t,_)});if(de.source=L,So(de))throw de;return de}function B0(e){return Pe(e).toLowerCase()}function V0(e){return Pe(e).toUpperCase()}function K0(e,i,o){if(e=Pe(e),e&&(o||i===t))return lc(e);if(!e||!(i=Gt(i)))return e;var u=lr(e),f=lr(i),g=fc(u,f),_=pc(u,f)+1;return Br(u,g,_).join("")}function G0(e,i,o){if(e=Pe(e),e&&(o||i===t))return e.slice(0,gc(e)+1);if(!e||!(i=Gt(i)))return e;var u=lr(e),f=pc(u,lr(i))+1;return Br(u,0,f).join("")}function W0(e,i,o){if(e=Pe(e),e&&(o||i===t))return e.replace(et,"");if(!e||!(i=Gt(i)))return e;var u=lr(e),f=fc(u,lr(i));return Br(u,f).join("")}function J0(e,i){var o=Z,u=se;if(Ve(i)){var f="separator"in i?i.separator:f;o="length"in i?pe(i.length):o,u="omission"in i?Gt(i.omission):u}e=Pe(e);var g=e.length;if(gi(e)){var _=lr(e);g=_.length}if(o>=g)return e;var b=o-yi(u);if(b<1)return u;var I=_?Br(_,0,b).join(""):e.slice(0,b);if(f===t)return I+u;if(_&&(b+=I.length-b),Po(f)){if(e.slice(b).search(f)){var D,F=I;for(f.global||(f=zs(f.source,Pe($a.exec(f))+"g")),f.lastIndex=0;D=f.exec(F);)var L=D.index;I=I.slice(0,L===t?b:L)}}else if(e.indexOf(Gt(f),b)!=b){var K=I.lastIndexOf(f);K>-1&&(I=I.slice(0,K))}return I+u}function Y0(e){return e=Pe(e),e&&ut.test(e)?e.replace(fi,Sp):e}var Q0=xi(function(e,i,o){return e+(o?" ":"")+i.toUpperCase()}),Ro=iu("toUpperCase");function th(e,i,o){return e=Pe(e),i=o?t:i,i===t?bp(e)?Ap(e):lp(e):e.match(i)||[]}var rh=ge(function(e,i){try{return Vt(e,t,i)}catch(o){return So(o)?o:new ae(o)}}),X0=Or(function(e,i){return er(i,function(o){o=_r(o),Sr(e,o,xo(e[o],e))}),e});function Z0(e){var i=e==null?0:e.length,o=ee();return e=i?Ue(e,function(u){if(typeof u[1]!="function")throw new tr(l);return[o(u[0]),u[1]]}):[],ge(function(u){for(var f=-1;++f<i;){var g=e[f];if(Vt(g[0],this,u))return Vt(g[1],this,u)}})}function em(e){return Sd(ir(e,U))}function Co(e){return function(){return e}}function tm(e,i){return e==null||e!==e?i:e}var rm=su(),im=su(!0);function zt(e){return e}function To(e){return Fc(typeof e=="function"?e:ir(e,U))}function nm(e){return jc(ir(e,U))}function sm(e,i){return Mc(e,ir(i,U))}var om=ge(function(e,i){return function(o){return Hi(o,e,i)}}),am=ge(function(e,i){return function(o){return Hi(e,o,i)}});function No(e,i,o){var u=Et(i),f=Un(i,u);o==null&&!(Ve(i)&&(f.length||!u.length))&&(o=i,i=e,e=this,f=Un(i,Et(i)));var g=!(Ve(o)&&"chain"in o)||!!o.chain,_=Rr(e);return er(f,function(b){var I=i[b];e[b]=I,_&&(e.prototype[b]=function(){var D=this.__chain__;if(g||D){var F=e(this.__wrapped__),L=F.__actions__=Mt(this.__actions__);return L.push({func:I,args:arguments,thisArg:e}),F.__chain__=D,F}return I.apply(e,Mr([this.value()],arguments))})}),e}function cm(){return St._===this&&(St._=Dp),this}function $o(){}function um(e){return e=pe(e),ge(function(i){return qc(i,e)})}var hm=uo(Ue),lm=uo(oc),fm=uo(Ds);function ih(e){return vo(e)?Fs(_r(e)):kd(e)}function pm(e){return function(i){return e==null?t:ii(e,i)}}var dm=au(),gm=au(!0);function Do(){return[]}function Fo(){return!1}function ym(){return{}}function vm(){return""}function mm(){return!0}function _m(e,i){if(e=pe(e),e<1||e>k)return[];var o=B,u=Rt(e,B);i=ee(i),e-=B;for(var f=Ms(u,i);++o<e;)i(o);return f}function bm(e){return he(e)?Ue(e,_r):Wt(e)?[e]:Mt(xu(Pe(e)))}function wm(e){var i=++Np;return Pe(e)+i}var Em=Kn(function(e,i){return e+i},0),xm=ho("ceil"),Im=Kn(function(e,i){return e/i},1),Sm=ho("floor");function Pm(e){return e&&e.length?qn(e,zt,Js):t}function Om(e,i){return e&&e.length?qn(e,ee(i,2),Js):t}function Am(e){return uc(e,zt)}function Rm(e,i){return uc(e,ee(i,2))}function Cm(e){return e&&e.length?qn(e,zt,Zs):t}function Tm(e,i){return e&&e.length?qn(e,ee(i,2),Zs):t}var Nm=Kn(function(e,i){return e*i},1),$m=ho("round"),Dm=Kn(function(e,i){return e-i},0);function Fm(e){return e&&e.length?js(e,zt):0}function Lm(e,i){return e&&e.length?js(e,ee(i,2)):0}return d.after=nv,d.ary=Du,d.assign=Vv,d.assignIn=Wu,d.assignInWith=ss,d.assignWith=Kv,d.at=Gv,d.before=Fu,d.bind=xo,d.bindAll=X0,d.bindKey=Lu,d.castArray=yv,d.chain=Tu,d.chunk=Sg,d.compact=Pg,d.concat=Og,d.cond=Z0,d.conforms=em,d.constant=Co,d.countBy=Fy,d.create=Wv,d.curry=ju,d.curryRight=Mu,d.debounce=qu,d.defaults=Jv,d.defaultsDeep=Yv,d.defer=sv,d.delay=ov,d.difference=Ag,d.differenceBy=Rg,d.differenceWith=Cg,d.drop=Tg,d.dropRight=Ng,d.dropRightWhile=$g,d.dropWhile=Dg,d.fill=Fg,d.filter=jy,d.flatMap=Uy,d.flatMapDeep=zy,d.flatMapDepth=ky,d.flatten=Ou,d.flattenDeep=Lg,d.flattenDepth=jg,d.flip=av,d.flow=rm,d.flowRight=im,d.fromPairs=Mg,d.functions=i0,d.functionsIn=n0,d.groupBy=Hy,d.initial=Ug,d.intersection=zg,d.intersectionBy=kg,d.intersectionWith=Hg,d.invert=o0,d.invertBy=a0,d.invokeMap=Vy,d.iteratee=To,d.keyBy=Ky,d.keys=Et,d.keysIn=Ut,d.map=Zn,d.mapKeys=u0,d.mapValues=h0,d.matches=nm,d.matchesProperty=sm,d.memoize=ts,d.merge=l0,d.mergeWith=Ju,d.method=om,d.methodOf=am,d.mixin=No,d.negate=rs,d.nthArg=um,d.omit=f0,d.omitBy=p0,d.once=cv,d.orderBy=Gy,d.over=hm,d.overArgs=uv,d.overEvery=lm,d.overSome=fm,d.partial=Io,d.partialRight=Uu,d.partition=Wy,d.pick=d0,d.pickBy=Yu,d.property=ih,d.propertyOf=pm,d.pull=Gg,d.pullAll=Ru,d.pullAllBy=Wg,d.pullAllWith=Jg,d.pullAt=Yg,d.range=dm,d.rangeRight=gm,d.rearg=hv,d.reject=Qy,d.remove=Qg,d.rest=lv,d.reverse=wo,d.sampleSize=Zy,d.set=y0,d.setWith=v0,d.shuffle=ev,d.slice=Xg,d.sortBy=iv,d.sortedUniq=sy,d.sortedUniqBy=oy,d.split=U0,d.spread=fv,d.tail=ay,d.take=cy,d.takeRight=uy,d.takeRightWhile=hy,d.takeWhile=ly,d.tap=Py,d.throttle=pv,d.thru=Xn,d.toArray=Vu,d.toPairs=Qu,d.toPairsIn=Xu,d.toPath=bm,d.toPlainObject=Gu,d.transform=m0,d.unary=dv,d.union=fy,d.unionBy=py,d.unionWith=dy,d.uniq=gy,d.uniqBy=yy,d.uniqWith=vy,d.unset=_0,d.unzip=Eo,d.unzipWith=Cu,d.update=b0,d.updateWith=w0,d.values=Pi,d.valuesIn=E0,d.without=my,d.words=th,d.wrap=gv,d.xor=_y,d.xorBy=by,d.xorWith=wy,d.zip=Ey,d.zipObject=xy,d.zipObjectDeep=Iy,d.zipWith=Sy,d.entries=Qu,d.entriesIn=Xu,d.extend=Wu,d.extendWith=ss,No(d,d),d.add=Em,d.attempt=rh,d.camelCase=P0,d.capitalize=Zu,d.ceil=xm,d.clamp=x0,d.clone=vv,d.cloneDeep=_v,d.cloneDeepWith=bv,d.cloneWith=mv,d.conformsTo=wv,d.deburr=eh,d.defaultTo=tm,d.divide=Im,d.endsWith=O0,d.eq=pr,d.escape=A0,d.escapeRegExp=R0,d.every=Ly,d.find=My,d.findIndex=Su,d.findKey=Qv,d.findLast=qy,d.findLastIndex=Pu,d.findLastKey=Xv,d.floor=Sm,d.forEach=Nu,d.forEachRight=$u,d.forIn=Zv,d.forInRight=e0,d.forOwn=t0,d.forOwnRight=r0,d.get=Oo,d.gt=Ev,d.gte=xv,d.has=s0,d.hasIn=Ao,d.head=Au,d.identity=zt,d.includes=By,d.indexOf=qg,d.inRange=I0,d.invoke=c0,d.isArguments=oi,d.isArray=he,d.isArrayBuffer=Iv,d.isArrayLike=qt,d.isArrayLikeObject=Ye,d.isBoolean=Sv,d.isBuffer=Vr,d.isDate=Pv,d.isElement=Ov,d.isEmpty=Av,d.isEqual=Rv,d.isEqualWith=Cv,d.isError=So,d.isFinite=Tv,d.isFunction=Rr,d.isInteger=zu,d.isLength=is,d.isMap=ku,d.isMatch=Nv,d.isMatchWith=$v,d.isNaN=Dv,d.isNative=Fv,d.isNil=jv,d.isNull=Lv,d.isNumber=Hu,d.isObject=Ve,d.isObjectLike=Ke,d.isPlainObject=Ji,d.isRegExp=Po,d.isSafeInteger=Mv,d.isSet=Bu,d.isString=ns,d.isSymbol=Wt,d.isTypedArray=Si,d.isUndefined=qv,d.isWeakMap=Uv,d.isWeakSet=zv,d.join=Bg,d.kebabCase=C0,d.last=sr,d.lastIndexOf=Vg,d.lowerCase=T0,d.lowerFirst=N0,d.lt=kv,d.lte=Hv,d.max=Pm,d.maxBy=Om,d.mean=Am,d.meanBy=Rm,d.min=Cm,d.minBy=Tm,d.stubArray=Do,d.stubFalse=Fo,d.stubObject=ym,d.stubString=vm,d.stubTrue=mm,d.multiply=Nm,d.nth=Kg,d.noConflict=cm,d.noop=$o,d.now=es,d.pad=$0,d.padEnd=D0,d.padStart=F0,d.parseInt=L0,d.random=S0,d.reduce=Jy,d.reduceRight=Yy,d.repeat=j0,d.replace=M0,d.result=g0,d.round=$m,d.runInContext=x,d.sample=Xy,d.size=tv,d.snakeCase=q0,d.some=rv,d.sortedIndex=Zg,d.sortedIndexBy=ey,d.sortedIndexOf=ty,d.sortedLastIndex=ry,d.sortedLastIndexBy=iy,d.sortedLastIndexOf=ny,d.startCase=z0,d.startsWith=k0,d.subtract=Dm,d.sum=Fm,d.sumBy=Lm,d.template=H0,d.times=_m,d.toFinite=Cr,d.toInteger=pe,d.toLength=Ku,d.toLower=B0,d.toNumber=or,d.toSafeInteger=Bv,d.toString=Pe,d.toUpper=V0,d.trim=K0,d.trimEnd=G0,d.trimStart=W0,d.truncate=J0,d.unescape=Y0,d.uniqueId=wm,d.upperCase=Q0,d.upperFirst=Ro,d.each=Nu,d.eachRight=$u,d.first=Au,No(d,function(){var e={};return vr(d,function(i,o){Re.call(d.prototype,o)||(e[o]=i)}),e}(),{chain:!1}),d.VERSION=n,er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){d[e].placeholder=d}),er(["drop","take"],function(e,i){be.prototype[e]=function(o){o=o===t?1:ot(pe(o),0);var u=this.__filtered__&&!i?new be(this):this.clone();return u.__filtered__?u.__takeCount__=Rt(o,u.__takeCount__):u.__views__.push({size:Rt(o,B),type:e+(u.__dir__<0?"Right":"")}),u},be.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),er(["filter","map","takeWhile"],function(e,i){var o=i+1,u=o==v||o==J;be.prototype[e]=function(f){var g=this.clone();return g.__iteratees__.push({iteratee:ee(f,3),type:o}),g.__filtered__=g.__filtered__||u,g}}),er(["head","last"],function(e,i){var o="take"+(i?"Right":"");be.prototype[e]=function(){return this[o](1).value()[0]}}),er(["initial","tail"],function(e,i){var o="drop"+(i?"":"Right");be.prototype[e]=function(){return this.__filtered__?new be(this):this[o](1)}}),be.prototype.compact=function(){return this.filter(zt)},be.prototype.find=function(e){return this.filter(e).head()},be.prototype.findLast=function(e){return this.reverse().find(e)},be.prototype.invokeMap=ge(function(e,i){return typeof e=="function"?new be(this):this.map(function(o){return Hi(o,e,i)})}),be.prototype.reject=function(e){return this.filter(rs(ee(e)))},be.prototype.slice=function(e,i){e=pe(e);var o=this;return o.__filtered__&&(e>0||i<0)?new be(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),i!==t&&(i=pe(i),o=i<0?o.dropRight(-i):o.take(i-e)),o)},be.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},be.prototype.toArray=function(){return this.take(B)},vr(be.prototype,function(e,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),f=d[u?"take"+(i=="last"?"Right":""):i],g=u||/^find/.test(i);f&&(d.prototype[i]=function(){var _=this.__wrapped__,b=u?[1]:arguments,I=_ instanceof be,D=b[0],F=I||he(_),L=function(me){var we=f.apply(d,Mr([me],b));return u&&K?we[0]:we};F&&o&&typeof D=="function"&&D.length!=1&&(I=F=!1);var K=this.__chain__,Y=!!this.__actions__.length,te=g&&!K,de=I&&!Y;if(!g&&F){_=de?_:new be(this);var re=e.apply(_,b);return re.__actions__.push({func:Xn,args:[L],thisArg:t}),new rr(re,K)}return te&&de?e.apply(this,b):(re=this.thru(L),te?u?re.value()[0]:re.value():re)})}),er(["pop","push","shift","sort","splice","unshift"],function(e){var i=In[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);d.prototype[e]=function(){var f=arguments;if(u&&!this.__chain__){var g=this.value();return i.apply(he(g)?g:[],f)}return this[o](function(_){return i.apply(he(_)?_:[],f)})}}),vr(be.prototype,function(e,i){var o=d[i];if(o){var u=o.name+"";Re.call(bi,u)||(bi[u]=[]),bi[u].push({name:i,func:o})}}),bi[Vn(t,ye).name]=[{name:"wrapper",func:t}],be.prototype.clone=Yp,be.prototype.reverse=Qp,be.prototype.value=Xp,d.prototype.at=Oy,d.prototype.chain=Ay,d.prototype.commit=Ry,d.prototype.next=Cy,d.prototype.plant=Ny,d.prototype.reverse=$y,d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=Dy,d.prototype.first=d.prototype.head,Li&&(d.prototype[Li]=Ty),d},vi=Rp();Xr?((Xr.exports=vi)._=vi,Cs._=vi):St._=vi}).call(an)})(ga,ga.exports);var aI=Object.defineProperty,cI=Object.defineProperties,uI=Object.getOwnPropertyDescriptors,al=Object.getOwnPropertySymbols,hI=Object.prototype.hasOwnProperty,lI=Object.prototype.propertyIsEnumerable,cl=(a,r,t)=>r in a?aI(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,as=(a,r)=>{for(var t in r||(r={}))hI.call(r,t)&&cl(a,t,r[t]);if(al)for(var t of al(r))lI.call(r,t)&&cl(a,t,r[t]);return a},fI=(a,r)=>cI(a,uI(r));function ur(a,r,t){let n;const s=ya(a);return r.rpcMap&&(n=r.rpcMap[s]),n||(n=`${oI}?chainId=eip155:${s}&projectId=${t}`),n}function ya(a){return a.includes("eip155")?Number(a.split(":")[1]):Number(a)}function mf(a){return a.map(r=>`${r.split(":")[0]}:${r.split(":")[1]}`)}function pI(a,r){const t=Object.keys(r.namespaces).filter(s=>s.includes(a));if(!t.length)return[];const n=[];return t.forEach(s=>{const c=r.namespaces[s].accounts;n.push(...c)}),n}function dI(a={},r={}){const t=ul(a),n=ul(r);return ga.exports.merge(t,n)}function ul(a){var r,t,n,s;const c={};if(!hs(a))return c;for(const[l,p]of Object.entries(a)){const m=xl(l)?[l]:p.chains,y=p.methods||[],S=p.events||[],U=p.rpcMap||{},A=ls(l);c[A]=fI(as(as({},c[A]),p),{chains:jo(m,(r=c[A])==null?void 0:r.chains),methods:jo(y,(t=c[A])==null?void 0:t.methods),events:jo(S,(n=c[A])==null?void 0:n.events),rpcMap:as(as({},U),(s=c[A])==null?void 0:s.rpcMap)})}return c}function gI(a){return a.includes(":")?a.split(":")[2]:a}function yI(a){const r={};for(const[t,n]of Object.entries(a)){const s=n.methods||[],c=n.events||[],l=n.accounts||[],p=xl(t)?[t]:n.chains?n.chains:mf(n.accounts);r[t]={chains:p,methods:s,events:c,accounts:l}}return r}const _f={},Xe=a=>_f[a],Jo=(a,r)=>{_f[a]=r};class vI{constructor(r){this.name="polkadot",this.namespace=r.namespace,this.events=Xe("events"),this.client=Xe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){if(this.chainId=r,!this.httpProviders[r]){const n=t||ur(`${this.name}:${r}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,n)}this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;r[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||ur(r,this.namespace);return typeof n>"u"?void 0:new Jr(new hi(n,Xe("disableProviderPing")))}}class mI{constructor(r){this.name="eip155",this.namespace=r.namespace,this.events=Xe("events"),this.client=Xe("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(r){switch(r.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(r);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(r.request.method)?await this.client.request(r):this.getHttpProvider().request(r.request)}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}setDefaultChain(r,t){const n=ya(r);if(!this.httpProviders[n]){const s=t||ur(`${this.name}:${n}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${n}`);this.setHttpProvider(n,s)}this.chainId=n,this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}createHttpProvider(r,t){const n=t||ur(`${this.name}:${r}`,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Jr(new hi(n,Xe("disableProviderPing")))}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=ya(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const r=this.chainId,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}async handleSwitchChain(r){var t,n;let s=r.request.params?(t=r.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const c=parseInt(s,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:r.topic,request:{method:r.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(r){return this.namespace.chains.includes(`${this.name}:${r}`)}}class _I{constructor(r){this.name="solana",this.namespace=r.namespace,this.events=Xe("events"),this.client=Xe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){if(!this.httpProviders[r]){const n=t||ur(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,n)}this.chainId=r,this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;r[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||ur(r,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Jr(new hi(n,Xe("disableProviderPing")))}}class bI{constructor(r){this.name="cosmos",this.namespace=r.namespace,this.events=Xe("events"),this.client=Xe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){if(this.chainId=r,!this.httpProviders[r]){const n=t||ur(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,n)}this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;r[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||ur(r,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Jr(new hi(n,Xe("disableProviderPing")))}}class wI{constructor(r){this.name="cip34",this.namespace=r.namespace,this.events=Xe("events"),this.client=Xe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){if(this.chainId=r,!this.httpProviders[r]){const n=t||this.getCardanoRPCUrl(r);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,n)}this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{const n=this.getCardanoRPCUrl(t);r[t]=this.createHttpProvider(t,n)}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}getCardanoRPCUrl(r){const t=this.namespace.rpcMap;if(t)return t[r]}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||this.getCardanoRPCUrl(r);return typeof n>"u"?void 0:new Jr(new hi(n,Xe("disableProviderPing")))}}class EI{constructor(r){this.name="elrond",this.namespace=r.namespace,this.events=Xe("events"),this.client=Xe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){if(!this.httpProviders[r]){const n=t||ur(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,n)}this.chainId=r,this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;r[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||ur(r,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Jr(new hi(n,Xe("disableProviderPing")))}}class xI{constructor(r){this.name="multiversx",this.namespace=r.namespace,this.events=Xe("events"),this.client=Xe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){if(!this.httpProviders[r]){const n=t||ur(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,n)}this.chainId=r,this.events.emit(Yr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;r[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||ur(r,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Jr(new hi(n,Xe("disableProviderPing")))}}var II=Object.defineProperty,SI=Object.defineProperties,PI=Object.getOwnPropertyDescriptors,hl=Object.getOwnPropertySymbols,OI=Object.prototype.hasOwnProperty,AI=Object.prototype.propertyIsEnumerable,ll=(a,r,t)=>r in a?II(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,cs=(a,r)=>{for(var t in r||(r={}))OI.call(r,t)&&ll(a,t,r[t]);if(hl)for(var t of hl(r))AI.call(r,t)&&ll(a,t,r[t]);return a},Yo=(a,r)=>SI(a,PI(r));class Ta{constructor(r){this.events=new wa,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=r,this.logger=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:Ee.pino(Ee.getDefaultLoggerOptions({level:(r==null?void 0:r.logger)||sl})),this.disableProviderPing=(r==null?void 0:r.disableProviderPing)||!1}static async init(r){const t=new Ta(r);return await t.initialize(),t}async request(r,t){const[n,s]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:cs({},r),chainId:`${n}:${s}`,topic:this.session.topic})}sendAsync(r,t,n){this.request(r,n).then(s=>t(null,s)).catch(s=>t(s,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var r;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(r=this.session)==null?void 0:r.topic,reason:Lt("USER_DISCONNECTED")}),await this.cleanup()}async connect(r){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(r),await this.cleanupPendingPairings(),!r.skipPairing)return await this.pair(r.pairingTopic)}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}removeListener(r,t){this.events.removeListener(r,t)}off(r,t){this.events.off(r,t)}get isWalletConnect(){return!0}async pair(r){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:n,approval:s}=await this.client.connect({pairingTopic:r,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});n&&(this.uri=n,this.events.emit("display_uri",n)),await s().then(c=>{this.session=c,this.namespaces||(this.namespaces=yI(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==yf)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(r,t){try{if(!this.session)return;const[n,s]=this.validateChain(r);this.getProvider(n).setDefaultChain(s,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(r={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Ni(t)){for(const n of t)r.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const r=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[r]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Zx.init({logger:this.providerOpts.logger||sl,relayUrl:this.providerOpts.relayUrl||iI,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const r=[...new Set(Object.keys(this.session.namespaces).map(t=>ls(t)))];Jo("client",this.client),Jo("events",this.events),Jo("disableProviderPing",this.disableProviderPing),r.forEach(t=>{if(!this.session)return;const n=pI(t,this.session),s=mf(n),c=dI(this.namespaces,this.optionalNamespaces),l=Yo(cs({},c[t]),{accounts:n,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new mI({namespace:l});break;case"solana":this.rpcProviders[t]=new _I({namespace:l});break;case"cosmos":this.rpcProviders[t]=new bI({namespace:l});break;case"polkadot":this.rpcProviders[t]=new vI({namespace:l});break;case"cip34":this.rpcProviders[t]=new wI({namespace:l});break;case"elrond":this.rpcProviders[t]=new EI({namespace:l});break;case"multiversx":this.rpcProviders[t]=new xI({namespace:l});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",r=>{this.events.emit("session_ping",r)}),this.client.on("session_event",r=>{const{params:t}=r,{event:n}=t;if(n.name==="accountsChanged"){const s=n.data;s&&Ni(s)&&this.events.emit("accountsChanged",s.map(gI))}else n.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(n.name,n.data);this.events.emit("session_event",r)}),this.client.on("session_update",({topic:r,params:t})=>{var n;const{namespaces:s}=t,c=(n=this.client)==null?void 0:n.session.get(r);this.session=Yo(cs({},c),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:r,params:t})}),this.client.on("session_delete",async r=>{await this.cleanup(),this.events.emit("session_delete",r),this.events.emit("disconnect",Yo(cs({},Lt("USER_DISCONNECTED")),{data:r.topic}))}),this.on(Yr.DEFAULT_CHAIN_CHANGED,r=>{this.onChainChanged(r,!0)})}getProvider(r){if(!this.rpcProviders[r])throw new Error(`Provider not found: ${r}`);return this.rpcProviders[r]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(r=>{var t;this.getProvider(r).updateNamespace((t=this.session)==null?void 0:t.namespaces[r])})}setNamespaces(r){const{namespaces:t,optionalNamespaces:n,sessionProperties:s}=r;t&&Object.keys(t).length&&(this.namespaces=t),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",n)}validateChain(r){const[t,n]=(r==null?void 0:r.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,n];if(t&&!Object.keys(this.namespaces||{}).map(l=>ls(l)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&n)return[t,n];const s=ls(Object.keys(this.namespaces)[0]),c=this.rpcProviders[s].getDefaultChain();return[s,c]}async requestAccounts(){const[r]=this.validateChain();return await this.getProvider(r).requestAccounts()}onChainChanged(r,t=!1){var n;if(!this.namespaces)return;const[s,c]=this.validateChain(r);t||this.getProvider(s).setDefaultChain(c),((n=this.namespaces[s])!=null?n:this.namespaces[`${s}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(r,t){this.client.core.storage.setItem(`${ol}/${r}`,t)}async getFromStore(r){return await this.client.core.storage.getItem(`${ol}/${r}`)}}const RI=Ta,CI="wc",TI="ethereum_provider",NI=`${CI}@2:${TI}:`,$I="https://rpc.walletconnect.com/v1/",va=["eth_sendTransaction","personal_sign"],DI=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],ma=["chainChanged","accountsChanged"],FI=["message","disconnect","connect"];var LI=Object.defineProperty,jI=Object.defineProperties,MI=Object.getOwnPropertyDescriptors,fl=Object.getOwnPropertySymbols,qI=Object.prototype.hasOwnProperty,UI=Object.prototype.propertyIsEnumerable,pl=(a,r,t)=>r in a?LI(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,cn=(a,r)=>{for(var t in r||(r={}))qI.call(r,t)&&pl(a,t,r[t]);if(fl)for(var t of fl(r))UI.call(r,t)&&pl(a,t,r[t]);return a},dl=(a,r)=>jI(a,MI(r));function gs(a){return Number(a[0].split(":")[1])}function Qo(a){return`0x${a.toString(16)}`}function zI(a){const{chains:r,optionalChains:t,methods:n,optionalMethods:s,events:c,optionalEvents:l,rpcMap:p}=a;if(!Ni(r))throw new Error("Invalid chains");const m={chains:r,methods:n||va,events:c||ma,rpcMap:cn({},r.length?{[gs(r)]:p[gs(r)]}:{})},y=c==null?void 0:c.filter(j=>!ma.includes(j)),S=n==null?void 0:n.filter(j=>!va.includes(j));if(!t&&!l&&!s&&!(y!=null&&y.length)&&!(S!=null&&S.length))return{required:r.length?m:void 0};const U=(y==null?void 0:y.length)&&(S==null?void 0:S.length)||!t,A={chains:[...new Set(U?m.chains.concat(t||[]):t)],methods:[...new Set(m.methods.concat(s!=null&&s.length?s:DI))],events:[...new Set(m.events.concat(l||FI))],rpcMap:p};return{required:r.length?m:void 0,optional:t.length?A:void 0}}class Na{constructor(){this.events=new Qt.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=NI,this.on=(r,t)=>(this.events.on(r,t),this),this.once=(r,t)=>(this.events.once(r,t),this),this.removeListener=(r,t)=>(this.events.removeListener(r,t),this),this.off=(r,t)=>(this.events.off(r,t),this),this.parseAccount=r=>this.isCompatibleChainId(r)?this.parseAccountId(r).address:r,this.signer={},this.rpc={}}static async init(r){const t=new Na;return await t.initialize(r),t}async request(r){return await this.signer.request(r,this.formatChainId(this.chainId))}sendAsync(r,t){this.signer.sendAsync(r,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(r){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(r);const{required:t,optional:n}=zI(this.rpc);try{const s=await new Promise(async(l,p)=>{var m;this.rpc.showQrModal&&((m=this.modal)==null||m.subscribeModal(y=>{!y.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),p(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(dl(cn({namespaces:cn({},t&&{[this.namespace]:t})},n&&{optionalNamespaces:{[this.namespace]:n}}),{pairingTopic:r==null?void 0:r.pairingTopic})).then(y=>{l(y)}).catch(y=>{p(new Error(y.message))})});if(!s)return;this.setChainIds(this.rpc.chains);const c=w_(s.namespaces,[this.namespace]);this.setAccounts(c),this.events.emit("connect",{chainId:Qo(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",r=>{const{params:t}=r,{event:n}=t;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",r)}),this.signer.on("chainChanged",r=>{const t=parseInt(r);this.chainId=t,this.events.emit("chainChanged",Qo(this.chainId)),this.persist()}),this.signer.on("session_update",r=>{this.events.emit("session_update",r)}),this.signer.on("session_delete",r=>{this.reset(),this.events.emit("session_delete",r),this.events.emit("disconnect",dl(cn({},Lt("USER_DISCONNECTED")),{data:r.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",r=>{var t,n;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(n=this.modal)==null||n.openModal({uri:r})),this.events.emit("display_uri",r)})}switchEthereumChain(r){this.request({method:"wallet_switchEthereumChain",params:[{chainId:r.toString(16)}]})}isCompatibleChainId(r){return typeof r=="string"?r.startsWith(`${this.namespace}:`):!1}formatChainId(r){return`${this.namespace}:${r}`}parseChainId(r){return Number(r.split(":")[1])}setChainIds(r){const t=r.filter(n=>this.isCompatibleChainId(n)).map(n=>this.parseChainId(n));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Qo(this.chainId)),this.persist())}setChainId(r){if(this.isCompatibleChainId(r)){const t=this.parseChainId(r);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(r){const[t,n,s]=r.split(":");return{chainId:`${t}:${n}`,address:s}}setAccounts(r){this.accounts=r.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(r){var t,n;const s=(t=r==null?void 0:r.chains)!=null?t:[],c=(n=r==null?void 0:r.optionalChains)!=null?n:[],l=s.concat(c);if(!l.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const p=s.length?(r==null?void 0:r.methods)||va:[],m=s.length?(r==null?void 0:r.events)||ma:[],y=(r==null?void 0:r.optionalMethods)||[],S=(r==null?void 0:r.optionalEvents)||[],U=(r==null?void 0:r.rpcMap)||this.buildRpcMap(l,r.projectId),A=(r==null?void 0:r.qrModalOptions)||void 0;return{chains:s==null?void 0:s.map(j=>this.formatChainId(j)),optionalChains:c.map(j=>this.formatChainId(j)),methods:p,events:m,optionalMethods:y,optionalEvents:S,rpcMap:U,showQrModal:!!(r!=null&&r.showQrModal),qrModalOptions:A,projectId:r.projectId,metadata:r.metadata}}buildRpcMap(r,t){const n={};return r.forEach(s=>{n[s]=this.getRpcUrl(s,t)}),n}async initialize(r){if(this.rpc=this.getRpcConfig(r),this.chainId=this.rpc.chains.length?gs(this.rpc.chains):gs(this.rpc.optionalChains),this.signer=await RI.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:r.disableProviderPing,relayUrl:r.relayUrl,storageOptions:r.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:n}=await E_(()=>import("./index-66d8d35b.js").then(s=>s.i),["assets/index-66d8d35b.js","assets/app-8c4d1a63.js","assets/app-c07db1c4.css"]);t=n}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(cn({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(n){throw this.signer.logger.error(n),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(r){if(!r)return;const{chains:t,optionalChains:n,rpcMap:s}=r;t&&Ni(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(s==null?void 0:s[c])||this.getRpcUrl(c)})),n&&Ni(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n==null?void 0:n.map(c=>this.formatChainId(c)),n.forEach(c=>{this.rpc.rpcMap[c]=(s==null?void 0:s[c])||this.getRpcUrl(c)}))}getRpcUrl(r,t){var n;return((n=this.rpc.rpcMap)==null?void 0:n[r])||`${$I}?chainId=eip155:${r}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const r=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${r}`]?this.session.namespaces[`${this.namespace}:${r}`]:this.session.namespaces[this.namespace];this.setChainIds(r?[this.formatChainId(r)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(r){return typeof r=="string"||r instanceof String?[this.parseAccount(r)]:r.map(t=>this.parseAccount(t))}}const YI=Na;export{YI as EthereumProvider,FI as OPTIONAL_EVENTS,DI as OPTIONAL_METHODS,ma as REQUIRED_EVENTS,va as REQUIRED_METHODS,Na as default};
